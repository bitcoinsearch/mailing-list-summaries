<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - Full Disclosure: CVE-2023-40231 / CVE-2023-40232 / CVE-2023-40233 / CVE-2023-40234 "All your mempool are belong to us"</title>
  <updated>2023-10-24T15:05:33.877781+00:00</updated>
  <author>
    <name>Matt Corallo 2023-10-23 16:09:50+00:00</name>
  </author>
  <author>
    <name>David A. Harding 2023-10-23 08:49:55+00:00</name>
  </author>
  <author>
    <name>Nadav Ivgi 2023-10-22 04:49:19+00:00</name>
  </author>
  <author>
    <name>Antoine Riard 2023-10-21 20:05:35+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-10-21 02:43:31+00:00</name>
  </author>
  <author>
    <name>Matt Corallo 2023-10-21 01:55:12+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-10-21 01:25:10+00:00</name>
  </author>
  <author>
    <name>Matt Corallo 2023-10-21 01:03:49+00:00</name>
  </author>
  <author>
    <name>Olaoluwa Osuntokun 2023-10-21 00:18:58+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-10-21 00:15:21+00:00</name>
  </author>
  <author>
    <name>Matt Corallo 2023-10-20 21:05:48+00:00</name>
  </author>
  <author>
    <name>Matt Morehouse 2023-10-20 18:35:26+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-10-20 11:03:43+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-10-20 10:31:03+00:00</name>
  </author>
  <author>
    <name>Antoine Riard 2023-10-20 06:56:34+00:00</name>
  </author>
  <author>
    <name>Antoine Riard 2023-10-19 19:33:22+00:00</name>
  </author>
  <author>
    <name>Matt Corallo 2023-10-19 18:02:38+00:00</name>
  </author>
  <author>
    <name>Matt Morehouse 2023-10-19 17:53:53+00:00</name>
  </author>
  <author>
    <name>Antoine Riard 2023-10-19 17:22:01+00:00</name>
  </author>
  <author>
    <name>Matt Morehouse 2023-10-19 16:23:13+00:00</name>
  </author>
  <author>
    <name>Bastien TEINTURIER 2023-10-19 08:12:08+00:00</name>
  </author>
  <author>
    <name>Antoine Riard 2023-10-18 02:57:34+00:00</name>
  </author>
  <author>
    <name>Matt Corallo 2023-10-18 00:17:44+00:00</name>
  </author>
  <author>
    <name>Antoine Riard 2023-10-17 18:47:59+00:00</name>
  </author>
  <author>
    <name>Antoine Riard 2023-10-17 18:34:52+00:00</name>
  </author>
  <author>
    <name>Antoine Riard 2023-10-17 17:47:14+00:00</name>
  </author>
  <author>
    <name>Olaoluwa Osuntokun 2023-10-16 22:51:19+00:00</name>
  </author>
  <author>
    <name>Antoine Riard 2023-10-16 16:57:36+00:00</name>
  </author>
  <link href="lightning-dev/Oct_2023/004175_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004172_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004171_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004157_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004169_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004168_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004167_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004166_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004165_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004164_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004162_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004161_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004156_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004155_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004154_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004153_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004152_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004151_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004150_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004148_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004147_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004135_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004134_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004132_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004131_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004130_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004123_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <link href="lightning-dev/Oct_2023/004122_Full-Disclosure-CVE-2023-40231-CVE-2023-40232-CVE-2023-40233-CVE-2023-40234-All-your-mempool-are-belong-to-us-.xml" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>2</id>
    <title>Combined summary - Full Disclosure: CVE-2023-40231 / CVE-2023-40232 / CVE-2023-40233 / CVE-2023-40234 "All your mempool are belong to us"</title>
    <updated>2023-10-24T15:05:33.877986+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-October/004175.html" rel="alternate"/>
    <summary>The email thread discusses a potential vulnerability in the Lightning Network known as a replacement cycling attack. The attack involves replacing transactions within the network to remove certain data. To address this issue, the suggestion is to use an opcode called OP_CSV_ALLINPUTS or OP_CSV_OTHERINPUTS to prevent unconfirmed outputs from being used in the attack. The security flaws discovered are not intentional backdoors, but rather known vulnerabilities that have been discussed among Bitcoin developers. The Lightning Network has implemented mitigations against simple and medium attacks, but more advanced attacks require extensive knowledge of the network. Journalists are advised to wait for expert reporters within the bitcoin community to provide qualified technical information before reporting on the situation.

Regarding the storage of ephemeral data in the Lightning Network, it is mentioned that not all lightning transactions need to be stored indefinitely. Lightning transactions can be invalidated using disclosed secrets, so there is no need to keep every signature for an extended period. Calculations and explanations are provided to show the savings in transaction size when combining multiple transactions.

The email also discusses the feasibility and implications of using multiple pre-signed transactions versus combining HTLC claims into one transaction. Concerns are raised about fee overhead and managing a large number of transaction variants. It is suggested that this issue should be addressed at the policy/Bitcoin Core layer rather than within the lightning world.

Clarification is provided about the attack scenario mentioned earlier. The attack can only be executed if the attacker is directly connected to the targeted peer via a direct channel. The success of the attack depends on precise transaction replacement across the mempool, making it difficult to execute perfectly for an extended period. Various security measures within the Lightning Network increase the difficulty of the attack.

The conversation also covers the concept of fee bumping and the usage of Replace By Fee (RBF) in pre-signed transactions. Strategies for fee bumping are proposed, including starting with smaller multipliers and gradually increasing them. The email suggests pre-signing multiple transactions with increasing fees to cover all reasonable needs for fee bumping. Concerns are raised about the potential storage and bandwidth costs associated with this approach.

The sender discusses their involvement in the development of the Lightning Network and expresses concerns about a new class of replacement cycling attacks. They suggest that a sustainable fix may be needed at the base-layer of bitcoin. The importance of transparency and community buy-in for any changes affecting the bitcoin ecosystem is emphasized.

A mitigation called defensive fee-rebroadcasting is mentioned, which addresses the issue of mempool backlog and its advantage for attackers. Further testing and tuning of fee calculations are deemed necessary.

Another email proposes a fee-bumping policy as a defense against lightning attacks. The strategy involves increasing the fee for each non-confirmation within a certain time frame. The email acknowledges Antoine's work on the issue and confirms the inclusion of mitigations in Eclair v0.9.0. However, further work may be needed at the bitcoin layer to strengthen L2 protocols.

Mitigations for lightning attacks are discussed, including bumping CLTV delta, transaction re-signing, and the deployment of stratum v2. The use of a replacement buffer or history of transactions at the mempool level is suggested as a possible mitigation. The email mentions individuals involved in the early design of lightning who might have additional ideas for mitigations.

The confusion surrounding the issue and proposed mitigations is addressed. Mempool scanning and transaction re-signing/re-broadcasting are discussed as two mitigations. The possibility of setting up a "black box" Lightning infrastructure on mainnet is mentioned, but experiments were not conducted due to limited resources. The email also discusses channel configurations and the impact of low feerates and CPFPs on commitment transactions.

The potential attack on Lightning Network channels is highlighted, and the implementation of local-mempool preimage monitoring is mentioned as a mitigation. Ongoing research and development are emphasized to mitigate risks associated with certain LN channel configurations.

The email concludes by expressing gratitude for addressing reported issues and mentioning the release of relevant mitigations in lnd v0.16.1-beta. Performance regressions related to mempool watching are acknowledged, and version 0.17.1 plans to reduce the load further. The importance of continuous research and development to address potential risks and disruptions caused by lightning attacks is emphasized.</summary>
    <published>2023-10-23T16:09:50+00:00</published>
  </entry>
</feed>
