<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>1</id>
  <title>Proposal: Bundled payments</title>
  <updated>2023-07-12T02:47:23.234233+00:00</updated>
  <author>
    <name>Olaoluwa Osuntokun 2023-06-14 02:56:54+00:00</name>
  </author>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>1</id>
    <title>Proposal: Bundled payments</title>
    <updated>2023-07-12T02:47:23.234261+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003978.html" rel="alternate"/>
    <summary>In a proposal to extend BOLT-11, Thomas Voegtlin suggests the inclusion of two bundled payments with distinct preimages and amounts in an invoice. This proposal addresses the need for services that require prepayment of mining fees for non-custodian exchanges such as submarine swaps and JIT channels. Currently, some service providers ask for prepayment, but this is not feasible for competitors who do not require a dedicated wallet. These competitors show an invoice to the user, whose wallet is agnostic about the swap, making it impractical to display two invoices simultaneously. This vulnerability to DoS attacks puts these competitors at a disadvantage, as they can be forced to pay on-chain fees.For JIT channels, providers who want to protect themselves against mining fee attacks must ask for the preimage of the main payment before opening the channel. However, this makes the service custodian, which has legal implications under European MICA regulation. Competitors who refuse to offer custodian services are excluded from this game. To address these challenges, Voegtlin proposes bundling the prepayment and main payment in the same BOLT-11 invoice. The semantics of bundled payments involve waiting for all HTLCs of both payments to arrive before fulfilling the HTLCs of the prepayment. If the main payment does not arrive, the prepayment is failed with a MPP timeout. Once the HTLCs of both payments have arrived, the receiver fulfills the HTLCs of the prepayment and broadcasts their on-chain transaction. It is important to note that the main payment can still fail if the sender never reveals the preimage of the main payment.Voegtlin believes that this proposal would level the playing field in terms of competition between lightning service providers. Currently, using a dedicated client is necessary to use Loop, leaving competitors without an established user base running a dedicated client vulnerable to mining fee attacks. ACINQ would also benefit from this proposal, as it would allow their pay-to-open service to be fully non-custodian. The current form of the 'pay-to-open' service used by Phoenix falls under the scope of the European MICA regulation, which is a serious issue.Voegtlin suggests implementing this change in BOLT-11 rather than using BOLT-12 or onion messages. This proposal does not require the exchange of new messages and can be done in a non-interactive way.</summary>
    <published>2023-06-14T02:56:54+00:00</published>
  </entry>
</feed>
