<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>1</id>
  <title>Liquidity griefing for 0-conf dual-funded txs</title>
  <updated>2023-07-05T02:47:47.627876+00:00</updated>
  <author>
    <name>Bastien TEINTURIER 2023-06-07 09:46:36+00:00</name>
  </author>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>1</id>
    <title>Liquidity griefing for 0-conf dual-funded txs</title>
    <updated>2023-07-05T02:47:47.627907+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003975.html" rel="alternate"/>
    <summary>In a discussion between Bastien and Antoine, they acknowledged that the usual mempool pinning issues still apply regardless of whether 0-conf (zero-confirmation) is used or not. They agreed that these issues need to be solved at some point. For a mid-term solution, Bastien suggested using v3 transactions for channel funding and splicing. However, he noted that this would make them identifiable on-chain unless everyone eventually moves to v3 transactions for everything. In the longer term, both agreed that an anti-DoS (Denial of Service) token will need to be exchanged to prevent this class of issue. However, designing and analyzing such a solution is not easy. Antoine pointed out that it can still be valuable to disable inbound payments or require a longer `cltv_expiry_delta` (the time delay before a transaction can be spent) in case of mempool fee spikes delaying the confirmation of 0-conf transactions. Regarding liquidity griefing in dual-funding or splicing, Antoine highlighted the lack of signature release for a shared input by the counterparty as a vector of griefing. He mentioned that the transaction can be pinned in the mempool in a sneaky way, potentially through abuse of replacement rules. This malicious pinning can be advantageous to the counterparty, as they can batch their pinning against unrelated dual-funding instances. Other vectors of pinnings that can be played out in the dual-funding flow were also suggested. As a solution to prevent liquidity griefing related to mempool vectors, Antoine proposed enforcing that any contributed outputs must be encumbered by a 1 CSV (CheckSequenceVerify) locktime, unless it's a 2-of-2 funding. However, he noted that this mitigation may be limited because the initial commitment transaction must have anchor outputs on each side for each party to recover its contributed UTXOs in any case. Regarding the use of 0-conf, Bastien mentioned that it can still be valuable to disable inbound payments or require a longer `cltv_expiry_delta` in case of mempool fee spikes delaying the confirmation of 0-conf transactions. He also acknowledged that liquidity griefing provoked by a lack of signature release or mempool funny games will always be there, even with package relay/nVersion deployment. As a long-term solution, Bastien suggested reusing solutions worked out to mitigate channel jamming, as the abstract problem is the same â€“ locking up scarce resources without paying fees. He mentioned the Staking Credentials framework as a possible solution for dual-funding market-makers beyond routing hops. In this framework, the dual-funding initiator would pay a fee scale based on the amount of UTXOs contributed and worst-case liquidity griefing scenarios. A privacy-preserving credential could be introduced to preserve anonymity. In the original post, Bastien discussed the challenges created by the introduction of dual-funded transactions in Lightning Network and how to protect against liquidity griefing attacks from malicious peers. The post also mentioned the issues with using 0-conf and the need to isolate utxos used for 0-conf from those used for non 0-conf to avoid accidental double-spending. Bastien proposed a "soft lock" solution for selecting utxos and discussed Eclair's current approach to opportunistic 0-conf. The post concluded by inviting ideas on improving the situation and offering protections against liquidity griefing for nodes offering 0-conf services.</summary>
    <published>2023-06-07T09:46:36+00:00</published>
  </entry>
</feed>
