<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>1</id>
  <title>Proposal: Bundled payments</title>
  <updated>2023-06-27T04:08:56.166660+00:00</updated>
  <author>
    <name>Thomas Voegtlin 2023-06-14 08:09:45+00:00</name>
  </author>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>1</id>
    <title>Proposal: Bundled payments</title>
    <updated>2023-06-27T04:08:56.166686+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003979.html" rel="alternate"/>
    <summary>In a proposal to BOLT-11, Thomas Voegtlin has suggested an extension that would allow invoices to contain two bundled payments with distinct preimages and amounts. The use case for this is in services that require the prepayment of a mining fee in order for a non-custodian exchange to take place, such as submarine swaps or JIT channels. Currently, service providers are vulnerable to DoS attacks where the attacker forces them to pay on-chain fees because their website shows an invoice to the user whose wallet is agnostic about the swap. By bundling the prepayment and the main payment in the same BOLT-11 invoice, the service provider can protect themselves against this attack. The proposal would level the field in terms of competition between lightning service providers, and competitors who do not have an established user base running a dedicated client are exposed to the mining fee attack. Additionally, ACINQ would benefit from this as it would make it possible for them to make their pay-to-open service fully non-custodian. In its current form, the 'pay-to-open' service used by Phoenix will fall into the scope of the European MICA regulation, which they should consider as a serious issue. A submarine swap client needs to be able to unilaterally sweep or timeout an on chain HTLC and also validate all the swap parameters in order to be properly non-custodial. Boltz is currently working to add submarine swaps to the ongoing standardization effort for LSP protocols. Their website serves javascript that does the proper checks and sweep of funds, and they are distributing a Progressive Web App. However, there is no guarantee that the client will actually claim the payment, so the service providers need to ask prepayment of mining fees. The only ingredient missing for Lightning Loop to benefit from the separation between wallet and submarine swap providers is the bundling of fee prepayment and main payment in the same invoice.</summary>
    <published>2023-06-14T08:09:45+00:00</published>
  </entry>
</feed>
