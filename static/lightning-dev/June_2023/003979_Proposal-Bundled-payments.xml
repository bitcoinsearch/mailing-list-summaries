<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>1</id>
  <title>Proposal: Bundled payments</title>
  <updated>2023-07-06T02:59:55.059170+00:00</updated>
  <author>
    <name>Thomas Voegtlin 2023-06-14 08:09:45+00:00</name>
  </author>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>1</id>
    <title>Proposal: Bundled payments</title>
    <updated>2023-07-06T02:59:55.059212+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003979.html" rel="alternate"/>
    <summary>The context discusses the possibility of distributing a separate submarine swap client that is independent of the lightning wallet used by the user. This separation between wallet and submarine swap providers could enable competition and expand the potential user base. Boltz, for example, distributes a Progressive Web App for submarine swaps and performs the necessary checks and sweeps of funds through their website. It is noted that while Boltz's approach allows for this separation, it is unclear if their app is functioning correctly.The proposal put forward by Thomas Voegtlin suggests an extension to BOLT-11, where an invoice can contain two bundled payments with distinct preimages and amounts. This extension is aimed at services, such as submarine swaps and JIT channels, that require prepayment of mining fees before a non-custodian exchange can take place. Currently, services like Loop by Lightning Labs can ask for prepayment because their software can handle it. However, competitors like Boltz, which do not require a dedicated wallet, face challenges in requesting prepayment due to the limitations of showing two invoices simultaneously.To address this issue, Voegtlin proposes bundling the prepayment and main payment in the same BOLT-11 invoice. The semantics of bundled payments would involve waiting for all HTLCs of both payments to arrive before fulfilling the pre-payment HTLCs. If the main payment does not arrive, the pre-payment would fail with a MPP timeout. Once both payments' HTLCs have arrived, the receiver would fulfill the prepayment HTLCs and broadcast their on-chain transaction. It is important to note that while this proposal does not prevent service providers from stealing the prepayment, it aims to level the playing field in terms of competition among lightning service providers.Voegtlin believes that implementing this change in BOLT-11, rather than using BOLT-12 or onion messages, would be more straightforward and non-interactive. He also mentions that ACINQ could benefit from this proposal by making their pay-to-open service fully non-custodian, as the current version may fall under the European MICA regulation. The email concludes with a suggestion to implement the proposed change in BOLT-11 to enhance competition and address the mining fee attack vulnerability faced by some lightning service providers.</summary>
    <published>2023-06-14T08:09:45+00:00</published>
  </entry>
</feed>
