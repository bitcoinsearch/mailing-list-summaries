<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>1</id>
  <title>Proposal: Bundled payments</title>
  <updated>2023-06-30T02:55:48.620641+00:00</updated>
  <author>
    <name>Thomas Voegtlin 2023-06-14 08:09:45+00:00</name>
  </author>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>1</id>
    <title>Proposal: Bundled payments</title>
    <updated>2023-06-30T02:55:48.620664+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003979.html" rel="alternate"/>
    <summary>Boltz, a submarine swap client, is distributing a Progressive Web App on their website that allows users to perform proper checks and sweep funds. This separation between the lightning wallet of the user and the submarine swap provider enables competition in the market. Lightning Loop could benefit from this by distributing an app that does not require a local LND instance, thereby increasing their potential user base. However, the bundling of fee prepayment and main payment in the same invoice is currently missing.There is an ongoing standardization effort for LSP (Lightning Service Provider) protocols, and Boltz is working to add submarine swaps to it. A submarine swap client needs dedicated logic to unilaterally sweep or timeout an on-chain HTLC (Hash Time-Locked Contract) and validate all the swap parameters. Although Boltz shows an invoice to the user, it would be impractical for them to show two invoices to be paid simultaneously. Therefore, they would need to manually visit the website to obtain a signed sweep transaction. It is essential to have dedicated logic to fully verify the swap parameters and perform an on-chain sweep/timeout for a trust-minimized swap.Thomas Voegtlin proposes an extension to BOLT-11, where an invoice can contain two bundled payments with distinct preimages and amounts. This proposal addresses the use case of services like submarine swaps and JIT (Just-In-Time) channels that require prepayment of mining fees. By bundling the prepayment and main payment in the same BOLT-11 invoice, service providers can protect themselves against mining fee attacks. This proposal aims to level the field in terms of competition between lightning service providers and make pay-to-open services fully non-custodial.Voegtlin suggests implementing this change in BOLT-11 instead of using BOLT-12 or onion messages, as it does not require the exchange of new messages and can be done in a non-interactive way. This proposal would benefit Boltz, Lightning Loop, and ACINQ, as well as enhance competition in the lightning network market.Overall, the separation between wallet and submarine swap providers enables competition, and the bundling of prepayment and main payment in the same invoice would address vulnerabilities and improve the trust-minimized nature of swaps. The ongoing standardization effort for LSP protocols is expected to include submarine swaps, and implementing the proposed change in BOLT-11 would simplify the process without the need for new messages or interaction.</summary>
    <published>2023-06-14T08:09:45+00:00</published>
  </entry>
</feed>
