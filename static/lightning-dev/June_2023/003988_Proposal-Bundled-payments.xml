<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>1</id>
  <title>Proposal: Bundled payments</title>
  <updated>2023-07-01T03:15:44.334085+00:00</updated>
  <author>
    <name>Thomas Voegtlin 2023-06-20 08:45:34+00:00</name>
  </author>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>1</id>
    <title>Proposal: Bundled payments</title>
    <updated>2023-07-01T03:15:44.334114+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003988.html" rel="alternate"/>
    <summary>Thomas Voegtlin, the managing director of Electrum Technologies GmbH, has proposed an extension to BOLT-11, the Lightning Network protocol. The proposal aims to address issues related to prepayment of mining fees in non-custodian exchanges. Currently, services like Loop by Lightning Labs can ask for a prepayment because their software supports it. However, competitors like the Boltz exchange, which do not require a dedicated wallet, cannot do the same. This puts them at risk of denial-of-service attacks where attackers force them to pay on-chain fees. Additionally, providers of JIT channels need to ask for the preimage of the main payment before opening the channel to protect against mining fee attacks. However, this makes them custodians and subject to regulations. To solve these issues, Thomas proposes adding a new feature to BOLT-11 invoices that allows for two bundled payments with distinct preimages and amounts. This would enable the bundling of the prepayment and main payment in the same invoice. The proposal includes defining two extra fields: prepayment_amount and prepayment_hash. The recipient would wait for both the prepayment and main payment HTLCs (Hashed Time-Locked Contracts) to arrive before fulfilling the prepayment HTLCs. If the main payment does not arrive, the prepayment HTLCs would be failed with a MPP (Multi-Path Payments) timeout. Once both payments are received, the receiver would fulfill the prepayment HTLCs and broadcast the on-chain transaction.Thomas believes that implementing this change in BOLT-11, rather than using BOLT-12 or onion messages, is more straightforward as it does not require the exchange of new messages. He argues that this proposal would level the playing field for competition between Lightning service providers and benefit Electrum Technologies GmbH by making their pay-to-open service fully non-custodian, potentially avoiding regulatory challenges.In conclusion, Thomas Voegtlin proposes extending BOLT-11 to allow for bundled payments in invoices, addressing issues related to prepayment of mining fees in non-custodian exchanges. He believes this change should be implemented in BOLT-11 and not using BOLT-12 or onion messages.In addition to the proposal, the provided context also includes information about Electrum Technologies GmbH. It is a company based in Berlin, Germany, and Thomas Voegtlin is the managing director. The email signature includes the company's address and registration details. Furthermore, the context mentions the Lightning-dev mailing list hosted by the Linux Foundation. This mailing list serves as a platform for developers interested in the Lightning Network to discuss and collaborate on their projects. The email signature provides a link to the mailing list website, where users can find information about subscribing to the list and accessing the archived discussions.</summary>
    <published>2023-06-20T08:45:34+00:00</published>
  </entry>
</feed>
