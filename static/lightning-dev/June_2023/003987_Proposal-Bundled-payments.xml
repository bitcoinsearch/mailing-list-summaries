<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>1</id>
  <title>Proposal: Bundled payments</title>
  <updated>2023-07-10T02:56:14.663869+00:00</updated>
  <author>
    <name>Thomas Voegtlin 2023-06-20 07:32:15+00:00</name>
  </author>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>1</id>
    <title>Proposal: Bundled payments</title>
    <updated>2023-07-10T02:56:14.663902+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003987.html" rel="alternate"/>
    <summary>Hello Dave,Thank you for your interesting idea about saving space for the prepayment hash. However, in order to make the feature optional, we would need to subtract the prepayment amount from the main payment amount. For example, if Alice expects to receive 1 BTC, she would either receive (1 BTC, invoice payment_hash) or (1 BTC - minus 10k sats, invoice payment_hash) + (10k sats, prepayment_hash via keysend). This way, the receiver can decide whether prepayment is optional or required.Regarding your question, it would be acceptable for the prepayment to use a keysend payment with the onion message payload indicating what payment hash to associate with the prepayment. For example, Alice wants to receive 1 BTC to hash 0123...cdef with a prepayment of 10k sats, so the 10k sats is sent via keysend with metadata indicating that the receiver shouldn't claim it until they receive the 1 BTC HTLC to 0123...cdef.If this approach is implemented, we would only need to extend BOLT11 invoices with an extra_fee_via_keysend field. This would significantly reduce the size and allow encoding the extra_fee_via_keysend field in an existing BOLT11 field like (d) description or the relatively new (m) metadata field. This would enable immediate implementation until an updated version of BOLT11 or an alternative using offers becomes widely deployed.Thank you,Thomas-- Electrum Technologies GmbH / Paul-Lincke-Ufer 8d / 10999 Berlin / GermanySitz, Registergericht: Berlin, Amtsgericht Charlottenburg, HRB 164636Geschäftsführer: Thomas Voegtlin</summary>
    <published>2023-06-20T07:32:15+00:00</published>
  </entry>
</feed>
