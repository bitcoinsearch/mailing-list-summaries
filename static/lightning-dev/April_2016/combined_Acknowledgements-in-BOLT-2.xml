<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - Acknowledgements in BOLT #2</title>
  <updated>2023-06-02T00:31:00.202798+00:00</updated>
  <author>
    <name>Joseph Poon 2016-04-01 19:38:50</name>
  </author>
  <author>
    <name>Rusty Russell 2016-03-31 23:49:26</name>
  </author>
  <author>
    <name>Fabrice Drouin 2016-04-01 14:57:37</name>
  </author>
  <author>
    <name>Pierre 2016-04-01 13:32:15</name>
  </author>
  <author>
    <name>Rusty Russell 2016-04-04 02:04:34</name>
  </author>
  <link href="lightning-dev/April_2016/000510_Acknowledgements-in-BOLT-2.xml" rel="alternate"/>
  <link href="lightning-dev/March_2016/000506_Acknowledgements-in-BOLT-2.xml" rel="alternate"/>
  <link href="lightning-dev/April_2016/000508_Acknowledgements-in-BOLT-2.xml" rel="alternate"/>
  <link href="lightning-dev/April_2016/000507_Acknowledgements-in-BOLT-2.xml" rel="alternate"/>
  <link href="lightning-dev/April_2016/000512_Acknowledgements-in-BOLT-2.xml" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>2</id>
    <title>Combined summary - Acknowledgements in BOLT #2</title>
    <updated>2023-06-02T00:31:00.202798+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2016-April/000510.html" rel="alternate"/>
    <summary>In an email conversation between Pierre and the Lightning Network developers in April 2016, Joseph Poon explained that odd/even HTLC IDs were originally intended for debugging purposes, but he had been working on a cleaner solution. Rusty agreed with Pierre's concerns about the placement of acknowledgements in BOLT #2 and suggested moving the "ack" back into the update_commit/authenticate messages to avoid needing to write persistently to disk before every new packet sent.In a recent discussion, it was realized that HTLC IDs are not always sufficient, and the acknowledge field needs to be taken into account in some cases. This is because in certain scenarios, checking the 'acknowledge' field becomes necessary to prevent mismatches in expected signatures. The new absolute "lnd-like 64 bits unique id" introduced in Rusty is preferred over the previous relative "order-I-added-them-in" id to keep track of messages received and restart conversations after a reconnect.At the protocol level, only the HTLC id should be used instead of relying on the acknowledge field. However, at the transport level, the acknowledge field should still be relied upon to know which messages should be replayed. Although seemingly redundant, this approach separates the transport from the protocol, making testing easier. Additionally, the even/odd differentiation of HTLC ids is used to quickly determine the direction of a given HTLC and catch bugs. The latest spec leaves this open, but the current implementation uses a different number from other nodes, making it easier to eyeball.</summary>
    <published>2016-04-01T19:38:50+00:00</published>
  </entry>
</feed>
