<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - Liquidity Ads and griefing subtleties</title>
  <updated>2023-12-05T02:04:15.584688+00:00</updated>
  <author>
    <name>Bastien TEINTURIER 2023-12-04 09:48:10+00:00</name>
  </author>
  <author>
    <name>ZmnSCPxj 2023-12-02 02:22:54+00:00</name>
  </author>
  <author>
    <name>Matt Morehouse 2023-12-01 22:42:34+00:00</name>
  </author>
  <author>
    <name>Bastien TEINTURIER 2023-12-01 17:45:18+00:00</name>
  </author>
  <link href="lightning-dev/Dec_2023/004230_Liquidity-Ads-and-griefing-subtleties.xml" rel="alternate"/>
  <link href="lightning-dev/Dec_2023/004229_Liquidity-Ads-and-griefing-subtleties.xml" rel="alternate"/>
  <link href="lightning-dev/Dec_2023/004228_Liquidity-Ads-and-griefing-subtleties.xml" rel="alternate"/>
  <link href="lightning-dev/Dec_2023/004227_Liquidity-Ads-and-griefing-subtleties.xml" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>2</id>
    <title>Combined summary - Liquidity Ads and griefing subtleties</title>
    <updated>2023-12-05T02:04:15.584739+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-December/004230.html" rel="alternate"/>
    <summary>The correspondence delves into a sophisticated mechanism designed to manage the seller’s funds within a transactional channel, particularly focusing on the use of CheckLockTimeVerify (CLTV) leases. The proposed system involves three distinct counters for the seller's funds: `to_local` for non-leased funds, `to_local_leased` for leased funds, and `to_local_leased_owed`, which mirrors `to_local_leased` but excludes pending HTLCs sent by the seller. The strategy dictates the order in which these funds are affected by outgoing and incoming HTLCs, ensuring that leased funds are prioritized for deduction when HTLCs are sent, and that they are replenished first in the event of failed HTLCs. This precise ordering is critical, especially when dealing with commitment transactions where the evaluation must begin with `update_fulfill_htlc` updates.

The intricacies of managing multiple concurrent leases are also considered. For instance, if a buyer like Alice engages in several lease purchases from a seller such as Bob over different periods, the channel initiator may face higher costs due to the necessity of creating multiple outputs in the commitment transactions. A suggestion is made to maintain separate `to_local_leased_owed` buckets for each lease and to sequence them based on their expiry dates. This method aims to prevent scenarios that could allow either party to cheat while also questioning the potential issues related to channel reserves due to increased transaction weights.

Additionally, the email addresses the challenges posed by liquidity ads, which play a pivotal role in protocol design. The discussion includes the risks for sellers when buyers purchase inbound liquidity and subsequently transfer funds out, leaving the seller with an undesired lock on a larger sum than intended. The specification suggests implementing CLTV to protect buyers from premature channel closures by sellers, but this measure can be disadvantageous for the seller as well. The conversation considers the reputability of sellers versus buyers, suggesting that in some cases, it might be beneficial for sellers not to enforce CLTV, allowing buyers to assume the risk instead. The complexity further escalates with the introduction of channel splicing, which complicates the preservation of lease terms and highlights the intricate balance between security and fairness in liquidity ads.

In summary, the email examines various technical strategies and considerations for improving transaction output management, specifically through the implementation of CLTV leases. It navigates through the complexities of handling leased funds, concurrent leases, and liquidity ads, with attention to the implications for both buyers and sellers in the context of the lightning network. The community’s ongoing efforts to integrate liquidity marketplaces into popular implementations underscore the significance of these discussions for the network’s advancement.</summary>
    <published>2023-12-04T09:48:10+00:00</published>
  </entry>
</feed>
