{
    "id": "bitcointranscripts+bitcoin-design+learning-bitcoin-and-design+covenants",
    "title": "Covenants",
    "body_formatted": "{\"type\":\"heading\",\"text\":\"Introductions\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:00:01\"}, {\"type\":\"paragraph\",\"text\":\"Welcome to our first Learning Bitcoin and Design call of 2024.\\nWe haven't had one of these in a while, but we're picking them back up again.\\nThe first topic is a really tough one, I think at least, it's covenants.\\nThe reason, one of the reasons why this came up is because on Bitcoin Design, we have this new design challenge.\\nWe have a page with design challenges that are meant to be kind of take home challenges.\\nIf you want to challenge yourself to assign something, there's something you can do, and Dan added covenants, for scale, because someone tweeted about it - someone called Leishman, who is CEO of some Bitcoin company that I just forgot.\"}, {\"type\":\"paragraph\",\"text\":\"Yashraj: 00:01:00\"}, {\"type\":\"paragraph\",\"text\":\"River, I think River.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:01:01\"}, {\"type\":\"paragraph\",\"text\":\"River?\\nOkay, cool.\\nAnd that post said, hey, we really need people to dig into this covenant stuff from a design perspective.\\nSo that kind of kicked that off a little bit, and then we decided to create this learning call.\"}, {\"type\":\"paragraph\",\"text\":\"I don't know how about how everyone else is on this topic.\\nUntil a month ago or so, I basically heard about that it exists, and that there were a bunch of technical proposals called CTV, that basically make no sense if you hear them and you're not familiar with anything.\\nThe term \\\"covenant\\\" didn't really tell us anything.\\nI put Alien Covenant in the background because literally that's the only time in my life that I've ever heard the term covenant.\\nCouldn't even figure out what that's supposed to do.\\nI did listen to some podcasts recently, by Stephan Livera, that were extremely helpful and have this great overview, and I don't think it's actually that difficult after listening to those podcasts.\\nWe're here on this call now that we can kind of shed some light on this stuff, and then hopefully we can work towards some of these design explorations and figure out how this technical mumbo jumbo can actually make Bitcoin more useful, for more people.\\nAnd maybe address scaling.\\nI don't know, what is everyone else bringing into this conversation here?\"}, {\"type\":\"paragraph\",\"text\":\"Michael Hasse: 00:02:30\"}, {\"type\":\"paragraph\",\"text\":\"I came across covenants relatively early, during or after my grant started.\\nIt can help to improve the programmability of Bitcoin, of wallets, of transactions.\\nIn terms of, let's say, automated inheritance or vaulting features that might be helpful.\\nI focus more on Miniscript, which is something that exists today and can do something limited, something similar.\\nCovenants are like that on steroids, so you can do much more advanced stuff with it.\\nBut I didn't know about the scaling Enigma thing at the time.\\nJust read that this week.\"}, {\"type\":\"paragraph\",\"text\":\"Yashraj: 00:03:42\"}, {\"type\":\"paragraph\",\"text\":\"Yeah.\\nHey everyone.\\nNice to see you guys.\\nMy journey on this one has been pretty similar to Christoph's. There are so many abbreviations, so much arcane stuff, it seems so difficult to understand, APO, CTV, CSFS.\\nThe abbreviations go longer and longer - \\\"What's happening?\\\"\\nI think it's all very technical, it looks there is a class of people, mostly devs, who are interested in the digital money programmability side of Bitcoin.\\nThey want to make it more technically useful, and you should be able to do different things, and all of that.\\nAs Michael was saying about it, spending it in different ways and things like that.\\nA lot of the motivation of covenants, so I think the original use case was vaults so being able to specify different types of conditions that UTXOs can be spent, and all of that stuff.\\nThis thing was pretty old.\\nThis is from three, four years back, but in the last few months, it has picked up steam again with so many devs coming in.\\nMy perspective on this is this is too technical and I love understanding all this stuff, but as a designer, I'm trying to think what are the use cases, what are the features that will help people.\\nNot thinking from the programmability point of view, but scaling and privacy and those things, I think that is something that we require nowadays, in 2023, 2024, and I'm excited to see how it can help.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:06:04\"}, {\"type\":\"paragraph\",\"text\":\"I think it would be helpful if we take a step all the way back, because like you said, there's this programmability stuff and the dev conversations.\\nThese all seem to be pretty much already sold in, they're not even talking about what this thing is for, they're just talking about how it can work.\\nI'm really glad Owen is here and also raising his hand, because I think just earlier I came across his two threads here, which I think you posted on GitHub or somewhere.\\nThose are really good explanations of what this stuff actually does.\\nSo you just raised your hand, Owen, go ahead.\"}, {\"type\":\"heading\",\"text\":\"Covenants overview\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:06:43\"}, {\"type\":\"paragraph\",\"text\":\"Hi, I was asked to join this call.\\nI haven't joined a Bitcoin design call before, but it's good to get involved.\\nAs you can see with those threads ([1](https://x.com/OwenKemeys/status/1741575353716326835), [2](https://x.com/OwenKemeys/status/1744181234417140076)), I put a lot of thought recently into trying to visualize how this stuff works, because it's very difficult for people to wrap their heads around how these functions work and what you can go on to do with them.\\nIt's not actually that alien or strange, it's just different to how we do things today.\\nI started off with CTV because it's the most simple and sort of easy to rationalize about how it works and what you can do with it.\\nOther forms of covenant are more flexible versions of that, that I think might be wise to put to one side for the purposes of designing stuff, for now.\"}, {\"type\":\"paragraph\",\"text\":\"The way you can think of CTV is it's quite similar to PSBT, to having a pre-signed transaction where I could technically pay you by signing a transaction to spend my coins to your address and then just giving it to you, rather than broadcasting it to the blockchain.\\nHowever, you still have to trust that I'm not going to spend those coins differently first before you get it, so you can't consider that PSBT a payment, right?\\nBecause I could spend them any other way before you broadcast it and they're not your coins anymore.\\nSo today we're using only the chain itself to log ownership changes, and what covenants allow us to do are ownership changes off-chain, as long as you can plan them in advance.\\nThere's a couple of use cases in those threads I gave, if you haven't read them already, I highly recommend starting there.\"}, {\"type\":\"paragraph\",\"text\":\"In the second thread, I got onto the actual use cases, and the more I've looked at this stuff, the more I've realized there's kind of two basic principles that covenants are useful for here, you end up with these kind of meta primitives.\\nTechnically speaking, it's what I said a minute ago about having a pre-signed transaction that I can't spend differently, so you can consider yourself paid as soon as you have it.\\nThe use cases tend to be vault type structures, which are kind of using the chain to trigger a time lock, because in Bitcoin's technical design at the moment, we don't have ways where a key expires in a multi-sig or something.\\nYou can only make it more easy to spend, you can't make it less easy to spend.\\nSo vault type structures allow you to trigger the start of the time lock, which is very useful.\\nThen the other one, which is where everyone's brain starts to melt, are tree type structures, which you could think of as aggregating lots of transactions together, or like a zip file of lots of transactions that only represent on-chain as one.\\nIt is difficult to think about this stuff, but these are the areas, particularly the tree stuff - that's where we can start doing scaling.\\nThat's what I think Alex was asking people to start thinking about the UX for, because it's just very different to how we do Bitcoin today.\\nBut I don't think it's impossible.\\nI started to think about this stuff before I even got invited to this meeting, and I have some ideas already, but I haven't had a chance to start working on them yet.\\nMaybe I'll stop talking for a minute and let someone else speak.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:09:54\"}, {\"type\":\"paragraph\",\"text\":\"Awesome, thanks.\"}, {\"type\":\"paragraph\",\"text\":\"Yashraj: 00:09:57\"}, {\"type\":\"paragraph\",\"text\":\"Sorry Christoph, I just wanted to say thanks to Owen for joining in.\\nThose two Twitter threads are super duper useful.\\nI am happy that I've gone through at least the first one a couple of times and I'm still not completely there.\\nI think I have to read it again and try to do more research, but it was super, super, duper useful, man.\\nThanks for joining.\\nI mean, I love that.\\nThanks.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:10:25\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, no problem, and it felt like an area I could add some value to the conversation, because I recognized there was a lot of technical people that got how it worked, and a lot of normal people like us who just can't understand how this stuff is useful at all yet.\\nI spent the last six months or so, just gradually learning and learning about use cases and things, so I could start visualizing how you can actually use this and explain it to people or we're never going to get anywhere with it.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:10:50\"}, {\"type\":\"paragraph\",\"text\":\"In the Bitcoin Design guide, we have a whole section called \\\"how it works\\\", and it's very similar to what you put together there.\\nIt's private key management, like here's a whole thing about how multi-key systems work.\\nSome of them have illustrations similar to yours, others don't.\\nHere's one about custom spending conditions with recovery paths, but it's the same idea what you did, just take these kind of complex things and translate them in our case for designers within the idea that they can take that and build products on top of them.\\nSo maybe we could turn this into a \\\"how it works\\\" page too.\\nTwitter threads kind of get forgotten at some point, if you'd be open to that.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:11:40\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, sure.\\nTake whatever you think is useful from it.\\nI'm happy to comment if you want as well.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:11:47\"}, {\"type\":\"paragraph\",\"text\":\"Awesome.\\nI wanted to take one step further back.\\nAs I said earlier, I didn't figure out what the word covenant means, but it's basically a promise to engage in some type of activity.\\nI found that helpful in the Stephan Livera podcast, with Brandon Black I think, where they said in Bitcoin every coin has a restriction on how it can be spent.\\nBut right now, it's basically you need to have the private key, right?\\nThere's one rule how you can spend it.\\nIt's the private key.\\nIf you have that, you can spend it, right?\\nThat's the default that everyone knows.\\nThe second one that Michael has been looking into a lot is the time locks.\\nYou can spend it after a certain amount of time if you have a key.\\nIn covenants, the idea there is to just really open that door much, much further, that you can have all kinds of complex predefined rules about how this can be spent by multiple people with different scenarios.\\nI found that a pretty good starting point.\\nThen the other thing I learned that was interesting is that CTV and all of these abbreviations and all this stuff, they're all trying to do the same thing technically.\\nThey take different approaches that end up with some that are a little bit more complex, some a little bit easier, some of them have a little bit more flexibility, others are a little bit more rigid, but they're all kind of trying to do the same thing.\\nThen as you dig through those, you probably end up with different use cases.\\nOne thing I found interesting, too, because the more complex proposals, they enable more, but they are more risky in terms of things that can go wrong, unforeseen circumstances and all of that.\\nSo there seems to be more a tendency to get the simpler ones enabled.\\nSo there were some takeaways that I found interesting that I wanted to add as well.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:13:53\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I think that's a fair characterization and the simplicity - this is why I started with CTV because it's the easiest to think about, and it's the most tightly constrained, but it still unlocks a huge possibility space of interesting things we can do.\\nI use the word constructs because just a CTV by itself isn't that interesting, but the stuff it allows you to do is more.\\nThen a lot of the developers I speak to are thinking, okay, we'll start with this, we can build a ton of useful stuff already, and then as we learn more familiarity with how to use these covenant type structures and so on, we can start to realize where we need a little bit more power and a little bit more flexibility and maybe add those in later on with another fork down the road.\\nBut lots of people are very wary about opening Pandora's box and doing something really complicated on day one.\\nI mean, none of this stuff is going to break Bitcoin, but some of the stuff is just too complex to rationalize about what its limitations are, whereas CTV is quite tightly scoped and also very well studied.\\nIt's been around many years now at this point.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:14:56\"}, {\"type\":\"paragraph\",\"text\":\"So a question there around the two use cases that you found.\\nSo the multi-sig vault, I find that pretty easy and that seems like it's a user-facing thing.\\nYou can just say, these coins here, they can be spent, but there is a delay, before they can be spent.\\nSo if someone else tries to spend them, then they either can't do it or they have to wait, so I'm going to notice it.\\nI'm going to get them into safety because everyone else has to wait.\\nThat's kind of user facing use case that is easy to understand.\\nThen the scaling thing, that almost seems like it's something that users might never even see that could potentially be happening behind the scenes, right?\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:15:42\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, so this is where it starts to get complicated.\\nAnd I think it might be useful to think of it from the two different directions.\\nOn the one hand, users might build these trees themselves.\\nThat's if you've got a number of payments you want to make to several different people for different reasons, but maybe not all of them right now, but you know I'm gonna pay rent next month and the month after and the month after.\\nSo maybe next time I get my salary arrive, I could construct a tree myself, and that turns into just a regular receive address that I could give to the payroll company.\\nThey pay to that address, and I know I've got my rent payments for the next six months kind of locked into the chain ready to go.\\nI don't need to make another on-chain transaction just by giving them that one address.\\nSo that's an example of a user wanting to construct a tree, and I can kind of picture in my head what a UX for that might roughly look like.\\nI don't think it's that difficult, that's somewhat interesting.\\nBut the interesting ones are where the tree structure is built by someone else, and it allows you to be paid inside that tree.\\nThat's the really tricky one and that's where work needs to be applied.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:16:50\"}, {\"type\":\"paragraph\",\"text\":\"Gotcha.\\nRight now, if I want to do six months of rent payments, I can make six different transactions and batch them.\\nWith this CTV, then I could basically bundle them all, compress them into like a single address or so, and then they would automatically be executed as time goes by.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:17:13\"}, {\"type\":\"paragraph\",\"text\":\"That's one way of doing it.\\nIt's more... you see this stuff is difficult to explain, even having written the thread about it.\\nYeah, you can think of it as a compression thing.\\nThat address will contain, if you've built it this way, will contain rules like - I can only spend this many coins once per month - or something like that.\\nSo I can make my rent payments by giving the pre-signed transaction to my landlord, rather than having to actually send on-chain, I can just give him this transaction and that is enough information for me to look at my address I created and see that he now has all the information necessary to spend that one month's rent worth of coins from it, and I can't spend them anywhere else.\\nSo what I'm doing is I'm just revealing some information to him and then he's able to claim them whenever he wants, and he knows that I can't spend them any other way either.\\nThat's how it's useful for scaling because you're moving the ownership changes off-chain, you're changing it from needing to stamp a transaction onto the blockchain to needing to just reveal some information to the counterparty that they didn't know before.\\nOnce they receive that information, they know that they have all the information necessary to claim it and that I can't spend them in a different way.\"}, {\"type\":\"paragraph\",\"text\":\"Mogashni: 00:18:32\"}, {\"type\":\"paragraph\",\"text\":\"I have a question.\\nSo, sorry, my name is Mo from the Bitcoin design community.\\nI'm the UX researcher here, very random jumping into the question.\\nI was just thinking for a very long time trying to piece everything together.\\nYou said, so this code that they share allows the transaction to happen completely off-chain.\\nSo let's say I'm the owner of the code, and then I hand that code over to you, and then we enter into an agreement for X amount of Bitcoin.\\nWhat is preventing you from actually spending, you gave that to me, but how do I know that that amount of Bitcoin actually exists and that you don't just go spend it?\"}, {\"type\":\"heading\",\"text\":\"Cold Channels\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:19:18\"}, {\"type\":\"paragraph\",\"text\":\"The addresses encode the spending conditions for coins that end up there.\\nSo at the moment, all the addresses you generate with your regular today's wallet will say, you're not allowed to spend these coins unless you present a signature from this private key, right?\\nThat's what we're all used to.\\nIn a world where we're using CTV, the address that you generate will say - you're not allowed to spend these coins unless the spending transaction looks exactly like this, that I've predefined.\\nSo to the rest of the world, on-chain it just looks like some coins going to some address, but as soon as I show someone the spending transaction, which would be sending coins to the landlord or whatever, then he is able to verify that that transaction, that spending transaction, is the only spending condition for that address.\\nSo if he's not able to verify that, because maybe you've got some secondary spending condition where Mikey can still spend it after two weeks or something, where you can try and rug pull, if he's not satisfied that that spending transaction is the only way to spend those coins, which he can calculate for himself as soon as he had said information, then he should not consider himself paid.\"}, {\"type\":\"paragraph\",\"text\":\"Maybe it might be easier to have a look at another example, which is the cold channel example, because that's a much more immediately visualizable, useful thing.\\nI mean, we can't read it in the background, Christoph, but maybe you can scroll up a little bit, because that's easy to understand.\\nThe cold channel construct is something useful for Lightning.\\nSo at the moment, when you want to open a Lightning channel, you need to deposit coins into the multisig address with the channel partner, and there's normally several stages of on-chain hops before then, because you know you're getting paid your salary or something, you're not going to have that sent straight to the Lightning address because you and the channel partner need to negotiate in advance what the balance is going to be, and get everyone to pre-sign all the revocation transactions, all that stuff, so you don't tend to deposit straight into the Lightning channel address today.\\nMaybe it goes to your cold storage first and then later on you decide you want to have some more liquidity on Lightning, so you send it - and then all the node packages tend to want you to send it into the node's single custody first, so it can then do the negotiating stuff with the channel partner.\\nThen only once the negotiation stuff is agreed, do you then deposit coins into the channel address, and then you can start using it.\\nBut that's using several on-chain transactions just to get this off-chain transacting started.\"}, {\"type\":\"paragraph\",\"text\":\"With CTV, we can do this thing called a cold channel, where using a couple of different spending routes, which are in one of the other slides, you can create an address that is a Lightning channel already, but the counterparty doesn't know about it yet.\\nTo everyone else in the world, it just looks like a regular deposit address.\\nThen you can leave it there for months, years.\\nNo one else knows there's any (other) way to spend it, it just looks like a regular signature address.\\nBut when you decide you want to start spending those, you can reach out to that counterparty and say, hey, by the way, this address here, this was actually a Lightning channel between us the whole time.\\nIf they're responsive, then you can start using it like a regular channel without any more on-chain transactions happening at all.\\nSo you don't need to move funds from that address into a channel address or anything.\\nIt's already a channel address and all that needs to happen is you give a little piece of extra information to the channel partner, and now he has everything necessary to start operating it as a regular channel with you.\\nSo why that is interesting is not only does it cut out several on-chain transactions, but it also means that you can treat this as cold storage basically.\\nSo you might as well receive all of your salary payments into these cold channels, because you get a free option to start using it as Lightning immediately at any time that you so wish without a security trade-off.\\nWhereas today, your channel partner knows all the channels that you have together, and that means that they have the opportunity to try and steal from you, because Lightning is this sort of like cooperative, but also adversarial protocol.\\nSo you remove the adversarial element until you reveal the information to them.\\nThat works because when you give the counterparty the information about all the CTV structure, he can see that the only ways to spend this coin are either through Lightning, which is just 2 of 2 multi-sig, or through the secondary path you can take is the justice transaction route.\\nHe now knows that when you go that route, he will see a transaction on-chain that starts a time lock where he can spend it immediately, but you can't.\\nAll the parties can have enough information to just start treating that existing address as a channel, without doing anything more on-chain.\\nSo you save a couple of transactions, but you also flip the incentives around.\\nAnd that's why it's really interesting.\\nMaybe there's questions?\"}, {\"type\":\"paragraph\",\"text\":\"Yashraj: 00:24:27\"}, {\"type\":\"paragraph\",\"text\":\"Yeah.\\nOwen, so I think what you said, it made a lot of sense, it saves cost, and there is safety, and all of that stuff.\\nHow do you think existing user flows will change if we deployed cold channels?\\nThat's the first question.\\nThe second is, are there any new user flows that are enabled by this?\\nOf course the first question was how does it change the existing user flows, for example in Phoenix we have deposited on-chain, so there is that kind of a user flow where you have to deposit funds first.\\nBut then the way that Muun Wallet does it - is that it does these submarine swaps and kind of avoids it all together.\\nSo it seems like around the channel stuff, there are a bunch of user flows, how would you say CTV impacts those, or improves those?\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:25:32\"}, {\"type\":\"paragraph\",\"text\":\"So how I think it would look is, first of all you construct this cold channel by yourself without needing anyone else's cooperation.\\nYou just need the channel partners, public key or something like that, something that they publish that isn't risky to them.\\nSo this would probably be like an LSP and they would probably publicize that they do this because it gets them more liquidity.\"}, {\"type\":\"paragraph\",\"text\":\"So what I imagine the UX sort of flow would look like is - you need to construct this address first of all, because you're going to give it to your payroll process, or your exchange, or whoever to do the withdrawal to, so you would need to pick who the channel partner is going to be, which LSP, which probably seems like a dropdown or something like Async or Zeus or whoever.\\nAnd then it seems like the wallet in the background would do all of the CTV construction stuff, because the user doesn't even need to see or care about any of that.\\nIt's like a standard template that you would just deploy.\\nThen the outcome of that would just be an address that you just give to payroll or whoever, and it gets paid to.\\nI think you would need to, in the sort of the wallet balance area of the app, I think you would need to keep these in a segregated spot because they need to be almost like unsealed or something to start using them on Lightning.\\nSo you wouldn't want to just dump it into the regular Lightning balance, because you can't start spending them right now.\\nA step needs to happen between the receiving and the spending.\\nIt's just that that step does not require an on-chain transaction, just requires communications with the LSP.\\nSo it seems to me you naturally end up with like a cash account or something, which is your actual Lightning available sats right now.\\nThen maybe like checking account or something, which is like sats that are available on Lightning, but you need to unseal them first, or we need to come up with a term that makes sense to people, but they're ready to go, you need to complete the communications loop first.\\nSo they're sort of like reserves or something like that.\\nThe unsealing seems like it could just be a regular button or something that starts a communications loop with the LSP, and you ping them and say \\\"hello are you awake\\\", and they go \\\"yeah we're still here, everything's fine\\\", and then you go \\\"Bang here you go, this was actually a cold channel with you the whole time\\\".\\nYou're happy to start spending it and they go \\\"yeah sure, whatever\\\", and then you can move it into the available funds.\"}, {\"type\":\"paragraph\",\"text\":\"Yashraj: 00:28:01\"}, {\"type\":\"paragraph\",\"text\":\"So would it mean that wallets and even users might not have to think about an on-chain balance and a Lightning balance as two separate things, and they can just like start thinking about them as one and the same thing?\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:28:24\"}, {\"type\":\"paragraph\",\"text\":\"I'm trying not to put my personal...\"}, {\"type\":\"paragraph\",\"text\":\"Michael Hasse: 00:28:27\"}, {\"type\":\"paragraph\",\"text\":\"I think you would still have to top up this kind of, let's say, Lightning balance.\\nIt wouldn't just be immediate.\\nYou wouldn't need to deposit, but you would still have probably two different, let's say, buckets or balances.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:28:47\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I wonder whether these might actually replace the whole on-chain balance thing, because that's not awfully useful in Lightning at the moment, right, because you need to go and make another $5 transaction to start actually using it.\\nMaybe these would just supersede the on-chain balance stuff.\"}, {\"type\":\"paragraph\",\"text\":\"Yashraj: 00:29:02\"}, {\"type\":\"paragraph\",\"text\":\"Right, because right now in Phoenix wallet, you try to make some transactions - from the user perspective, it seems at some random time, the wallet will tell you that no, now you need to pay $5 or something, and we don't know what's happening in the background - is the channel being made larger and all of these things.\"}, {\"type\":\"paragraph\",\"text\":\"What it seems like you might be saying is that the users will never have to think about that again.\\nIt will simplify all of those those mechanics.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:29:42\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, in an ideal world I think so.\\nI mean there is still a trade-off to make.\"}, {\"type\":\"paragraph\",\"text\":\"What we didn't talk about already is in the case where you've got one of these cold channels, you deposit some funds there, and then you call the LSP that it's a channel with and say - \\\"I'd like to start using it please\\\", and they don't respond for whatever reason, then you need to move from that address to another one, because as part of the assurances that you need to provide to the LSP that you're not going to rug them, that means that the only routes to spending the cold channel are the cooperative case, which is the multi-sig like now, or the \\\"something's gone wrong and I need to move on\\\" case, which adds a time lock, which is how he's got an assurance that you can't rug pull him.\"}, {\"type\":\"paragraph\",\"text\":\"So if he doesn't respond, you do need to make an on-chain transaction and move to another address.\\nSo we will still have to factor that in, but hopefully with a professional LSP, this is a very rare occurrence, like in the Phoenix situation.\\nPhoenix is so tightly integrated with ACINQ, they're not ever going to be offline, it shouldn't really ever be an issue.\\nBut you do need to have that in the back pocket somewhere like how you would resolve that.\\nBut it should be quite rare and it's kind of no worse than today where you have an on-chain balance that you still can't use without spending some money on another transaction anyway.\"}, {\"type\":\"paragraph\",\"text\":\"Yashraj: 00:30:59\"}, {\"type\":\"paragraph\",\"text\":\"So I would still be able to spend these funds for some other purpose, but I would have to do something else.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:31:09\"}, {\"type\":\"paragraph\",\"text\":\"Yes, you need to make an on-chain transaction to move out of the cold channel construct and into another address, which could be a different cold channel with a different LSP, like in one swoop.\\nIt doesn't have to be moved out to a regular private key address and then moved on again.\\nYou can chain these things together because they're all just addresses on-chain that don't need negotiation first.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:31:38\"}, {\"type\":\"paragraph\",\"text\":\"Sounds like we have two potential user flows we could mock up here.\\nOne, the vault, and then the cold channel one.\\nThat would be really interesting to see some UI explorations on those, on exactly what we just talked about.\"}, {\"type\":\"heading\",\"text\":\"Payment Trees\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:31:51\"}, {\"type\":\"paragraph\",\"text\":\"I think that's a good starting point as well.\\nThe really important work to do later is the tree stuff.\\nIt makes sense to start small.\\nA cold channel is basically a vault structure on top of with a multi-sig as well, you've just reshuffled who the parties are, but everything is basically either starting time locks or using keys to spend a different way.\\nIt might make sense to come back to the tree stuff later on because it's just a bigger version of all the stuff that we're covering already.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:32:31\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I tried to understand the tree stuff.\\nThere's a point where I just didn't get through it.\\nEspecially once everyone's in their trees, how you have any assurances of anything in there.\\nBut I don't know, how's everyone else doing with the tree stuff?\"}, {\"type\":\"paragraph\",\"text\":\"Mogashni: 00:32:53\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I'm going to sit in the tree right now and enjoy the view.\\nThat's where I'm feeling the trees right now.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:33:00\"}, {\"type\":\"paragraph\",\"text\":\"But what questions do you have?\\nWhat can we clarify, or what would you like to?\"}, {\"type\":\"paragraph\",\"text\":\"Mogashni: 00:33:06\"}, {\"type\":\"paragraph\",\"text\":\"I think if it's explained in an example, if someone gets paid, I would be more able to understand it if it's an actual mock-up in a user flow, it would make a bit more sense to me.\\nI'm not, it's just not quite there.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:33:28\"}, {\"type\":\"paragraph\",\"text\":\"Which part?\"}, {\"type\":\"paragraph\",\"text\":\"Andrew Lawton: 00:33:31\"}, {\"type\":\"paragraph\",\"text\":\"I'm sorry, I'm gonna agree with what you just said, Mogashini, and ask if someone could just step through a narrative.\\nJust tell the story of how this thing works with the rent.\\nLike the example, if I think, okay, I want to post-date a bunch of rent.\\nIs that a good place to start?\\nI've talked with my landlord, and I'm going to stay in this apartment for a year, but then all of a sudden the water heater goes, and I have to move.\\nHow would I run that scenario at month six, even though I gave him a bunch of post-dated checks, how do I stop from month six to month twelve, and move and not pay him until he fixes the water heater?\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:34:30\"}, {\"type\":\"paragraph\",\"text\":\"I think the rent example was not a good place to start.\\nI wanted to move to the cold channels, because I think once you understand that a cold channel is just an address, the same as any other address, but it has Lightning like optional functionality, then you can start to see how that is a very useful thing for everyone to have for every payment they receive from anything, because Lightning payments are just better if you can make it work.\\nThe main hurdle is that you need to get the sats into Lightning in the first place, and we're kind of removing that concern.\\nSo rather than the landlord rent example, if you think of it as next time I make a withdrawal from an exchange, I can only give them one address.\\nLet's say they're a dumb exchange that doesn't do Lightning or anything yet, they just do boring old on-chain transactions to one address, and they're going to charge me 50 bucks to withdraw or something.\\nWhat I could do is withdraw to an address that is actually a tree of my own of which one branch is a big cold channel right now.\\nAnother one is like my backup cold channel that I might start using in a couple of months or something, just reserves.\\nAnd then another one is to my vault and that's 50% of the withdrawal or something.\\nYou can do all those three things in one go with one address that the exchange doesn't need to cooperate with at all or know anything about.\\nThey don't care.\\nThey just send sats to an address and you're done.\\nIt's the lack of needing cooperation, I think, is what's very useful about these.\\nThat you don't need them to know or understand what you're doing at all.\\nAll the clever stuff is happening on Bitcoin itself, and the person spending to you, the payer, just sees an address as complicated as you want.\"}, {\"type\":\"paragraph\",\"text\":\"Andrew Lawton: 00:36:18\"}, {\"type\":\"paragraph\",\"text\":\"This would be more like, okay, I got paid and I have a checking account and three savings accounts.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:36:24\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, you could easily structure it that way.\"}, {\"type\":\"paragraph\",\"text\":\"Michael Hasse: 00:36:30\"}, {\"type\":\"paragraph\",\"text\":\"You could probably even say that when the payment comes in, it goes into the checking account.\\nFrom there, at the end of the month, whatever is left, or a certain amount goes into a vault.\\nTwo payments go to your children for their, I don't know, chocolate and stuff like that.\"}, {\"type\":\"paragraph\",\"text\":\"Andrew Lawton: 00:37:00\"}, {\"type\":\"paragraph\",\"text\":\"But if my child has been bad and they don't deserve the chocolate, can I reverse?\\nCan I switch it off?\\nWe're getting at the essence of the covenant, the promise, and the promise being broken.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:37:15\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, so one way you can think about that is you can have multiple different spend paths, which is true today.\\nThink of a multi-sig, you could have a multi-sig that requires two of three to sign today and anytime, or one key, but I have to wait six months before I can spend it that way.\\nThat's an example everyone's fairly familiar with.\\nYou can do the same thing and have a CTV spend, which is you must use the exact template transaction, which is some goes to the kids, some goes to the landlord or whatever.\\nOr the alternative is maybe a multi-sig where the landlord and the kids and me...\\nThat's maybe isn't a great example.\\nThe point is you can fuse these two things, you can have a templated path or you can have a multi-sig path, and that multi-sig, you can think of that as everyone having a veto vote.\\nYou know, we all have to agree, if we all agree, then we can spend this pot of sats, however the hell we want.\\nOr if we don't agree, then we can all trust the template path because that's locked in and committed already.\"}, {\"type\":\"paragraph\",\"text\":\"Andrew Lawton: 00:38:20\"}, {\"type\":\"paragraph\",\"text\":\"I see.\\nYeah, yeah.\\nSo, again, I'm staying with the narrative here.\\nSo, my child did not do their homework, so they don't get the chocolate.\\nMy wife and I are on the multi-sig and we both agree, okay, no, he can't get the chocolate.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:38:41\"}, {\"type\":\"paragraph\",\"text\":\"Yes, it would work like that, but I don't think it's a great example and that's maybe more confusing.\"}, {\"type\":\"paragraph\",\"text\":\"Yashraj: 00:38:47\"}, {\"type\":\"paragraph\",\"text\":\"So, Owen, I feel with these covenants it means to make a promise and all of that stuff, sometimes you might want to break, you want to be careful before you make a promise and so if you do a transaction structure and then you don't want to do that, is it possible in scenarios to commit to something that I will do this, but then have the option to say no I don't want to do it.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:39:31\"}, {\"type\":\"paragraph\",\"text\":\"Only if you've built it that way.\\nSo remember, the address encodes the spending conditions, so you've decided what conditions should apply for you to be able to move those coins.\\nThe covenant is almost more useful as a way to prove to someone else that I can't spend it any other way.\\nSo maybe another example, and this is still a little bit abstract, it's not that useful by itself, but we can use it for payments between three people.\\nWe've already covered the compression thing, we can give this one address to the exchange and it has many different things inside it.\"}, {\"type\":\"paragraph\",\"text\":\"Imagine that there are three branches and they are each branch is owned by one particular person.\\nAlice, Bob, Charlie.\\nLet's say we set it up so that the template route is - exactly one third goes to each member.\\nBut there's also a multi-sig route that must be three of three.\\nAnd that multi-sig route, you can spend to anywhere that you want.\\nSo we can all fall back on \\\"the everyone gets exactly one third equally\\\", because we know that that can't be removed unless we all agree.\\nBut if we do agree, we can spend it any way we want.\\nSo if Alice needs to pay Bob for something, and Bob needs to pay Charlie for something, and Charlie does something else for Alice, whatever, we can change the amounts.\\nIt doesn't have to be one third to everyone, it could be 90% to Alice and 10% to Bob and nothing to Charlie, as long as we all agree on that.\\nAnd if we all agree, we can sign a transaction to spend from that initial address we gave, then it moves on to spend to wherever we want, because we all agreed.\\nSo, you know, that's not really that useful in the real world, but as a principle, maybe that explains better, how this stuff can work.\"}, {\"type\":\"paragraph\",\"text\":\"Yashraj: 00:41:15\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, yeah.\\nI just heard your example in detail, I think you're absolutely right.\\nThat's not exactly giving the picture of what CTV can do, it seems in this case it would be CTV plus some of the other taproot things and combine them to get this use case.\\nThis flexibility, I think that's the point here.\\nYeah?\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:41:41\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, it's not that useful by itself, but it's very powerful primitive when we combine it with other things that we have.\"}, {\"type\":\"heading\",\"text\":\"Possible Use Cases\"}, {\"type\":\"paragraph\",\"text\":\"Yashraj: 00:41:50\"}, {\"type\":\"paragraph\",\"text\":\"Right, so I was trying to think about it in the lens of something that you mentioned earlier.\\nWhat are the new new use cases it enables?\\nHow does it improve some of the existing use cases?\\nAnd what else?\\nMaybe it can do the exact same use case, but with improved privacy, or lower costs, or things like that.\\nSo can we try to think about the use cases and CTV in these three categories, just to be able to understand it and the applications in a more concrete way.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:42:40\"}, {\"type\":\"paragraph\",\"text\":\"Okay, so that example I just gave with the three people, that's a very small example of what's called a payment pool, or I kind of use the word tree sometimes, because that's more how it's actually structured.\\nBut these can be scaled up to whatever size, the limit is how large do you think you can reliably collaborate between people.\\nThree sounds probably pretty easy, especially if you've got no time constraints.\\nTen, probably fine.\\nTheoretically, hundreds, I guess, if you're like not in a rush, maybe.\\nAlso remember that those inside the tree structures, inside the CTV, they're just payments to addresses, and addresses can also be CTVs. So each branch can be another tree in itself that you don't even need to know about or care about.\\nLike that payment to Alice might actually have had 500 branches coming off of it, some of them were vaults, and some were cold channels, and some were all sorts of other stuff.\\nWhy this is powerful is because this allows us to scale Bitcoin significantly by pushing all this transacting off-chain but with on-chain level of assurances still.\\nThere have been some papers even demonstrating that, things get a little bit unwieldy for sure, but in theory you can do global scale with this stuff if you can have a tree with a million people in, which is done by using some timeouts and things to force roll over at particular time so that everyone can rely on stuff without having to get those million people to actually collaborate on everything.\\nSo this is the scope of what we're talking about here.\\nBut we need to start small with things we can design right now for sure.\"}, {\"type\":\"paragraph\",\"text\":\"Yashraj: 00:44:17\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, yeah.\\nI hear what you just said, so this is scalability and improves privacy.\\nLike these use cases could be, so if it's just one UTXO shared by a dozen people, and then there is a spend from that, you don't know who was the owner of the previous one and who's the owner of a new one and things like that.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:44:47\"}, {\"type\":\"paragraph\",\"text\":\"So with what you can surveil on-chain, you're just seeing one UTXO, and we're all kind of familiar with it with Lightning already where it's one UTXO on-chain but it's owned by two people, but the sats in it - when we broadcast the closed channel state - and I have 5,000 fewer sats you know that I've paid them to the channel partner, but you don't know where he sent them onto because I've routed it through the whole Lightning network, so the privacy improves significantly.\\nA simple way to think about it is that you have that effect but with more than two people inside that UTXO, and you actually don't even know how many people are inside that UTXO.\\nIt could be two, or it could be a million, there's no real way to know.\\nYou get a lot of privacy for free.\\nNot perfect, sure, but better.\\nYou get the payments kind of flexibility stuff in the same way as we do with Lightning.\\nBut I think that the most compelling case for CTV was the scaling stuff, which is what a lot of people didn't really understand until about six to twelve months ago, just because it's very abstract and hard to think about.\"}, {\"type\":\"paragraph\",\"text\":\"Michael Hasse: 00:45:52\"}, {\"type\":\"paragraph\",\"text\":\"Like the movie Inception, you can have a dream in a dream in a dream, right?\\nThat's the forest for the trees.\\nI found it a pretty good visual in the tweet thread.\\nYeah, I'm going to definitely next week work on the vault thing because it's basically what I, in the hackathon, like a year and a half ago, worked on for the inheritance topics where you have a dead man's switch that keeps transactions from happening.\\nBut you have to have previously on-chain transactions for everything, and you couldn't have something like these time locks where you have, let's say two weeks or a month before to reclaim the funds to an emergency address.\\nSo that's definitely something that I'm gonna work on.\\nBut I had a question - if I have, let's say, one Bitcoin and if I create a transaction, or have a kind of a setup where if I spend less than 0.1 Bitcoin, then I need only one signature?\\nIf I want to spend more, I need two or three.\\nIs this something that would be also a use case for these kinds of things, no?\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:47:37\"}, {\"type\":\"paragraph\",\"text\":\"Yes, so you can't do that today, but you could do that in a covenants world.\\nThat would look like having several different possible spend paths, one of which was a template - the spend must be 0.1 BTC to address A, with key A - and path 2 might be you need keys A and B and it goes to address C for 0.2 BTC or whatever.\\nYou get the gist.\"}, {\"type\":\"paragraph\",\"text\":\"Michael Hasse: 00:48:01\"}, {\"type\":\"paragraph\",\"text\":\"Exactly.\\nSo we have a reference design Christoph, for exactly this use case.\\nSo somewhere we have exactly that, where you have a condition that if it's less than something, only one signature is enough.\\nBut these are, I mean, these are the practical use cases, I'd say.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:48:28\"}, {\"type\":\"paragraph\",\"text\":\"No, that's a different, that's the assisted custody one, where you have an auto signer that signs transactions below a certain amount to facilitate low amount payments.\\nThen for larger amounts that you're not comfortable with being automatically approved, that's where you need to get your extra keys out, but it's the same key configuration there's just the software kind of enforces them.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:48:54\"}, {\"type\":\"paragraph\",\"text\":\"So in that example you're trusting the signer software or the custody partner or whatever to not sign if they don't meet your terms.\\nThis is what CTV kind of does is it allows us to take things that were previously trusted and make the chain be the only trusted thing instead, which is obviously an improvement for many things.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:49:15\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, so I feel like I get some of this stuff.\\nSo I was just trying to diagram a few things here, I made lots of other diagrams here earlier today for explaining fiat over Lightning with synthetic fiat and all of this stuff.\\nSo I'm just reusing those.\\nSo, here's my understanding.\"}, {\"type\":\"paragraph\",\"text\":\"So Alice comes up with a bunch of rules.\\nLike, I can spend these 2 Bitcoin after one year, but Charles, he can spend 1 of those Bitcoin after one month, and he can spend another 1 Bitcoin after two months, whatever the rules may be.\\nThen I kind of compress them and turn them into this address.\"}, {\"type\":\"paragraph\",\"text\":\"Then I tell Bob, Robert, who is my employer, so I give him this address, it looks like general address, and they're like, \\\"Okay, here's your salary.\\\"\\nThat means these Bitcoin here will be locked to the conditions saved in this address.\\nSo now we have rules and we have bitcoins tied to them, and from then on, all interactions with these Bitcoin are governed by these rules.\\nNo one knows about those rules, only Alice does.\"}, {\"type\":\"paragraph\",\"text\":\"So my landlord, which is this guy here, Charles, I have to tell him about those rules.\\nSo I have to give him an address.\\nAnd it's like, here's my address, there are two Bitcoin in there, and here's a rule that I baked into this address, and Charles can verify from the address like that, that's actually accurate, and there are no other rules, where Alice can secretly take things away.\\nAnd he's like, okay, cool, I can spend one of those Bitcoin next month and then another one in two months, right?\\nBut that's it.\\nLike no one can change these rules anymore.\\nAnd we're all kind of tied to them.\\nAnd that's kind of it.\\nSo that's my understanding.\"}, {\"type\":\"paragraph\",\"text\":\"How do we get here from trees and trees and billions of scale?\\nMaybe it needs another 400 diagrams.\"}, {\"type\":\"paragraph\",\"text\":\"Mogashni: 00:51:16\"}, {\"type\":\"paragraph\",\"text\":\"This makes sense.\\nThis makes a lot of sense.\\nI needed those visuals.\"}, {\"type\":\"paragraph\",\"text\":\"Michael Hasse: 00:51:19\"}, {\"type\":\"paragraph\",\"text\":\"And another call probably.\"}, {\"type\":\"paragraph\",\"text\":\"Yashraj: 00:51:22\"}, {\"type\":\"paragraph\",\"text\":\"But does this one require CTV, Owen?\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:51:27\"}, {\"type\":\"paragraph\",\"text\":\"Yes, because CTV is what's being used to say - you can only spend one Bitcoin.\\nToday, you can do time locks, sure, but you can't constrain how much, all you can do is completely unlock the address or not have it be spendable.\\nWhereas with CTV, you can say how it can be spent, in CTV is a specific type of covenant that is all the terms of the spending transaction are built in already.\\nSo it's _how much_ and _where to_.\\nWith some of the more flexible covenant ones, you can pick and choose which bits of the transaction you want to constrain.\\nIt's easier to think about if you're using CTV as a starting point, where it's just - this is exactly how it must be spent and nothing else.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:52:09\"}, {\"type\":\"paragraph\",\"text\":\"I had one question on here, and that wasn't clear to me.\\nAlice can say, here are the rules, but what is the unique thing that only allows Charles to spend them?\\nWhy cannot Alice not spend through those rules?\\nThere has to be some secret that only Charles has where Alice can't give everyone else.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:52:30\"}, {\"type\":\"paragraph\",\"text\":\"It's not that Charles can spend it, it's that one Bitcoin can go to Charles's address after one month.\\nSo anyone who has this information can just broadcast it straight away.\\nThink of it like a PSBT that can't be spent differently.\\nThe rule is the Bitcoin has to go to Charles's address.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:52:47\"}, {\"type\":\"paragraph\",\"text\":\"So Alice has to know Charles's address in advance when she comes up with those rules?\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:52:52\"}, {\"type\":\"paragraph\",\"text\":\"Yes.\\nThat's one of the useful limiting factors of CTV because you can only bake as much in as you can coordinate in advance.\\nThat's what stops things from going completely off the rails.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:53:03\"}, {\"type\":\"paragraph\",\"text\":\"Okay, so we need a thing here - where Alice talks to Charles and says \\\"Give me some addresses.\\\"\\nThen she can bake those in the...\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:53:25\"}, {\"type\":\"paragraph\",\"text\":\"Yes.\\nAnd who knows what the addresses of Charles's are, they might be just vault addresses, or they might be regular keys, or they might be trees, or they might be vaults, or they might be cold channels, or God only knows what he's doing with them.\\nAs far as you're concerned, it's just an address.\"}, {\"type\":\"paragraph\",\"text\":\"Michael Hasse: 00:53:39\"}, {\"type\":\"paragraph\",\"text\":\"Okay.\"}, {\"type\":\"heading\",\"text\":\"Other covenant proposals\"}, {\"type\":\"paragraph\",\"text\":\"Yashraj: 00:53:42\"}, {\"type\":\"paragraph\",\"text\":\"Owen, I think we spent the whole hour talking only about CTV, and there are like a dozen more proposals and stuff.\\nWhat's the...\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:54:03\"}, {\"type\":\"paragraph\",\"text\":\"I lost the tail end of that question.\"}, {\"type\":\"paragraph\",\"text\":\"Yashraj: 00:54:05\"}, {\"type\":\"paragraph\",\"text\":\"Oh, sorry.\\nI was asking what about some of the other proposals?\\nThis is just all about CTV.\\nWhat about but what about LNHANCE and `OP_VAULT` and CSFS (`OP_CHECKSIGFROMSTACK`)?\\nThere are so many of these, I don't even know what those are.\"}, {\"type\":\"paragraph\",\"text\":\"Michael Hasse: 00:54:28\"}, {\"type\":\"paragraph\",\"text\":\"You have to wait for the next tweet thread.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:54:32\"}, {\"type\":\"paragraph\",\"text\":\"LNHANCE packages CTV plus CSFS and something else (`OP_INTERNALKEY`) to make a suite of soft forks bundled into one that are particularly very useful for Lightning.\\nCSFS, just a way to think of it holistically is that CTV is the most constrained version because you specify everything, every element of the spending transaction in advance.\\nCSFS and other proposals allow you to say, maybe I constrain the amount, but not the destination, or vice versa, but you're generally making it more flexible.\\nThere's other technical differences, like exactly how they go about that inside the code, and which bit gets hashed when, and which bytes are used for that, whatever, and so on, which is way beyond me.\\nFrom an object level, as far as we in the UX world are concerned, CTV is like everything must be defined in advance about how this gets spent, and other covenant proposals are where you can choose which elements you want to constrain and how.\\nThat makes a design space even larger.\\nI haven't even started thinking about those yet.\"}, {\"type\":\"paragraph\",\"text\":\"Michael Hasse: 00:55:42\"}, {\"type\":\"paragraph\",\"text\":\"One of these things I seem to remember, and I hope I remember it correctly, is that you could leave out which UTXOs should be spent, because you don't know in advance.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:55:56\"}, {\"type\":\"paragraph\",\"text\":\"And that's any AnyPrevOut, APO (`SIGHASH_ANYPREVOUT`).\"}, {\"type\":\"paragraph\",\"text\":\"Michael Hasse: 00:55:58\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, probably.\\nIt's a big design space.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:56:07\"}, {\"type\":\"paragraph\",\"text\":\"Yeah.\\nI can't advise awfully much on anything else besides CTV at the moment, because it's even larger to think about.\\nI know any AnyPrevOut is particularly useful for Lightning because it allows you to not need to keep holding on to all these old channel states just in case someone broadcasts a really, really old one.\\nYou can just keep hold of the latest one in the case that the channel goes wrong and you have to force close it suddenly somehow, the latest one is enough.\\nYou can forget about everything else.\\nBut I don't know how that is used in other more interesting covenant constructs yet.\"}, {\"type\":\"paragraph\",\"text\":\"Michael Hasse: 00:56:41\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nYeah, we would probably need to know what we want to do before, and then only then can we say, okay, is CTV enough or do we need something else?\\nSo probably reverse the reasoning there a bit.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:57:04\"}, {\"type\":\"paragraph\",\"text\":\"That's one of the arguments that gets made and why there's a lot of discourse about this stuff, because some people want the really expressive forms, some people want the really limited forms of covenants, and I'm in the camp of the really limited form because there's already a lot of very interesting stuff we can build with it.\\nWe also know it's about as safe as you can get in terms of soft fork upgrades, because it's so limited in scope and well studied.\\nThen as we build more things with it, we can start to see where it doesn't quite do enough, and then we have more confidence about what extra things we need to add without breaking stuff.\"}, {\"type\":\"paragraph\",\"text\":\"Michael Hasse: 00:57:41\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, this was super helpful.\\nI really learned a ton today and from the threads.\\nIt was really, really helpful.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:57:51\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, for sure.\\nWe could do a design huddle where we collaboratively try to design some flows for it.\\nI'm thinking about basic stuff where you look at your coins in there.\\nYou're going to have to look at your balance or your transactions, and there has to be a little thing that says this one has extra rules attached, and then you'd have to somehow see those extra rules.\\nThen you would have to think of the whole backup flow, because this is off-chain data so that it doesn't get lost.\"}, {\"type\":\"paragraph\",\"text\":\"Michael Hasse: 00:58:27\"}, {\"type\":\"paragraph\",\"text\":\"We could also in a design huddle have these real world use cases, like the one with the rent, and the one with something else, and then we give that to Owen.\\nHe then makes the table with all the different covenant proposals and he said \\\"okay you can do that with CTV, with AnyPrevOut\\\" or with all these different things, so we can compare them.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 00:58:58\"}, {\"type\":\"paragraph\",\"text\":\"Okay, and here in my background, to wrap things up are some AI generated trees made of Bitcoin addresses.\\nAt least that's what Midjourney thinks it looks like.\\nLooks more like broccoli, but that can be our next topic.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:59:14\"}, {\"type\":\"paragraph\",\"text\":\"Hey, That's cool.\"}, {\"type\":\"heading\",\"text\":\"Questions\"}, {\"type\":\"paragraph\",\"text\":\"V: 00:59:21\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I had a question.\\nI got to know the idea of it, but I have a small question.\\nI know that all of this is off-chain, and how will he spend it?\\nWhen the owner or whoever gets the amount, he can spend it like that, or he needs to go and convert it into on-chain, and then he can spend it?\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 00:59:50\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, that's the million dollar question.\\nThis is where a lot of people get stuck, including really smart developers because it's hard to visualize.\\nThink of all the stuff you do with the covenants, the CTVs or whatever, as how far you can organize things in advance by collaborating and working together.\\nSo, you know... no, I won't give an example, that's more confusing.\\nThere's only so far ahead that we can plan and collaborate and things can actually work.\\nOnce you reach the end of that and you need to change the structure altogether, you will need to go on-chain, but it doesn't have to be that every single member of the shared UTXO have to all exit out of the chain and then all start again.\"}, {\"type\":\"paragraph\",\"text\":\"You can work together and say, if you're doing a payment pool structure, and Bob wants to leave or something, Bob needs to do something he can't possibly do inside this structure anymore.\\nThe rest of us can be like well I'm fine still staying in here, I don't need to get my own UTXO on-chain and then organize pooling together again in another one.\\nWhy don't the five of the rest of us, we'll all just hop across at the same time that Bob exits, and start another pool or join an existing pool somewhere else.\\nThe way we use Bitcoin today is kind of quite crude and simplistic, and we need to start realizing that the chain is for _logging commitments_ that you can't go back from, basically, rather than _ownership transfers_, because we can now achieve ownership transfers off-chain, but there just comes a point where we will need to do something that we can't do off-chain and we can capture that change in an on-chain transaction, but it doesn't have to be splintering it into a million pieces and starting from scratch.\\nWe can still collaborate to move from one tree to another, but this is the stuff that's super hard to visualize, so I may not have explained anything at all.\"}, {\"type\":\"paragraph\",\"text\":\"V: 01:01:50\"}, {\"type\":\"paragraph\",\"text\":\"Yeah.\\nOkay.\\nAnd one more question.\\nIn the start, you said that it's necessary that they respond back.\\nWhat was that about?\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 01:02:03\"}, {\"type\":\"paragraph\",\"text\":\"It's necessary that there's what, sorry?\"}, {\"type\":\"paragraph\",\"text\":\"V: 01:02:07\"}, {\"type\":\"paragraph\",\"text\":\"Alice has the rules, set up the rules, and there's a landlord.\\nSo when it goes to him, he'll have to respond back, something like that.\\nI didn't get that idea.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 01:02:31\"}, {\"type\":\"paragraph\",\"text\":\"I wish I'd never said this landlord example because I think it's more confusing than helpful.\\nChristoph is showing some stuff on the screen.\\nWas it about that?\\nWhat's on the screen right now?\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 01:02:43\"}, {\"type\":\"paragraph\",\"text\":\"I think the question is like, what does Alice actually give him?\\nThe understanding is she gives him a ready to broadcast transaction almost.\\nIt's like, hey, here's information that you can broadcast, but you don't have to do it now, and it's not valid right now, but in a month, you can do so.\\nThen the landlord, Charles here, he just has to keep that transaction or that piece of information and then months later just plug it into his Bitcoin wallet and say \\\"here, broadcast that, I want this to be executed,\\\" and then the Bitcoin will be transferred.\"}, {\"type\":\"paragraph\",\"text\":\"V: 01:03:24\"}, {\"type\":\"paragraph\",\"text\":\"Okay so he has to reply back to Alice that I want to use it?\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 01:03:29\"}, {\"type\":\"paragraph\",\"text\":\"No, she she will give him this little chunk of information.\\nSo think of it as if we were doing it with PSBT, with signed transactions.\\nIf we weren't using covenants, she could give him a pre-signed transaction and say, look, here's everything you need to withdraw some coins from my address and send them to yourself, signed by me.\\nBut he can't trust that, because she could spend the coin differently before he broadcasts it, so he has to broadcast it now and get it mined, to be sure that it's his.\\nBut in a world of covenants, she can say, here is that same PSBT, but you can also see that the address they're in, I can't spend them any different way than by broadcasting this transaction that sends them to you.\\nSo you're using the transaction as the key that opens the lock now, rather than just a regular key.\\nBy doing that, he may not even need to bother broadcasting them at all until he needs to go and buy a car next year or something, because he knows they can't go anywhere.\\nThey're effectively, they are his.\\nThey're not able to be moved by anyone apart from him.\\nSo although they're not in his address yet, he can consider them his because there's nowhere else they can go.\"}, {\"type\":\"paragraph\",\"text\":\"Christoph Ono: 01:04:36\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I guess the one addition is that it's tied to that piece of information.\\nIt's not an address generated by his wallet.\\nSo he would have to make sure to keep that piece of extra information, because if he loses it, then he cannot get it back.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 01:04:53\"}, {\"type\":\"paragraph\",\"text\":\"But I don't think that's a huge deal, because you already need to preserve a blob of information, the user doesn't even see the key anymore.\\nThe wallet software is holding on to that key for dear life because if it loses it, it can't sign anything anymore.\\nThis is just in an abstract sense, I think it's just a different blob of information the wallet needs to hold on to and make sure it backs up to the cloud or whatever.\\nIt doesn't even matter if you keep it in iCloud or anything because it's not sensitive, it can't be abused by anyone, it can only send the funds to you.\"}, {\"type\":\"paragraph\",\"text\":\"Michael Hasse: 01:05:26\"}, {\"type\":\"paragraph\",\"text\":\"One design challenge that I think will be for the recipient, they have to be able to inspect this address, right?\\nOr what it does somehow.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 01:05:42\"}, {\"type\":\"paragraph\",\"text\":\"Yes.\"}, {\"type\":\"paragraph\",\"text\":\"Michael Hasse: 01:05:43\"}, {\"type\":\"paragraph\",\"text\":\"So wallet software would need to surface this information in some kind of usable way.\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 01:05:59\"}, {\"type\":\"paragraph\",\"text\":\"Yeah.\"}, {\"type\":\"paragraph\",\"text\":\"Yashraj: 01:06:00\"}, {\"type\":\"paragraph\",\"text\":\"I think about it a bit like  PayJoin, just like one set, because that also involves the PSBTs and all that stuff.\\nSo basically Charles could construct the transaction or like construct something, send it to Alice and then she does her stuff, adds her keys or signatures or whatever, and then she sends it back, and that's like the transaction that's like ready to broadcast.\\nIs that the right way to think about it at all?\"}, {\"type\":\"paragraph\",\"text\":\"Owen Kemeys: 01:06:35\"}, {\"type\":\"paragraph\",\"text\":\"I'm not 100% sure.\\nWhat we can say is that when Bob receives the spending transaction that we haven't broadcast yet, he could even himself go and reconstruct the address.\"}",
    "body": "## Introductions\n\nChristoph Ono: 00:00:01\n\nWelcome to our first Learning Bitcoin and Design call of 2024.\nWe haven't had one of these in a while, but we're picking them back up again.\nThe first topic is a really tough one, I think at least, it's covenants.\nThe reason, one of the reasons why this came up is because on Bitcoin Design, we have this new design challenge.\nWe have a page with design challenges that are meant to be kind of take home challenges.\nIf you want to challenge yourself to assign something, there's something you can do, and Dan added covenants, for scale, because someone tweeted about it - someone called Leishman, who is CEO of some Bitcoin company that I just forgot.\n\nYashraj: 00:01:00\n\nRiver, I think River.\n\nChristoph Ono: 00:01:01\n\nRiver?\nOkay, cool.\nAnd that post said, hey, we really need people to dig into this covenant stuff from a design perspective.\nSo that kind of kicked that off a little bit, and then we decided to create this learning call.\n\nI don't know how about how everyone else is on this topic.\nUntil a month ago or so, I basically heard about that it exists, and that there were a bunch of technical proposals called CTV, that basically make no sense if you hear them and you're not familiar with anything.\nThe term \"covenant\" didn't really tell us anything.\nI put Alien Covenant in the background because literally that's the only time in my life that I've ever heard the term covenant.\nCouldn't even figure out what that's supposed to do.\nI did listen to some podcasts recently, by Stephan Livera, that were extremely helpful and have this great overview, and I don't think it's actually that difficult after listening to those podcasts.\nWe're here on this call now that we can kind of shed some light on this stuff, and then hopefully we can work towards some of these design explorations and figure out how this technical mumbo jumbo can actually make Bitcoin more useful, for more people.\nAnd maybe address scaling.\nI don't know, what is everyone else bringing into this conversation here?\n\nMichael Hasse: 00:02:30\n\nI came across covenants relatively early, during or after my grant started.\nIt can help to improve the programmability of Bitcoin, of wallets, of transactions.\nIn terms of, let's say, automated inheritance or vaulting features that might be helpful.\nI focus more on Miniscript, which is something that exists today and can do something limited, something similar.\nCovenants are like that on steroids, so you can do much more advanced stuff with it.\nBut I didn't know about the scaling Enigma thing at the time.\nJust read that this week.\n\nYashraj: 00:03:42\n\nYeah.\nHey everyone.\nNice to see you guys.\nMy journey on this one has been pretty similar to Christoph's. There are so many abbreviations, so much arcane stuff, it seems so difficult to understand, APO, CTV, CSFS.\nThe abbreviations go longer and longer - \"What's happening?\"\nI think it's all very technical, it looks there is a class of people, mostly devs, who are interested in the digital money programmability side of Bitcoin.\nThey want to make it more technically useful, and you should be able to do different things, and all of that.\nAs Michael was saying about it, spending it in different ways and things like that.\nA lot of the motivation of covenants, so I think the original use case was vaults so being able to specify different types of conditions that UTXOs can be spent, and all of that stuff.\nThis thing was pretty old.\nThis is from three, four years back, but in the last few months, it has picked up steam again with so many devs coming in.\nMy perspective on this is this is too technical and I love understanding all this stuff, but as a designer, I'm trying to think what are the use cases, what are the features that will help people.\nNot thinking from the programmability point of view, but scaling and privacy and those things, I think that is something that we require nowadays, in 2023, 2024, and I'm excited to see how it can help.\n\nChristoph Ono: 00:06:04\n\nI think it would be helpful if we take a step all the way back, because like you said, there's this programmability stuff and the dev conversations.\nThese all seem to be pretty much already sold in, they're not even talking about what this thing is for, they're just talking about how it can work.\nI'm really glad Owen is here and also raising his hand, because I think just earlier I came across his two threads here, which I think you posted on GitHub or somewhere.\nThose are really good explanations of what this stuff actually does.\nSo you just raised your hand, Owen, go ahead.\n\n## Covenants overview\n\nOwen Kemeys: 00:06:43\n\nHi, I was asked to join this call.\nI haven't joined a Bitcoin design call before, but it's good to get involved.\nAs you can see with those threads ([1](https://x.com/OwenKemeys/status/1741575353716326835), [2](https://x.com/OwenKemeys/status/1744181234417140076)), I put a lot of thought recently into trying to visualize how this stuff works, because it's very difficult for people to wrap their heads around how these functions work and what you can go on to do with them.\nIt's not actually that alien or strange, it's just different to how we do things today.\nI started off with CTV because it's the most simple and sort of easy to rationalize about how it works and what you can do with it.\nOther forms of covenant are more flexible versions of that, that I think might be wise to put to one side for the purposes of designing stuff, for now.\n\nThe way you can think of CTV is it's quite similar to PSBT, to having a pre-signed transaction where I could technically pay you by signing a transaction to spend my coins to your address and then just giving it to you, rather than broadcasting it to the blockchain.\nHowever, you still have to trust that I'm not going to spend those coins differently first before you get it, so you can't consider that PSBT a payment, right?\nBecause I could spend them any other way before you broadcast it and they're not your coins anymore.\nSo today we're using only the chain itself to log ownership changes, and what covenants allow us to do are ownership changes off-chain, as long as you can plan them in advance.\nThere's a couple of use cases in those threads I gave, if you haven't read them already, I highly recommend starting there.\n\nIn the second thread, I got onto the actual use cases, and the more I've looked at this stuff, the more I've realized there's kind of two basic principles that covenants are useful for here, you end up with these kind of meta primitives.\nTechnically speaking, it's what I said a minute ago about having a pre-signed transaction that I can't spend differently, so you can consider yourself paid as soon as you have it.\nThe use cases tend to be vault type structures, which are kind of using the chain to trigger a time lock, because in Bitcoin's technical design at the moment, we don't have ways where a key expires in a multi-sig or something.\nYou can only make it more easy to spend, you can't make it less easy to spend.\nSo vault type structures allow you to trigger the start of the time lock, which is very useful.\nThen the other one, which is where everyone's brain starts to melt, are tree type structures, which you could think of as aggregating lots of transactions together, or like a zip file of lots of transactions that only represent on-chain as one.\nIt is difficult to think about this stuff, but these are the areas, particularly the tree stuff - that's where we can start doing scaling.\nThat's what I think Alex was asking people to start thinking about the UX for, because it's just very different to how we do Bitcoin today.\nBut I don't think it's impossible.\nI started to think about this stuff before I even got invited to this meeting, and I have some ideas already, but I haven't had a chance to start working on them yet.\nMaybe I'll stop talking for a minute and let someone else speak.\n\nChristoph Ono: 00:09:54\n\nAwesome, thanks.\n\nYashraj: 00:09:57\n\nSorry Christoph, I just wanted to say thanks to Owen for joining in.\nThose two Twitter threads are super duper useful.\nI am happy that I've gone through at least the first one a couple of times and I'm still not completely there.\nI think I have to read it again and try to do more research, but it was super, super, duper useful, man.\nThanks for joining.\nI mean, I love that.\nThanks.\n\nOwen Kemeys: 00:10:25\n\nYeah, no problem, and it felt like an area I could add some value to the conversation, because I recognized there was a lot of technical people that got how it worked, and a lot of normal people like us who just can't understand how this stuff is useful at all yet.\nI spent the last six months or so, just gradually learning and learning about use cases and things, so I could start visualizing how you can actually use this and explain it to people or we're never going to get anywhere with it.\n\nChristoph Ono: 00:10:50\n\nIn the Bitcoin Design guide, we have a whole section called \"how it works\", and it's very similar to what you put together there.\nIt's private key management, like here's a whole thing about how multi-key systems work.\nSome of them have illustrations similar to yours, others don't.\nHere's one about custom spending conditions with recovery paths, but it's the same idea what you did, just take these kind of complex things and translate them in our case for designers within the idea that they can take that and build products on top of them.\nSo maybe we could turn this into a \"how it works\" page too.\nTwitter threads kind of get forgotten at some point, if you'd be open to that.\n\nOwen Kemeys: 00:11:40\n\nYeah, sure.\nTake whatever you think is useful from it.\nI'm happy to comment if you want as well.\n\nChristoph Ono: 00:11:47\n\nAwesome.\nI wanted to take one step further back.\nAs I said earlier, I didn't figure out what the word covenant means, but it's basically a promise to engage in some type of activity.\nI found that helpful in the Stephan Livera podcast, with Brandon Black I think, where they said in Bitcoin every coin has a restriction on how it can be spent.\nBut right now, it's basically you need to have the private key, right?\nThere's one rule how you can spend it.\nIt's the private key.\nIf you have that, you can spend it, right?\nThat's the default that everyone knows.\nThe second one that Michael has been looking into a lot is the time locks.\nYou can spend it after a certain amount of time if you have a key.\nIn covenants, the idea there is to just really open that door much, much further, that you can have all kinds of complex predefined rules about how this can be spent by multiple people with different scenarios.\nI found that a pretty good starting point.\nThen the other thing I learned that was interesting is that CTV and all of these abbreviations and all this stuff, they're all trying to do the same thing technically.\nThey take different approaches that end up with some that are a little bit more complex, some a little bit easier, some of them have a little bit more flexibility, others are a little bit more rigid, but they're all kind of trying to do the same thing.\nThen as you dig through those, you probably end up with different use cases.\nOne thing I found interesting, too, because the more complex proposals, they enable more, but they are more risky in terms of things that can go wrong, unforeseen circumstances and all of that.\nSo there seems to be more a tendency to get the simpler ones enabled.\nSo there were some takeaways that I found interesting that I wanted to add as well.\n\nOwen Kemeys: 00:13:53\n\nYeah, I think that's a fair characterization and the simplicity - this is why I started with CTV because it's the easiest to think about, and it's the most tightly constrained, but it still unlocks a huge possibility space of interesting things we can do.\nI use the word constructs because just a CTV by itself isn't that interesting, but the stuff it allows you to do is more.\nThen a lot of the developers I speak to are thinking, okay, we'll start with this, we can build a ton of useful stuff already, and then as we learn more familiarity with how to use these covenant type structures and so on, we can start to realize where we need a little bit more power and a little bit more flexibility and maybe add those in later on with another fork down the road.\nBut lots of people are very wary about opening Pandora's box and doing something really complicated on day one.\nI mean, none of this stuff is going to break Bitcoin, but some of the stuff is just too complex to rationalize about what its limitations are, whereas CTV is quite tightly scoped and also very well studied.\nIt's been around many years now at this point.\n\nChristoph Ono: 00:14:56\n\nSo a question there around the two use cases that you found.\nSo the multi-sig vault, I find that pretty easy and that seems like it's a user-facing thing.\nYou can just say, these coins here, they can be spent, but there is a delay, before they can be spent.\nSo if someone else tries to spend them, then they either can't do it or they have to wait, so I'm going to notice it.\nI'm going to get them into safety because everyone else has to wait.\nThat's kind of user facing use case that is easy to understand.\nThen the scaling thing, that almost seems like it's something that users might never even see that could potentially be happening behind the scenes, right?\n\nOwen Kemeys: 00:15:42\n\nYeah, so this is where it starts to get complicated.\nAnd I think it might be useful to think of it from the two different directions.\nOn the one hand, users might build these trees themselves.\nThat's if you've got a number of payments you want to make to several different people for different reasons, but maybe not all of them right now, but you know I'm gonna pay rent next month and the month after and the month after.\nSo maybe next time I get my salary arrive, I could construct a tree myself, and that turns into just a regular receive address that I could give to the payroll company.\nThey pay to that address, and I know I've got my rent payments for the next six months kind of locked into the chain ready to go.\nI don't need to make another on-chain transaction just by giving them that one address.\nSo that's an example of a user wanting to construct a tree, and I can kind of picture in my head what a UX for that might roughly look like.\nI don't think it's that difficult, that's somewhat interesting.\nBut the interesting ones are where the tree structure is built by someone else, and it allows you to be paid inside that tree.\nThat's the really tricky one and that's where work needs to be applied.\n\nChristoph Ono: 00:16:50\n\nGotcha.\nRight now, if I want to do six months of rent payments, I can make six different transactions and batch them.\nWith this CTV, then I could basically bundle them all, compress them into like a single address or so, and then they would automatically be executed as time goes by.\n\nOwen Kemeys: 00:17:13\n\nThat's one way of doing it.\nIt's more... you see this stuff is difficult to explain, even having written the thread about it.\nYeah, you can think of it as a compression thing.\nThat address will contain, if you've built it this way, will contain rules like - I can only spend this many coins once per month - or something like that.\nSo I can make my rent payments by giving the pre-signed transaction to my landlord, rather than having to actually send on-chain, I can just give him this transaction and that is enough information for me to look at my address I created and see that he now has all the information necessary to spend that one month's rent worth of coins from it, and I can't spend them anywhere else.\nSo what I'm doing is I'm just revealing some information to him and then he's able to claim them whenever he wants, and he knows that I can't spend them any other way either.\nThat's how it's useful for scaling because you're moving the ownership changes off-chain, you're changing it from needing to stamp a transaction onto the blockchain to needing to just reveal some information to the counterparty that they didn't know before.\nOnce they receive that information, they know that they have all the information necessary to claim it and that I can't spend them in a different way.\n\nMogashni: 00:18:32\n\nI have a question.\nSo, sorry, my name is Mo from the Bitcoin design community.\nI'm the UX researcher here, very random jumping into the question.\nI was just thinking for a very long time trying to piece everything together.\nYou said, so this code that they share allows the transaction to happen completely off-chain.\nSo let's say I'm the owner of the code, and then I hand that code over to you, and then we enter into an agreement for X amount of Bitcoin.\nWhat is preventing you from actually spending, you gave that to me, but how do I know that that amount of Bitcoin actually exists and that you don't just go spend it?\n\n## Cold Channels\n\nOwen Kemeys: 00:19:18\n\nThe addresses encode the spending conditions for coins that end up there.\nSo at the moment, all the addresses you generate with your regular today's wallet will say, you're not allowed to spend these coins unless you present a signature from this private key, right?\nThat's what we're all used to.\nIn a world where we're using CTV, the address that you generate will say - you're not allowed to spend these coins unless the spending transaction looks exactly like this, that I've predefined.\nSo to the rest of the world, on-chain it just looks like some coins going to some address, but as soon as I show someone the spending transaction, which would be sending coins to the landlord or whatever, then he is able to verify that that transaction, that spending transaction, is the only spending condition for that address.\nSo if he's not able to verify that, because maybe you've got some secondary spending condition where Mikey can still spend it after two weeks or something, where you can try and rug pull, if he's not satisfied that that spending transaction is the only way to spend those coins, which he can calculate for himself as soon as he had said information, then he should not consider himself paid.\n\nMaybe it might be easier to have a look at another example, which is the cold channel example, because that's a much more immediately visualizable, useful thing.\nI mean, we can't read it in the background, Christoph, but maybe you can scroll up a little bit, because that's easy to understand.\nThe cold channel construct is something useful for Lightning.\nSo at the moment, when you want to open a Lightning channel, you need to deposit coins into the multisig address with the channel partner, and there's normally several stages of on-chain hops before then, because you know you're getting paid your salary or something, you're not going to have that sent straight to the Lightning address because you and the channel partner need to negotiate in advance what the balance is going to be, and get everyone to pre-sign all the revocation transactions, all that stuff, so you don't tend to deposit straight into the Lightning channel address today.\nMaybe it goes to your cold storage first and then later on you decide you want to have some more liquidity on Lightning, so you send it - and then all the node packages tend to want you to send it into the node's single custody first, so it can then do the negotiating stuff with the channel partner.\nThen only once the negotiation stuff is agreed, do you then deposit coins into the channel address, and then you can start using it.\nBut that's using several on-chain transactions just to get this off-chain transacting started.\n\nWith CTV, we can do this thing called a cold channel, where using a couple of different spending routes, which are in one of the other slides, you can create an address that is a Lightning channel already, but the counterparty doesn't know about it yet.\nTo everyone else in the world, it just looks like a regular deposit address.\nThen you can leave it there for months, years.\nNo one else knows there's any (other) way to spend it, it just looks like a regular signature address.\nBut when you decide you want to start spending those, you can reach out to that counterparty and say, hey, by the way, this address here, this was actually a Lightning channel between us the whole time.\nIf they're responsive, then you can start using it like a regular channel without any more on-chain transactions happening at all.\nSo you don't need to move funds from that address into a channel address or anything.\nIt's already a channel address and all that needs to happen is you give a little piece of extra information to the channel partner, and now he has everything necessary to start operating it as a regular channel with you.\nSo why that is interesting is not only does it cut out several on-chain transactions, but it also means that you can treat this as cold storage basically.\nSo you might as well receive all of your salary payments into these cold channels, because you get a free option to start using it as Lightning immediately at any time that you so wish without a security trade-off.\nWhereas today, your channel partner knows all the channels that you have together, and that means that they have the opportunity to try and steal from you, because Lightning is this sort of like cooperative, but also adversarial protocol.\nSo you remove the adversarial element until you reveal the information to them.\nThat works because when you give the counterparty the information about all the CTV structure, he can see that the only ways to spend this coin are either through Lightning, which is just 2 of 2 multi-sig, or through the secondary path you can take is the justice transaction route.\nHe now knows that when you go that route, he will see a transaction on-chain that starts a time lock where he can spend it immediately, but you can't.\nAll the parties can have enough information to just start treating that existing address as a channel, without doing anything more on-chain.\nSo you save a couple of transactions, but you also flip the incentives around.\nAnd that's why it's really interesting.\nMaybe there's questions?\n\nYashraj: 00:24:27\n\nYeah.\nOwen, so I think what you said, it made a lot of sense, it saves cost, and there is safety, and all of that stuff.\nHow do you think existing user flows will change if we deployed cold channels?\nThat's the first question.\nThe second is, are there any new user flows that are enabled by this?\nOf course the first question was how does it change the existing user flows, for example in Phoenix we have deposited on-chain, so there is that kind of a user flow where you have to deposit funds first.\nBut then the way that Muun Wallet does it - is that it does these submarine swaps and kind of avoids it all together.\nSo it seems like around the channel stuff, there are a bunch of user flows, how would you say CTV impacts those, or improves those?\n\nOwen Kemeys: 00:25:32\n\nSo how I think it would look is, first of all you construct this cold channel by yourself without needing anyone else's cooperation.\nYou just need the channel partners, public key or something like that, something that they publish that isn't risky to them.\nSo this would probably be like an LSP and they would probably publicize that they do this because it gets them more liquidity.\n\nSo what I imagine the UX sort of flow would look like is - you need to construct this address first of all, because you're going to give it to your payroll process, or your exchange, or whoever to do the withdrawal to, so you would need to pick who the channel partner is going to be, which LSP, which probably seems like a dropdown or something like Async or Zeus or whoever.\nAnd then it seems like the wallet in the background would do all of the CTV construction stuff, because the user doesn't even need to see or care about any of that.\nIt's like a standard template that you would just deploy.\nThen the outcome of that would just be an address that you just give to payroll or whoever, and it gets paid to.\nI think you would need to, in the sort of the wallet balance area of the app, I think you would need to keep these in a segregated spot because they need to be almost like unsealed or something to start using them on Lightning.\nSo you wouldn't want to just dump it into the regular Lightning balance, because you can't start spending them right now.\nA step needs to happen between the receiving and the spending.\nIt's just that that step does not require an on-chain transaction, just requires communications with the LSP.\nSo it seems to me you naturally end up with like a cash account or something, which is your actual Lightning available sats right now.\nThen maybe like checking account or something, which is like sats that are available on Lightning, but you need to unseal them first, or we need to come up with a term that makes sense to people, but they're ready to go, you need to complete the communications loop first.\nSo they're sort of like reserves or something like that.\nThe unsealing seems like it could just be a regular button or something that starts a communications loop with the LSP, and you ping them and say \"hello are you awake\", and they go \"yeah we're still here, everything's fine\", and then you go \"Bang here you go, this was actually a cold channel with you the whole time\".\nYou're happy to start spending it and they go \"yeah sure, whatever\", and then you can move it into the available funds.\n\nYashraj: 00:28:01\n\nSo would it mean that wallets and even users might not have to think about an on-chain balance and a Lightning balance as two separate things, and they can just like start thinking about them as one and the same thing?\n\nOwen Kemeys: 00:28:24\n\nI'm trying not to put my personal...\n\nMichael Hasse: 00:28:27\n\nI think you would still have to top up this kind of, let's say, Lightning balance.\nIt wouldn't just be immediate.\nYou wouldn't need to deposit, but you would still have probably two different, let's say, buckets or balances.\n\nOwen Kemeys: 00:28:47\n\nYeah, I wonder whether these might actually replace the whole on-chain balance thing, because that's not awfully useful in Lightning at the moment, right, because you need to go and make another $5 transaction to start actually using it.\nMaybe these would just supersede the on-chain balance stuff.\n\nYashraj: 00:29:02\n\nRight, because right now in Phoenix wallet, you try to make some transactions - from the user perspective, it seems at some random time, the wallet will tell you that no, now you need to pay $5 or something, and we don't know what's happening in the background - is the channel being made larger and all of these things.\n\nWhat it seems like you might be saying is that the users will never have to think about that again.\nIt will simplify all of those those mechanics.\n\nOwen Kemeys: 00:29:42\n\nYeah, in an ideal world I think so.\nI mean there is still a trade-off to make.\n\nWhat we didn't talk about already is in the case where you've got one of these cold channels, you deposit some funds there, and then you call the LSP that it's a channel with and say - \"I'd like to start using it please\", and they don't respond for whatever reason, then you need to move from that address to another one, because as part of the assurances that you need to provide to the LSP that you're not going to rug them, that means that the only routes to spending the cold channel are the cooperative case, which is the multi-sig like now, or the \"something's gone wrong and I need to move on\" case, which adds a time lock, which is how he's got an assurance that you can't rug pull him.\n\nSo if he doesn't respond, you do need to make an on-chain transaction and move to another address.\nSo we will still have to factor that in, but hopefully with a professional LSP, this is a very rare occurrence, like in the Phoenix situation.\nPhoenix is so tightly integrated with ACINQ, they're not ever going to be offline, it shouldn't really ever be an issue.\nBut you do need to have that in the back pocket somewhere like how you would resolve that.\nBut it should be quite rare and it's kind of no worse than today where you have an on-chain balance that you still can't use without spending some money on another transaction anyway.\n\nYashraj: 00:30:59\n\nSo I would still be able to spend these funds for some other purpose, but I would have to do something else.\n\nOwen Kemeys: 00:31:09\n\nYes, you need to make an on-chain transaction to move out of the cold channel construct and into another address, which could be a different cold channel with a different LSP, like in one swoop.\nIt doesn't have to be moved out to a regular private key address and then moved on again.\nYou can chain these things together because they're all just addresses on-chain that don't need negotiation first.\n\nChristoph Ono: 00:31:38\n\nSounds like we have two potential user flows we could mock up here.\nOne, the vault, and then the cold channel one.\nThat would be really interesting to see some UI explorations on those, on exactly what we just talked about.\n\n## Payment Trees\n\nOwen Kemeys: 00:31:51\n\nI think that's a good starting point as well.\nThe really important work to do later is the tree stuff.\nIt makes sense to start small.\nA cold channel is basically a vault structure on top of with a multi-sig as well, you've just reshuffled who the parties are, but everything is basically either starting time locks or using keys to spend a different way.\nIt might make sense to come back to the tree stuff later on because it's just a bigger version of all the stuff that we're covering already.\n\nChristoph Ono: 00:32:31\n\nYeah, I tried to understand the tree stuff.\nThere's a point where I just didn't get through it.\nEspecially once everyone's in their trees, how you have any assurances of anything in there.\nBut I don't know, how's everyone else doing with the tree stuff?\n\nMogashni: 00:32:53\n\nYeah, I'm going to sit in the tree right now and enjoy the view.\nThat's where I'm feeling the trees right now.\n\nChristoph Ono: 00:33:00\n\nBut what questions do you have?\nWhat can we clarify, or what would you like to?\n\nMogashni: 00:33:06\n\nI think if it's explained in an example, if someone gets paid, I would be more able to understand it if it's an actual mock-up in a user flow, it would make a bit more sense to me.\nI'm not, it's just not quite there.\n\nChristoph Ono: 00:33:28\n\nWhich part?\n\nAndrew Lawton: 00:33:31\n\nI'm sorry, I'm gonna agree with what you just said, Mogashini, and ask if someone could just step through a narrative.\nJust tell the story of how this thing works with the rent.\nLike the example, if I think, okay, I want to post-date a bunch of rent.\nIs that a good place to start?\nI've talked with my landlord, and I'm going to stay in this apartment for a year, but then all of a sudden the water heater goes, and I have to move.\nHow would I run that scenario at month six, even though I gave him a bunch of post-dated checks, how do I stop from month six to month twelve, and move and not pay him until he fixes the water heater?\n\nOwen Kemeys: 00:34:30\n\nI think the rent example was not a good place to start.\nI wanted to move to the cold channels, because I think once you understand that a cold channel is just an address, the same as any other address, but it has Lightning like optional functionality, then you can start to see how that is a very useful thing for everyone to have for every payment they receive from anything, because Lightning payments are just better if you can make it work.\nThe main hurdle is that you need to get the sats into Lightning in the first place, and we're kind of removing that concern.\nSo rather than the landlord rent example, if you think of it as next time I make a withdrawal from an exchange, I can only give them one address.\nLet's say they're a dumb exchange that doesn't do Lightning or anything yet, they just do boring old on-chain transactions to one address, and they're going to charge me 50 bucks to withdraw or something.\nWhat I could do is withdraw to an address that is actually a tree of my own of which one branch is a big cold channel right now.\nAnother one is like my backup cold channel that I might start using in a couple of months or something, just reserves.\nAnd then another one is to my vault and that's 50% of the withdrawal or something.\nYou can do all those three things in one go with one address that the exchange doesn't need to cooperate with at all or know anything about.\nThey don't care.\nThey just send sats to an address and you're done.\nIt's the lack of needing cooperation, I think, is what's very useful about these.\nThat you don't need them to know or understand what you're doing at all.\nAll the clever stuff is happening on Bitcoin itself, and the person spending to you, the payer, just sees an address as complicated as you want.\n\nAndrew Lawton: 00:36:18\n\nThis would be more like, okay, I got paid and I have a checking account and three savings accounts.\n\nOwen Kemeys: 00:36:24\n\nYeah, you could easily structure it that way.\n\nMichael Hasse: 00:36:30\n\nYou could probably even say that when the payment comes in, it goes into the checking account.\nFrom there, at the end of the month, whatever is left, or a certain amount goes into a vault.\nTwo payments go to your children for their, I don't know, chocolate and stuff like that.\n\nAndrew Lawton: 00:37:00\n\nBut if my child has been bad and they don't deserve the chocolate, can I reverse?\nCan I switch it off?\nWe're getting at the essence of the covenant, the promise, and the promise being broken.\n\nOwen Kemeys: 00:37:15\n\nYeah, so one way you can think about that is you can have multiple different spend paths, which is true today.\nThink of a multi-sig, you could have a multi-sig that requires two of three to sign today and anytime, or one key, but I have to wait six months before I can spend it that way.\nThat's an example everyone's fairly familiar with.\nYou can do the same thing and have a CTV spend, which is you must use the exact template transaction, which is some goes to the kids, some goes to the landlord or whatever.\nOr the alternative is maybe a multi-sig where the landlord and the kids and me...\nThat's maybe isn't a great example.\nThe point is you can fuse these two things, you can have a templated path or you can have a multi-sig path, and that multi-sig, you can think of that as everyone having a veto vote.\nYou know, we all have to agree, if we all agree, then we can spend this pot of sats, however the hell we want.\nOr if we don't agree, then we can all trust the template path because that's locked in and committed already.\n\nAndrew Lawton: 00:38:20\n\nI see.\nYeah, yeah.\nSo, again, I'm staying with the narrative here.\nSo, my child did not do their homework, so they don't get the chocolate.\nMy wife and I are on the multi-sig and we both agree, okay, no, he can't get the chocolate.\n\nOwen Kemeys: 00:38:41\n\nYes, it would work like that, but I don't think it's a great example and that's maybe more confusing.\n\nYashraj: 00:38:47\n\nSo, Owen, I feel with these covenants it means to make a promise and all of that stuff, sometimes you might want to break, you want to be careful before you make a promise and so if you do a transaction structure and then you don't want to do that, is it possible in scenarios to commit to something that I will do this, but then have the option to say no I don't want to do it.\n\nOwen Kemeys: 00:39:31\n\nOnly if you've built it that way.\nSo remember, the address encodes the spending conditions, so you've decided what conditions should apply for you to be able to move those coins.\nThe covenant is almost more useful as a way to prove to someone else that I can't spend it any other way.\nSo maybe another example, and this is still a little bit abstract, it's not that useful by itself, but we can use it for payments between three people.\nWe've already covered the compression thing, we can give this one address to the exchange and it has many different things inside it.\n\nImagine that there are three branches and they are each branch is owned by one particular person.\nAlice, Bob, Charlie.\nLet's say we set it up so that the template route is - exactly one third goes to each member.\nBut there's also a multi-sig route that must be three of three.\nAnd that multi-sig route, you can spend to anywhere that you want.\nSo we can all fall back on \"the everyone gets exactly one third equally\", because we know that that can't be removed unless we all agree.\nBut if we do agree, we can spend it any way we want.\nSo if Alice needs to pay Bob for something, and Bob needs to pay Charlie for something, and Charlie does something else for Alice, whatever, we can change the amounts.\nIt doesn't have to be one third to everyone, it could be 90% to Alice and 10% to Bob and nothing to Charlie, as long as we all agree on that.\nAnd if we all agree, we can sign a transaction to spend from that initial address we gave, then it moves on to spend to wherever we want, because we all agreed.\nSo, you know, that's not really that useful in the real world, but as a principle, maybe that explains better, how this stuff can work.\n\nYashraj: 00:41:15\n\nYeah, yeah.\nI just heard your example in detail, I think you're absolutely right.\nThat's not exactly giving the picture of what CTV can do, it seems in this case it would be CTV plus some of the other taproot things and combine them to get this use case.\nThis flexibility, I think that's the point here.\nYeah?\n\nOwen Kemeys: 00:41:41\n\nYeah, it's not that useful by itself, but it's very powerful primitive when we combine it with other things that we have.\n\n## Possible Use Cases\n\nYashraj: 00:41:50\n\nRight, so I was trying to think about it in the lens of something that you mentioned earlier.\nWhat are the new new use cases it enables?\nHow does it improve some of the existing use cases?\nAnd what else?\nMaybe it can do the exact same use case, but with improved privacy, or lower costs, or things like that.\nSo can we try to think about the use cases and CTV in these three categories, just to be able to understand it and the applications in a more concrete way.\n\nOwen Kemeys: 00:42:40\n\nOkay, so that example I just gave with the three people, that's a very small example of what's called a payment pool, or I kind of use the word tree sometimes, because that's more how it's actually structured.\nBut these can be scaled up to whatever size, the limit is how large do you think you can reliably collaborate between people.\nThree sounds probably pretty easy, especially if you've got no time constraints.\nTen, probably fine.\nTheoretically, hundreds, I guess, if you're like not in a rush, maybe.\nAlso remember that those inside the tree structures, inside the CTV, they're just payments to addresses, and addresses can also be CTVs. So each branch can be another tree in itself that you don't even need to know about or care about.\nLike that payment to Alice might actually have had 500 branches coming off of it, some of them were vaults, and some were cold channels, and some were all sorts of other stuff.\nWhy this is powerful is because this allows us to scale Bitcoin significantly by pushing all this transacting off-chain but with on-chain level of assurances still.\nThere have been some papers even demonstrating that, things get a little bit unwieldy for sure, but in theory you can do global scale with this stuff if you can have a tree with a million people in, which is done by using some timeouts and things to force roll over at particular time so that everyone can rely on stuff without having to get those million people to actually collaborate on everything.\nSo this is the scope of what we're talking about here.\nBut we need to start small with things we can design right now for sure.\n\nYashraj: 00:44:17\n\nYeah, yeah.\nI hear what you just said, so this is scalability and improves privacy.\nLike these use cases could be, so if it's just one UTXO shared by a dozen people, and then there is a spend from that, you don't know who was the owner of the previous one and who's the owner of a new one and things like that.\n\nOwen Kemeys: 00:44:47\n\nSo with what you can surveil on-chain, you're just seeing one UTXO, and we're all kind of familiar with it with Lightning already where it's one UTXO on-chain but it's owned by two people, but the sats in it - when we broadcast the closed channel state - and I have 5,000 fewer sats you know that I've paid them to the channel partner, but you don't know where he sent them onto because I've routed it through the whole Lightning network, so the privacy improves significantly.\nA simple way to think about it is that you have that effect but with more than two people inside that UTXO, and you actually don't even know how many people are inside that UTXO.\nIt could be two, or it could be a million, there's no real way to know.\nYou get a lot of privacy for free.\nNot perfect, sure, but better.\nYou get the payments kind of flexibility stuff in the same way as we do with Lightning.\nBut I think that the most compelling case for CTV was the scaling stuff, which is what a lot of people didn't really understand until about six to twelve months ago, just because it's very abstract and hard to think about.\n\nMichael Hasse: 00:45:52\n\nLike the movie Inception, you can have a dream in a dream in a dream, right?\nThat's the forest for the trees.\nI found it a pretty good visual in the tweet thread.\nYeah, I'm going to definitely next week work on the vault thing because it's basically what I, in the hackathon, like a year and a half ago, worked on for the inheritance topics where you have a dead man's switch that keeps transactions from happening.\nBut you have to have previously on-chain transactions for everything, and you couldn't have something like these time locks where you have, let's say two weeks or a month before to reclaim the funds to an emergency address.\nSo that's definitely something that I'm gonna work on.\nBut I had a question - if I have, let's say, one Bitcoin and if I create a transaction, or have a kind of a setup where if I spend less than 0.1 Bitcoin, then I need only one signature?\nIf I want to spend more, I need two or three.\nIs this something that would be also a use case for these kinds of things, no?\n\nOwen Kemeys: 00:47:37\n\nYes, so you can't do that today, but you could do that in a covenants world.\nThat would look like having several different possible spend paths, one of which was a template - the spend must be 0.1 BTC to address A, with key A - and path 2 might be you need keys A and B and it goes to address C for 0.2 BTC or whatever.\nYou get the gist.\n\nMichael Hasse: 00:48:01\n\nExactly.\nSo we have a reference design Christoph, for exactly this use case.\nSo somewhere we have exactly that, where you have a condition that if it's less than something, only one signature is enough.\nBut these are, I mean, these are the practical use cases, I'd say.\n\nChristoph Ono: 00:48:28\n\nNo, that's a different, that's the assisted custody one, where you have an auto signer that signs transactions below a certain amount to facilitate low amount payments.\nThen for larger amounts that you're not comfortable with being automatically approved, that's where you need to get your extra keys out, but it's the same key configuration there's just the software kind of enforces them.\n\nOwen Kemeys: 00:48:54\n\nSo in that example you're trusting the signer software or the custody partner or whatever to not sign if they don't meet your terms.\nThis is what CTV kind of does is it allows us to take things that were previously trusted and make the chain be the only trusted thing instead, which is obviously an improvement for many things.\n\nChristoph Ono: 00:49:15\n\nYeah, so I feel like I get some of this stuff.\nSo I was just trying to diagram a few things here, I made lots of other diagrams here earlier today for explaining fiat over Lightning with synthetic fiat and all of this stuff.\nSo I'm just reusing those.\nSo, here's my understanding.\n\nSo Alice comes up with a bunch of rules.\nLike, I can spend these 2 Bitcoin after one year, but Charles, he can spend 1 of those Bitcoin after one month, and he can spend another 1 Bitcoin after two months, whatever the rules may be.\nThen I kind of compress them and turn them into this address.\n\nThen I tell Bob, Robert, who is my employer, so I give him this address, it looks like general address, and they're like, \"Okay, here's your salary.\"\nThat means these Bitcoin here will be locked to the conditions saved in this address.\nSo now we have rules and we have bitcoins tied to them, and from then on, all interactions with these Bitcoin are governed by these rules.\nNo one knows about those rules, only Alice does.\n\nSo my landlord, which is this guy here, Charles, I have to tell him about those rules.\nSo I have to give him an address.\nAnd it's like, here's my address, there are two Bitcoin in there, and here's a rule that I baked into this address, and Charles can verify from the address like that, that's actually accurate, and there are no other rules, where Alice can secretly take things away.\nAnd he's like, okay, cool, I can spend one of those Bitcoin next month and then another one in two months, right?\nBut that's it.\nLike no one can change these rules anymore.\nAnd we're all kind of tied to them.\nAnd that's kind of it.\nSo that's my understanding.\n\nHow do we get here from trees and trees and billions of scale?\nMaybe it needs another 400 diagrams.\n\nMogashni: 00:51:16\n\nThis makes sense.\nThis makes a lot of sense.\nI needed those visuals.\n\nMichael Hasse: 00:51:19\n\nAnd another call probably.\n\nYashraj: 00:51:22\n\nBut does this one require CTV, Owen?\n\nOwen Kemeys: 00:51:27\n\nYes, because CTV is what's being used to say - you can only spend one Bitcoin.\nToday, you can do time locks, sure, but you can't constrain how much, all you can do is completely unlock the address or not have it be spendable.\nWhereas with CTV, you can say how it can be spent, in CTV is a specific type of covenant that is all the terms of the spending transaction are built in already.\nSo it's _how much_ and _where to_.\nWith some of the more flexible covenant ones, you can pick and choose which bits of the transaction you want to constrain.\nIt's easier to think about if you're using CTV as a starting point, where it's just - this is exactly how it must be spent and nothing else.\n\nChristoph Ono: 00:52:09\n\nI had one question on here, and that wasn't clear to me.\nAlice can say, here are the rules, but what is the unique thing that only allows Charles to spend them?\nWhy cannot Alice not spend through those rules?\nThere has to be some secret that only Charles has where Alice can't give everyone else.\n\nOwen Kemeys: 00:52:30\n\nIt's not that Charles can spend it, it's that one Bitcoin can go to Charles's address after one month.\nSo anyone who has this information can just broadcast it straight away.\nThink of it like a PSBT that can't be spent differently.\nThe rule is the Bitcoin has to go to Charles's address.\n\nChristoph Ono: 00:52:47\n\nSo Alice has to know Charles's address in advance when she comes up with those rules?\n\nOwen Kemeys: 00:52:52\n\nYes.\nThat's one of the useful limiting factors of CTV because you can only bake as much in as you can coordinate in advance.\nThat's what stops things from going completely off the rails.\n\nChristoph Ono: 00:53:03\n\nOkay, so we need a thing here - where Alice talks to Charles and says \"Give me some addresses.\"\nThen she can bake those in the...\n\nOwen Kemeys: 00:53:25\n\nYes.\nAnd who knows what the addresses of Charles's are, they might be just vault addresses, or they might be regular keys, or they might be trees, or they might be vaults, or they might be cold channels, or God only knows what he's doing with them.\nAs far as you're concerned, it's just an address.\n\nMichael Hasse: 00:53:39\n\nOkay.\n\n## Other covenant proposals\n\nYashraj: 00:53:42\n\nOwen, I think we spent the whole hour talking only about CTV, and there are like a dozen more proposals and stuff.\nWhat's the...\n\nOwen Kemeys: 00:54:03\n\nI lost the tail end of that question.\n\nYashraj: 00:54:05\n\nOh, sorry.\nI was asking what about some of the other proposals?\nThis is just all about CTV.\nWhat about but what about LNHANCE and `OP_VAULT` and CSFS (`OP_CHECKSIGFROMSTACK`)?\nThere are so many of these, I don't even know what those are.\n\nMichael Hasse: 00:54:28\n\nYou have to wait for the next tweet thread.\n\nOwen Kemeys: 00:54:32\n\nLNHANCE packages CTV plus CSFS and something else (`OP_INTERNALKEY`) to make a suite of soft forks bundled into one that are particularly very useful for Lightning.\nCSFS, just a way to think of it holistically is that CTV is the most constrained version because you specify everything, every element of the spending transaction in advance.\nCSFS and other proposals allow you to say, maybe I constrain the amount, but not the destination, or vice versa, but you're generally making it more flexible.\nThere's other technical differences, like exactly how they go about that inside the code, and which bit gets hashed when, and which bytes are used for that, whatever, and so on, which is way beyond me.\nFrom an object level, as far as we in the UX world are concerned, CTV is like everything must be defined in advance about how this gets spent, and other covenant proposals are where you can choose which elements you want to constrain and how.\nThat makes a design space even larger.\nI haven't even started thinking about those yet.\n\nMichael Hasse: 00:55:42\n\nOne of these things I seem to remember, and I hope I remember it correctly, is that you could leave out which UTXOs should be spent, because you don't know in advance.\n\nOwen Kemeys: 00:55:56\n\nAnd that's any AnyPrevOut, APO (`SIGHASH_ANYPREVOUT`).\n\nMichael Hasse: 00:55:58\n\nYeah, probably.\nIt's a big design space.\n\nOwen Kemeys: 00:56:07\n\nYeah.\nI can't advise awfully much on anything else besides CTV at the moment, because it's even larger to think about.\nI know any AnyPrevOut is particularly useful for Lightning because it allows you to not need to keep holding on to all these old channel states just in case someone broadcasts a really, really old one.\nYou can just keep hold of the latest one in the case that the channel goes wrong and you have to force close it suddenly somehow, the latest one is enough.\nYou can forget about everything else.\nBut I don't know how that is used in other more interesting covenant constructs yet.\n\nMichael Hasse: 00:56:41\n\nRight.\nYeah, we would probably need to know what we want to do before, and then only then can we say, okay, is CTV enough or do we need something else?\nSo probably reverse the reasoning there a bit.\n\nOwen Kemeys: 00:57:04\n\nThat's one of the arguments that gets made and why there's a lot of discourse about this stuff, because some people want the really expressive forms, some people want the really limited forms of covenants, and I'm in the camp of the really limited form because there's already a lot of very interesting stuff we can build with it.\nWe also know it's about as safe as you can get in terms of soft fork upgrades, because it's so limited in scope and well studied.\nThen as we build more things with it, we can start to see where it doesn't quite do enough, and then we have more confidence about what extra things we need to add without breaking stuff.\n\nMichael Hasse: 00:57:41\n\nYeah, this was super helpful.\nI really learned a ton today and from the threads.\nIt was really, really helpful.\n\nChristoph Ono: 00:57:51\n\nYeah, for sure.\nWe could do a design huddle where we collaboratively try to design some flows for it.\nI'm thinking about basic stuff where you look at your coins in there.\nYou're going to have to look at your balance or your transactions, and there has to be a little thing that says this one has extra rules attached, and then you'd have to somehow see those extra rules.\nThen you would have to think of the whole backup flow, because this is off-chain data so that it doesn't get lost.\n\nMichael Hasse: 00:58:27\n\nWe could also in a design huddle have these real world use cases, like the one with the rent, and the one with something else, and then we give that to Owen.\nHe then makes the table with all the different covenant proposals and he said \"okay you can do that with CTV, with AnyPrevOut\" or with all these different things, so we can compare them.\n\nChristoph Ono: 00:58:58\n\nOkay, and here in my background, to wrap things up are some AI generated trees made of Bitcoin addresses.\nAt least that's what Midjourney thinks it looks like.\nLooks more like broccoli, but that can be our next topic.\n\nOwen Kemeys: 00:59:14\n\nHey, That's cool.\n\n## Questions\n\nV: 00:59:21\n\nYeah, I had a question.\nI got to know the idea of it, but I have a small question.\nI know that all of this is off-chain, and how will he spend it?\nWhen the owner or whoever gets the amount, he can spend it like that, or he needs to go and convert it into on-chain, and then he can spend it?\n\nOwen Kemeys: 00:59:50\n\nYeah, that's the million dollar question.\nThis is where a lot of people get stuck, including really smart developers because it's hard to visualize.\nThink of all the stuff you do with the covenants, the CTVs or whatever, as how far you can organize things in advance by collaborating and working together.\nSo, you know... no, I won't give an example, that's more confusing.\nThere's only so far ahead that we can plan and collaborate and things can actually work.\nOnce you reach the end of that and you need to change the structure altogether, you will need to go on-chain, but it doesn't have to be that every single member of the shared UTXO have to all exit out of the chain and then all start again.\n\nYou can work together and say, if you're doing a payment pool structure, and Bob wants to leave or something, Bob needs to do something he can't possibly do inside this structure anymore.\nThe rest of us can be like well I'm fine still staying in here, I don't need to get my own UTXO on-chain and then organize pooling together again in another one.\nWhy don't the five of the rest of us, we'll all just hop across at the same time that Bob exits, and start another pool or join an existing pool somewhere else.\nThe way we use Bitcoin today is kind of quite crude and simplistic, and we need to start realizing that the chain is for _logging commitments_ that you can't go back from, basically, rather than _ownership transfers_, because we can now achieve ownership transfers off-chain, but there just comes a point where we will need to do something that we can't do off-chain and we can capture that change in an on-chain transaction, but it doesn't have to be splintering it into a million pieces and starting from scratch.\nWe can still collaborate to move from one tree to another, but this is the stuff that's super hard to visualize, so I may not have explained anything at all.\n\nV: 01:01:50\n\nYeah.\nOkay.\nAnd one more question.\nIn the start, you said that it's necessary that they respond back.\nWhat was that about?\n\nOwen Kemeys: 01:02:03\n\nIt's necessary that there's what, sorry?\n\nV: 01:02:07\n\nAlice has the rules, set up the rules, and there's a landlord.\nSo when it goes to him, he'll have to respond back, something like that.\nI didn't get that idea.\n\nOwen Kemeys: 01:02:31\n\nI wish I'd never said this landlord example because I think it's more confusing than helpful.\nChristoph is showing some stuff on the screen.\nWas it about that?\nWhat's on the screen right now?\n\nChristoph Ono: 01:02:43\n\nI think the question is like, what does Alice actually give him?\nThe understanding is she gives him a ready to broadcast transaction almost.\nIt's like, hey, here's information that you can broadcast, but you don't have to do it now, and it's not valid right now, but in a month, you can do so.\nThen the landlord, Charles here, he just has to keep that transaction or that piece of information and then months later just plug it into his Bitcoin wallet and say \"here, broadcast that, I want this to be executed,\" and then the Bitcoin will be transferred.\n\nV: 01:03:24\n\nOkay so he has to reply back to Alice that I want to use it?\n\nOwen Kemeys: 01:03:29\n\nNo, she she will give him this little chunk of information.\nSo think of it as if we were doing it with PSBT, with signed transactions.\nIf we weren't using covenants, she could give him a pre-signed transaction and say, look, here's everything you need to withdraw some coins from my address and send them to yourself, signed by me.\nBut he can't trust that, because she could spend the coin differently before he broadcasts it, so he has to broadcast it now and get it mined, to be sure that it's his.\nBut in a world of covenants, she can say, here is that same PSBT, but you can also see that the address they're in, I can't spend them any different way than by broadcasting this transaction that sends them to you.\nSo you're using the transaction as the key that opens the lock now, rather than just a regular key.\nBy doing that, he may not even need to bother broadcasting them at all until he needs to go and buy a car next year or something, because he knows they can't go anywhere.\nThey're effectively, they are his.\nThey're not able to be moved by anyone apart from him.\nSo although they're not in his address yet, he can consider them his because there's nowhere else they can go.\n\nChristoph Ono: 01:04:36\n\nYeah, I guess the one addition is that it's tied to that piece of information.\nIt's not an address generated by his wallet.\nSo he would have to make sure to keep that piece of extra information, because if he loses it, then he cannot get it back.\n\nOwen Kemeys: 01:04:53\n\nBut I don't think that's a huge deal, because you already need to preserve a blob of information, the user doesn't even see the key anymore.\nThe wallet software is holding on to that key for dear life because if it loses it, it can't sign anything anymore.\nThis is just in an abstract sense, I think it's just a different blob of information the wallet needs to hold on to and make sure it backs up to the cloud or whatever.\nIt doesn't even matter if you keep it in iCloud or anything because it's not sensitive, it can't be abused by anyone, it can only send the funds to you.\n\nMichael Hasse: 01:05:26\n\nOne design challenge that I think will be for the recipient, they have to be able to inspect this address, right?\nOr what it does somehow.\n\nOwen Kemeys: 01:05:42\n\nYes.\n\nMichael Hasse: 01:05:43\n\nSo wallet software would need to surface this information in some kind of usable way.\n\nOwen Kemeys: 01:05:59\n\nYeah.\n\nYashraj: 01:06:00\n\nI think about it a bit like  PayJoin, just like one set, because that also involves the PSBTs and all that stuff.\nSo basically Charles could construct the transaction or like construct something, send it to Alice and then she does her stuff, adds her keys or signatures or whatever, and then she sends it back, and that's like the transaction that's like ready to broadcast.\nIs that the right way to think about it at all?\n\nOwen Kemeys: 01:06:35\n\nI'm not 100% sure.\nWhat we can say is that when Bob receives the spending transaction that we haven't broadcast yet, he could even himself go and reconstruct the address.\n",
    "body_type": "markdown",
    "created_at": "2024-01-19T00:00:00.000Z",
    "domain": "https://btctranscripts.com/",
    "url": "https://btctranscripts.com/bitcoin-design/learning-bitcoin-and-design/covenants",
    "tags": [
        "covenants",
        "ux",
        "op-checktemplateverify"
    ],
    "media": "https://www.youtube.com/watch?v=rCQKqe2XCqI",
    "authors": [
        "Christoph Ono",
        "Michael Haase",
        "Owen Kemeys",
        "Yashraj",
        "Mogashni"
    ],
    "indexed_at": "2024-03-21T16:33:36.041Z",
    "transcript_by": "varmur via review.btctranscripts.com",
    "summary": "In a recent insightful podcast, Christoph Ono spearheaded a discussion on the resurgence of interest in Bitcoin covenants, marking a significant evolution in Bitcoin's technological landscape. This renewed focus was sparked by a challenge on Bitcoin Design and further amplified by River CEO Leishman's advocacy for a design-centric approach to understanding covenants. The dialogue, enriched by contributions from Michael Haase, Owen Kemeys, Yashraj, and Mogashni, delved into the complexities and potential applications of covenants, shedding light on their role in enhancing Bitcoin's utility and user experience.\n\nMichael Haase opened the discussion by highlighting the potential of covenants to expand Bitcoin's programmability, suggesting applications such as automated inheritance and vaulting features. Despite the technical complexity of covenants, Yashraj emphasized the importance of focusing on user-centric outcomes, including scaling and privacy enhancements, underscoring the need to bridge the gap between technical nuances and practical applications.\n\nOwen Kemeys contributed clarity to the conversation by demystifying covenants through visualization efforts, explaining that they essentially build upon Bitcoin's existing capabilities in innovative ways. He outlined two primary uses for covenants: vault-type structures for implementing time locks and tree-type structures for aggregating transactions to address scaling issues. This perspective highlighted the versatility of covenants in enhancing Bitcoin's functionality.\n\nThe panelists collectively recognized covenants as tools for establishing complex predefined rules for Bitcoin transactions, expanding its applicability in multi-party transactions and scenarios. The discussion also touched on various technical proposals aiming to implement covenants, with a community preference for simpler implementations that balance functionality and safety. This nuanced conversation signifies a pivotal moment in Bitcoin's development, focusing on making Bitcoin more versatile and accessible through the bridging of technicality and tangible applications.\n\nFurthermore, the podcast explored the CheckTemplateVerify (CTV) feature within the Bitcoin ecosystem, emphasizing its role in enabling innovative functionalities like multi-sig vaults and scaling solutions. The speakers discussed CTV's potential to simplify transaction management and reduce fees, as well as its application in optimizing the Lightning Network's operations through transaction trees and cold channels. These insights underscore CTV's utility in improving transaction efficiency and managing liquidity and security within the network.\n\nIn conclusion, the podcast offered a comprehensive overview of Bitcoin's current state and future prospects concerning technological advancements, particularly covenants and the CheckTemplateVerify mechanism. By fostering a deeper understanding of these innovations, the conversation illuminated the potential for significant improvements across the Bitcoin network, promising a future where digital currency transactions are more scalable, efficient, and user-friendly."
}