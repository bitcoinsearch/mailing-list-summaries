{
    "id": "bitcointranscripts+bitcoin-explained+bitcoin-core-v25",
    "title": "Bitcoin Core 25.0",
    "body_formatted": "{\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:00:21\"}, {\"type\":\"paragraph\",\"text\":\"Live from Utrecht, this is Bitcoin...\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:00:24\"}, {\"type\":\"paragraph\",\"text\":\"Explained.\"}, {\"type\":\"heading\",\"text\":\"Introduction\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:00:24\"}, {\"type\":\"paragraph\",\"text\":\"Hey, Sjors, we're back.\\nWe're back in beautiful, sunny Utrecht after I spent some time in Miami and Prague.\\nYou spent some time in Prague, and more Prague, is that right?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:00:38\"}, {\"type\":\"paragraph\",\"text\":\"Mostly Prague.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:00:38\"}, {\"type\":\"paragraph\",\"text\":\"You were in Prague for a while.\\nThat's where we recorded the previous episode about Stratum V2.\\nNow we're back in Utrecht, and we're gonna talk about Bitcoin Core 25, the latest Bitcoin Core release, but it came out a couple of weeks ago.\\nBecause we were traveling, we didn't have time to record this episode, but dear listener, we won't disappoint you.\\nHere we are with our episode on Bitcoin Core 25.\\nBefore we get there.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:01:13\"}, {\"type\":\"paragraph\",\"text\":\"It's time for the critical part of the show.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:01:16\"}, {\"type\":\"paragraph\",\"text\":\"I will be honest with you, Sjors, I am starting to regret doing the jingle myself.\\nI do feel like I painted myself in the corner with this one.\\nBut here we go!\\n(Singing) Sjors stacks sats, Sjors stacks sats, Sjors stacks sats!\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:01:35\"}, {\"type\":\"paragraph\",\"text\":\"Yay!\\nOkay, I guess I'll read one.\\nWe have 250 sats from Unit of Ag, which I would probably read as Prost, as in Cheers, because it's two beer glasses.\\nAnd then there's another one from Michael Matulev, Sjor stack sats without a music jingle, and MRMR 1750 sats.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:02:00\"}, {\"type\":\"paragraph\",\"text\":\"How do you know that was without the music jingle, Sjors?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:02:02\"}, {\"type\":\"paragraph\",\"text\":\"Because it doesn't have the music emoji; the last one did.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:02:06\"}, {\"type\":\"paragraph\",\"text\":\"Oh, it actually did, and you still didn't sing it?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:02:09\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, this one doesn't.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:02:10\"}, {\"type\":\"paragraph\",\"text\":\"Okay, well, what was the third one?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:02:13\"}, {\"type\":\"paragraph\",\"text\":\"Whatever, let's move on.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:02:15\"}, {\"type\":\"paragraph\",\"text\":\"Sjors, do you still like this part of the episode?\\nBecause I don't think I've heard a single interesting message so far.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:02:22\"}, {\"type\":\"paragraph\",\"text\":\"Well, we could make the criteria a bit stricter so that the message should actually be interesting before we do the segment.\"}, {\"type\":\"heading\",\"text\":\"Bitcoin Core 25.0 release\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:02:28\"}, {\"type\":\"paragraph\",\"text\":\"All right, Sjors, stacked, sats.\\nSjors, BitcoinCore 25, or 25.0.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:02:36\"}, {\"type\":\"paragraph\",\"text\":\"Speaking of not very interesting.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:02:38\"}, {\"type\":\"paragraph\",\"text\":\"Right, I was gonna say this doesn't strike me as a particularly spectacular release.\\nI guess at this point, most listeners will know, but just for context: what does it mean that there is a new Bitcoin Core release?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:02:56\"}, {\"type\":\"paragraph\",\"text\":\"It means that about six months went by since the last Bitcoin Core release.\\nSo whatever makes it in by some date is what goes in.\\nAnd then there's some time, maybe a month or two, spent on fixing bugs, not changing anything, just fixing bugs.\\nAnd then it's released.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:03:15\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nThat's in contrast with some other types of software that will release a new version once they've included some important new upgrades.\\nInstead of that, Bitcoin Core releases a new version every six months.\\nSometimes it's very interesting and sometimes not much happens in six months.\\nThat's really worth talking about, but we'll still talk about it.\\nIs that right?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:03:40\"}, {\"type\":\"paragraph\",\"text\":\"It also depends on your interest.\\nBecause if you look at the actual list of all the little commits that go in there, there's a lot of stuff that's under the hood.\\nIf you find that stuff interesting, then there might actually be much more for you there.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:03:45\"}, {\"type\":\"paragraph\",\"text\":\"Sure.\\nI'm just approaching it from a podcast host perspective and what an average listener might find interesting.\\nI think this will not be the most spectacular episode, but we're still going to do it short.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:04:09\"}, {\"type\":\"paragraph\",\"text\":\"That's right.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:04:10\"}, {\"type\":\"paragraph\",\"text\":\"Okay, so we highlighted a couple of upgrades that are at least kind of worth talking about.\\nAnd we're just going to do them in order of us having written them down in our own show notes.\\nThey're not in order of importance or in order of anything else, right?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:04:30\"}, {\"type\":\"paragraph\",\"text\":\"That's right.\"}, {\"type\":\"heading\",\"text\":\"Performance improvements related to BRC20\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:04:30\"}, {\"type\":\"paragraph\",\"text\":\"Okay.\\nSo, number one.\\nThere are some performance improvements when it comes to huge transaction loads, and they have something to do with BRC20.\\nIs that right?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:04:45\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, that's right.\\nMore in general, what we've seen in the last few months is the inscriptions, the ordinals, and then the BRC20 hypes; and also the stamps hype that we talked about in an earlier episode.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:05:02\"}, {\"type\":\"paragraph\",\"text\":\"Hang on.\\nWe spoke about inscriptions and ordinals in a previous episode, as well as stamps.\\nWe have not spoken about BRC20.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:05:11\"}, {\"type\":\"paragraph\",\"text\":\"No, BRC20 is based on inscriptions, they are inscriptions.\\nThey're inscriptions with a piece of JSON in it, and they are supposed to be smart contracts.\\nAnd I'm saying that with a very cynical face and scare quotes because they are not smart, and they're also not contracts.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:05:28\"}, {\"type\":\"paragraph\",\"text\":\"So this is also what I thought.\\nBut you're sure about it, they are just using inscriptions, right?\\nIt's kind of counterparty reinvented?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:05:36\"}, {\"type\":\"paragraph\",\"text\":\"Yes.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:05:36\"}, {\"type\":\"paragraph\",\"text\":\"Because that's how it sounds.\\nIt's just the counterparty reinvented, more or less.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:05:44\"}, {\"type\":\"paragraph\",\"text\":\"Yes.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:05:44\"}, {\"type\":\"paragraph\",\"text\":\"Okay.\\nAnd there's some kind of performance improvement in Bitcoin Core that has something to do with this.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:05:51\"}, {\"type\":\"paragraph\",\"text\":\"Generally speaking, what you see is people start using Bitcoin in very different ways.\\nSo the transactions look a little bit different than what you're used to.\\nFor example, you know, in the last episode or a few episodes ago, we talked about how invalid blocks were produced because people were putting multiple signatures in.\\nThat wasn't a problem with Bitcoin Core, that was a problem with the miner software.\\nBut the software just gets stressed out and starts hitting weird corners.\\nSimilarly, these BRC20 transactions are atypically small.\\nThat's sort of one thing you would see about them.\\nThey're not the typical two-input, two-output transactions that you see normally.\\nThey're smaller.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:06:29\"}, {\"type\":\"paragraph\",\"text\":\"Why?\\nWhat do they look like?\\nOr what's the deal?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:06:31\"}, {\"type\":\"paragraph\",\"text\":\"I haven't looked at them in detail, but I think a lot of them are just one-input one-output (transactions).\\nBecause a lot of time, what you do is to update the state of your smart contract.\\nYou're saying: \\\"Okay, my little fluffy image of a dolphin is now for sale.\\\"\\nAnd that is just one JSON picture or one piece of JSON that you're uploading to the blockchain.\\nBut you're not sending your coins anywhere, so you probably just sent the same coin to yourself with this extra node.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:06:57\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nWe don't have to re-explain how inscriptions work: you just put this data in the witness, and most nodes wouldn't even look at it.\\nThey're very small, like you said because not much else is happening with the transaction.\\nThis is the idea. Okay, go on.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:07:14\"}, {\"type\":\"paragraph\",\"text\":\"It does mean they're a little smaller than expected.\\nThen, if you really look at how Bitcoin Core deals with things like the mempool and how transactions are relayed to other nodes before they go in a block: they were assuming that was happening at about seven transactions per second.\\nWith SegWit, that increased a bit.\\nFor this type of usage, it should be slightly higher, too.\\nThe new release contains some improvements to handle these higher numbers.\\nBut I'm being very vague here.\\nSo we should do another episode where we try to explain that in more detail.\\nI mean, probably when I understand it.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:07:46\"}, {\"type\":\"paragraph\",\"text\":\"Or not, because it doesn't sound super interesting.\\nIf I understand you correctly, the Bitcoin Core software is calibrated with certain assumptions about how Bitcoin would usually be used, the software is optimized for that situation.\\nNow, that situation changed because of BRC20 and inscriptions and all of that.\\nThis new Bitcoin Core release takes this new way of using Bitcoin into account with its assumptions in its code.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:08:29\"}, {\"type\":\"paragraph\",\"text\":\"The bigger picture here is that in blocks, we have a very hard limit.\\nThere are only so many megabytes that go into a block, so it's much easier to reason about the worst case.\\nBut for the mempool, there are not really any rules because it's not consensus.\\nSo it's a little bit more complicated to make code that handles all mempool scenarios ideally.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:08:50\"}, {\"type\":\"paragraph\",\"text\":\"Right, okay.\\nNow, let's make this as practical as we can.\\nI'm a casual Bitcoin Core user; what's the benefit for me when I download Bitcoin Core 25?\\nHow does it help me?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:09:14\"}, {\"type\":\"paragraph\",\"text\":\"Probably when there's another storm of these super small BSC20 transactions, your node will be happier.\\nAnd by happier, I mean it's probably gonna make your computer less hot and use less memory...\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:09:19\"}, {\"type\":\"paragraph\",\"text\":\"...require less resources.\\nOkay, I like my computer cooler, so that's good.\"}, {\"type\":\"heading\",\"text\":\"Updates related to miniscript\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:09:19\"}, {\"type\":\"paragraph\",\"text\":\"Next point: there are some updates with Miniscript.\\nWe've done a whole episode on Miniscript.\\nDo you remember what episode that was?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:09:40\"}, {\"type\":\"paragraph\",\"text\":\"I do not.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:09:42\"}, {\"type\":\"paragraph\",\"text\":\"Look it up.\\nIn a previous Bitcoin Core release episode, we mentioned that something related to Miniscript was implemented, but it wasn't quite there.\\nIt sounds like a new step has been made, right?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:09:57\"}, {\"type\":\"paragraph\",\"text\":\"Yeah.\\nWe described Miniscript several years ago, I think it was one of the first episodes.\\nIt's not a consensus change, it's not a soft fork.\\nA miniscript is a way to write scripts in a sane manner, because writing Bitcoin scripts by hand is the best way to lose your money.\\nUsing miniscript allows you to write scripts in a safe way.\\nBitcoin Core added support for making a watch-only wallet.\\nThat's a wallet that you can see your balance, you can create addresses, you can use Miniscript, and you can receive coins, but you couldn't spend it.\\nThat's not ideal for most people.\\nThis new release does let you spend it.\\nI'd still say it's pretty experimental.\\nAnd there are some edge cases where you can actually not spend it.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:10:42\"}, {\"type\":\"paragraph\",\"text\":\"Okay, as a brief recap of Miniscript.\\nThe thing here is that the Bitcoin protocol allows certain kinds of basic smart contract functionalities: it allows multisig, time locks, hash pre-images; it allows a bunch of things.\\nWith Miniscript, it's very easy to implement these things in the smart contract QA, so you can receive coins in a certain way.\\nSo, for example, you can have a board of directors in a company, and they can say, three out of five have to agree or two out of five after a year, whatever.\\nYou can do that kind of stuff.\\nWith Miniscript, you can implement that easily.\\nNow with Bitcoin Core is where I'm getting lost.\\nBecause this is what the Bitcoin protocol allows.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:11:32\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, nothing changed in the Bitcoin protocol for Miniscript.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:11:34\"}, {\"type\":\"paragraph\",\"text\":\"Right, so what is Bitcoin Core, actually?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:11:37\"}, {\"type\":\"paragraph\",\"text\":\"Bitcoin Core is really multiple things.\\nBitcoin Core is the node, the thing that checks the blocks for validity.\\nNothing changed there.\\nBut Bitcoin Core is also a software package that has a wallet built into it.\\nAnybody's free to build a wallet, there's nothing special about the Bitcoin Core wallet.\\nIn fact, it's probably not one of the most user-friendly wallets, but it is quite powerful.\\nAt least, it's becoming quite powerful.\\nI think that's a better way to say it, thanks to Miniscript.\\nThis wallet is able to use Miniscript...\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:12:06\"}, {\"type\":\"paragraph\",\"text\":\"When you say use Miniscript...\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:12:09\"}, {\"type\":\"paragraph\",\"text\":\"It means you can give it a piece of Miniscript and it understands how to create addresses, how to sign transactions using it, etc.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:12:17\"}, {\"type\":\"paragraph\",\"text\":\"But Miniscript is literally script.\\nIt's still something you code as a programmer, right?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:12:23\"}, {\"type\":\"paragraph\",\"text\":\"Yeah.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:12:24\"}, {\"type\":\"paragraph\",\"text\":\"So you give that code to the Bitcoin Core wallet.\\nWe're not talking about the GUI, then.\\nYou have to go into the command line, you paste a piece of code there and this is what Bitcoin Core will understand.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:12:37\"}, {\"type\":\"paragraph\",\"text\":\"I mean, some people may have been used to pasting xpubs around.\\nThe way miniscript works in practice is just an xpub with a bunch of extra script around it saying what to do with the xpub.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:12:50\"}, {\"type\":\"paragraph\",\"text\":\"Okay this is what you paste in the command line.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:12:53\"}, {\"type\":\"paragraph\",\"text\":\"Yeah.\\nYou paste it in the command line, but there's no reason this could not be added to the user interface too.\\nIt's just that you'll have to paste something magical that you probably don't understand so that's a bit dangerous.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:13:07\"}, {\"type\":\"paragraph\",\"text\":\"Okay.\\nSo far, Bitcoin Core could understand it, and you could receive the coins.\\nBut they were sitting there in your wallet, and you couldn't actually spend them.\\nSounds like being able to spend them is a pretty good upgrade.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:13:15\"}, {\"type\":\"paragraph\",\"text\":\"It's one of the nicer features of Bitcoin, although it's good for inflation if people don't, you know...\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:13:21\"}, {\"type\":\"paragraph\",\"text\":\"Okay, so I guess.\\nWait, but this is still sort of limited.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:13:30\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I think for most cases that you've described, it'll work.\\nYou can create a PSBT because there are now, I believe, two hardware wallets or maybe three.\\nThe Ledger was first.\\nThen I believe it was Coldcard or Bitbox, one of those two, that added support for Miniscript, which means you can make like a multisig wallet with three physically different devices with each of having their own trade-offs.\\nIn order to do that you need PSBTs to move between these devices.\\nBut there are some limits to what you can do.\\nSo there may be some obscure scripts that you can write, you can receive coins on it, but you will not be able to send them to the hardware wallets using a PSBT.\\nSome edge cases that, if you know Miniscript, you'll probably understand them.\\nI don't.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:14:13\"}, {\"type\":\"paragraph\",\"text\":\"Also, it doesn't work with Taproot yet.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:14:16\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, that's a bigger drawback, I would say.\\nMiniscript was designed quite a while ago before Taproot.\\nIt was initially designed for use with SegWit, basically SegWit script.\\nThere's also a Miniscript standard for pre-SegWit script, I think.\\nBut, at least, it was designed for SegWit scripts.\\nAnd so there has now been a recent modification to that proposal that makes it work for the Taproot script.\\nMost of the script is the same between SegWit and Taproot, most of the same opcodes so that you can make signatures, etc.\\nBut there are a few subtle changes in Taproot.\\nThat changes a few things about Miniscript.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:14:57\"}, {\"type\":\"paragraph\",\"text\":\"That would be an upgrade in the future, I would assume.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:15:00\"}, {\"type\":\"paragraph\",\"text\":\"Yeah.\\nAnd again, that's one step at a time.\\nThe first step would be that you can write miniscripts, and then it'll generate a script leaf in Taproot because you can put your individual scripts in individual leaves in the tree.\\nBut there's no way yet to decide how to distribute your scripts between all the leaves most efficiently.\\nIf you have five different conditions, do you want to make five leaves in taproot, or do you want to make one leaf that does two of them?\\nThat sort of stuff, there's no tooling for that yet.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:15:31\"}, {\"type\":\"paragraph\",\"text\":\"Right.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:15:32\"}, {\"type\":\"paragraph\",\"text\":\"Soon, TM.\"}, {\"type\":\"heading\",\"text\":\"Fast wallet rescan\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:15:35\"}, {\"type\":\"paragraph\",\"text\":\"Two weeks.\\nWe've mentioned two improvements so far.\\nOne of which was the transaction loads, BRC20.\\nAnd then we now mentioned Miniscript.\\nNow we're getting to the third one.\\nAnd that's actually the last one already.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost:\"}, {\"type\":\"paragraph\",\"text\":\"Fast wallet rescan.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum:\"}, {\"type\":\"paragraph\",\"text\":\"Fast wallet rescan.\\nSjors, explain.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:15:54\"}, {\"type\":\"paragraph\",\"text\":\"So, Bitcoin Core has a wallet built into it.\\nLet's say you first used that in 2012 and you received some Bitcoin.\\nThen you were like: \\\"okay, let me put this wallet on a USB stick, put it in a vault somewhere physically, so the whole wallet, not just the backup codes, the actual file and remove it from my computer because I'm traveling around with it\\\".\\nYour node just keeps updating, keeps syncing, keeps syncing, keeps syncing.\\nNow you come back and you put the USB stick back into your computer.\\nMaybe that's a bad idea if there's a lot of money on it, but let's say you do.\\nThen, your wallet is behind, in a sense, because the new transactions that happened since 2012 would not be in that wallet file, because it was in your vault.\\nAnd your node doesn't really track them either, not specifically, it just has all the blocks.\\nSo, there's something called a rescan, in which the wallet file...\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:16:51\"}, {\"type\":\"paragraph\",\"text\":\"Wait, wait, wait, wait.\\nBecause it is confusing.\\nI think what you mean to say is you received coins in one wallet, and now, after that, you started using a new wallet, right?\\nWhen you say \\\"syncing, syncing, syncing\\\", your node is not syncing based on that wallet anymore.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:17:10\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, your node is still syncing.\\nIt just stores all the blocks and checks their validity.\\nBut it's not keeping track of how that matters for your wallet.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:17:17\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nSo you basically reinstalled Bitcoin Core or something like that.\\nYou got a new computer, something like that?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:17:23\"}, {\"type\":\"paragraph\",\"text\":\"No, you can basically unload a wallet and then load it again.\\nBut I guess another scenario would be, yes.\\nSo you are restoring, you're reinstalling Bitcoin Core, and you're recovering your wallet.\\nYou're trying to see if there are any coins in that wallet and find the transactions.\\nThe only way to do that is to go through all the blocks and check if there's something useful in that block.\\nThis takes a long time, it could be several hours.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:18:49\"}, {\"type\":\"paragraph\",\"text\":\"That's not so bad.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:18:52\"}, {\"type\":\"paragraph\",\"text\":\"It depends on your patience.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:18:53\"}, {\"type\":\"paragraph\",\"text\":\"I guess we can do better than that.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:18:56\"}, {\"type\":\"paragraph\",\"text\":\"Yes, we can.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:18:56\"}, {\"type\":\"paragraph\",\"text\":\"So how do we do better?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:18:58\"}, {\"type\":\"paragraph\",\"text\":\"This is using the neutrino filters that we did in earlier episode about the compact block filters.\\nI forgot the episode. Look for \\\"Bitcoin Explained Neutrino\\\", and you'll find it.\\nThe idea there is that light wallets can use these filters to figure out which blocks they need to download.\\nInstead of downloading all the blocks, a mobile wallet can figure out by itself, without revealing any private information to the outside world, which blocks it should download.\\nIn order to do that, it needs to download something called these filters.\\nThese filters are much smaller than normal blocks.\\nBitcoin Core can create these filters and now the wallet will take advantage of that because rather than scanning every block from the history from the last time you checked your wallet, it now knows which blocks it needs to scan.\\nAnd so it'll scan fewer blocks, which is faster.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:19:50\"}, {\"type\":\"paragraph\",\"text\":\"Wait.\\nSo if I have a `wallet.dat` file on a USB stick, as we discussed, that's the example we're using.\\nI buy a new computer tomorrow and I sync Bitcoin Core.\\nNow I get the `wallet.dat` file.\\nSomehow Bitcoin Core would know which blocks to download based on the `wallet.dat`?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:20:12\"}, {\"type\":\"paragraph\",\"text\":\"The `wallet.dat` file contains the addresses that belong to your wallet.\\nDepending on how old it is, that's gonna be somewhere between 2000 and 8000, because it basically creates a cache of addresses.\\nIt knows these addresses, and yet, using these filters which Bitcoin Core will also have created, it's able to know which blocks are relevant and which blocks are not, because these filters are like a compressed summary of the blocks.\\nIt looks at the filters and it says: \\\"Okay, if I run my addresses through this filter, does it say yes or no?\\\"\\nIf it says yes, I'm gonna download the block and check everything.\\nThe filters are not accurate, so it's possible that you might download ten times more blocks than you really need, but you're not downloading them all.\\nIn the case of Bitcoin Core it's not even about downloading them, it's just about checking them.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:21:02\"}, {\"type\":\"paragraph\",\"text\":\"So it doesn't work with a pruned node, right?\\nYou do need to have all the blocks available.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:21:09\"}, {\"type\":\"paragraph\",\"text\":\"Correct.\\nAt the moment, it does not work with a pruned node.\\nIf you have these filters on your computer, but have pruned blocks, you would be able to know which blocks to download again which currently you can only do with some manual magic.\\nIt is possible with the pruned node, but then you need a script.\\nI've tried this myself, like experimenting with it.\\nYou can scan...\\nI don't know if I tried this myself, I may not.\\nNo, I think I'm lying here.\\nIn theory, it's possible to download all the blocks that you're missing and then scan them, but the wallet will be very confused.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:21:44\"}, {\"type\":\"paragraph\",\"text\":\"Okay.\\nI don't understand how this works, but that's probably because I forgot how Neutrino works.\\nSo, if I want to understand that, I would have to go back to our own episode and listen to that.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:21:53\"}, {\"type\":\"paragraph\",\"text\":\"Sounds good.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:21:54\"}, {\"type\":\"paragraph\",\"text\":\"Unless, Sjors, you want to try explaining this right now?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:21:58\"}, {\"type\":\"paragraph\",\"text\":\"Did you forget how Neutrino works?\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:22:00\"}, {\"type\":\"paragraph\",\"text\":\"I mean, I don't remember.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:22:01\"}, {\"type\":\"paragraph\",\"text\":\"I just told you.\\nSo the idea is if you're...\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:22:03\"}, {\"type\":\"paragraph\",\"text\":\"I mean, I understand the idea. I just don't understand why that...\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:22:07\"}, {\"type\":\"paragraph\",\"text\":\"Why it works?\\nIt's magical math.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:22:09\"}, {\"type\":\"paragraph\",\"text\":\"Yes, exactly.\\nI feel that at some point I understood it more than just magical math, but not right now.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:22:18\"}, {\"type\":\"paragraph\",\"text\":\"The magical math basically says that you've done some calculations before to make a filter from a block and then you can check against the filter.\\nYou say \\\"do these addresses belong to this block or not?\\\"\\nThat is it.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:22:31\"}, {\"type\":\"paragraph\",\"text\":\"Okay, do you want just to leave it there?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:22:33\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, because that's about as well as I can explain it.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:22:35\"}, {\"type\":\"paragraph\",\"text\":\"Okay, we'll leave it there.\\nIf you want to know more, I think we go a little bit more in-depth in our actual Neutrino episode.\"}, {\"type\":\"heading\",\"text\":\"65 byte transactions\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:22:41\"}, {\"type\":\"paragraph\",\"text\":\"We missed a topic.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:22:43\"}, {\"type\":\"paragraph\",\"text\":\"I wasn't done, Sjors.\\nI think you will bring up the RBF, the full RBF.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:22:49\"}, {\"type\":\"paragraph\",\"text\":\"No, no, no, no.\\nThe 65 byte transactions.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:22:53\"}, {\"type\":\"paragraph\",\"text\":\"Oh, you're right, we missed a topic.\\nSjors, you're so sharp today.\\nLuckily, because I'm apparently not.\\nSo yes, there's something going on with the minimum size of transactions.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:23:07\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, we added more freedom to the mempool.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:23:11\"}, {\"type\":\"paragraph\",\"text\":\"Is that so?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:23:12\"}, {\"type\":\"paragraph\",\"text\":\"Yes.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:23:13\"}, {\"type\":\"paragraph\",\"text\":\"Okay, explain.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:23:14\"}, {\"type\":\"paragraph\",\"text\":\"Remember there is consensus, which are the rules for the blocks, and there's standardness, which are rules for the mempool.\\nGenerally, the standardness rules are stricter than the consensus rules.\\nIn fact, that's always the case.\\nIn other words, There are some transactions that are perfectly fine in a block, but they are not fine in the mempool.\\nThis has to do with preventing denial of service attacks on your node.\\nIn this case, though, it's not really that.\\nThere is a minimum size.\\nI believe it was 84 bytes, so, any transaction that's less than 84 bytes would not be relayed by nodes.\\nIf it's in a block, it's fine.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:23:56\"}, {\"type\":\"paragraph\",\"text\":\"Is there a minimum size (for transactions) to be in blocks at all?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:24:01\"}, {\"type\":\"paragraph\",\"text\":\"I don't think so.\\nThere's probably a minimum practical size because you must point to a previous transaction, etc.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:24:06\"}, {\"type\":\"paragraph\",\"text\":\"There's an actual minimum size that a transaction can be, but there's no consensus rule for it.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:24:12\"}, {\"type\":\"paragraph\",\"text\":\"I guess you'd say there's an inherent minimum size.\\nIt follows from what has to be in a transaction.\\nBut other than that, I don't think there's a number.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:24:19\"}, {\"type\":\"paragraph\",\"text\":\"Okay, but there is a minimum size for the mempool policy.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:24:24\"}, {\"type\":\"paragraph\",\"text\":\"I think it was something like 82 or 84, some number.\\nAnd this number has decreased.\\nNow it's 65.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:24:32\"}, {\"type\":\"paragraph\",\"text\":\"Why?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:24:32\"}, {\"type\":\"paragraph\",\"text\":\"There's some use for it.\\nI think the idea is that it makes it a little bit easier to burn coins if you need to.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:24:42\"}, {\"type\":\"paragraph\",\"text\":\"To burn coins?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:24:44\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, if you have some dust that you want to get rid of.\\nYou want to remove it from the UTXO set.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:24:49\"}, {\"type\":\"paragraph\",\"text\":\"Okay.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:24:50\"}, {\"type\":\"paragraph\",\"text\":\"I think it's easier to do that with smaller transactions.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:24:55\"}, {\"type\":\"paragraph\",\"text\":\"Wait, what?\\nWhy would you want to do that?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:24:58\"}, {\"type\":\"paragraph\",\"text\":\"Because you want to clean up the UTXO set.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:25:01\"}, {\"type\":\"paragraph\",\"text\":\"But you literally want to throw away coins?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:25:04\"}, {\"type\":\"paragraph\",\"text\":\"You'd throw away coins that are not economical.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:25:08\"}, {\"type\":\"paragraph\",\"text\":\"Why not just leave it alone?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:25:10\"}, {\"type\":\"paragraph\",\"text\":\"Because it's sitting in people's memory and using up resources.\\nBe a good citizen and clean up your UTXOs.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:15:18\"}, {\"type\":\"paragraph\",\"text\":\"I guess, okay, yeah, go on.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:25:20\"}, {\"type\":\"paragraph\",\"text\":\"I think this was proposed by Greg Sanders ([instagibbs](https://github.com/instagibbs)).\\nHe's working on ephemeral anchors, which are ways to combine two transactions that are paying a zero fee and then one is bumping the other.\\nMaybe those transactions are actually smaller, and maybe that's why he needs it.\\nI haven't looked at the reasoning.\\nIn any case, it's possible, so it's done.\\nThe original reason is kind of funny.\\nThe original limit was made this weird number like 82 or 84 because if they had made it 65, then the bad people would have understood why it was done, and they might have been able to exploit something before the fix was released.\\nSo this is a case of you have a vulnerability, you know that if people make 64 byte transactions, they can cause problems.\\nYou don't want to give that away too obviously.\\nSo you say, yeah, we won't make the limit 65.\\nWe will make it like 84 and then make up some excuse for why 84 is a good number.\\nBecause nobody needed it.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:26:17\"}, {\"type\":\"paragraph\",\"text\":\"This is super confusing.\\nLuckily, I know what you're talking about.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:26:20\"}, {\"type\":\"paragraph\",\"text\":\"All right.\\nWell, maybe you can explain it.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:26:22\"}, {\"type\":\"paragraph\",\"text\":\"Yes.\\nSo you mentioned the original number, and you said that it was 82.\\nSo that's the confusing part.\\nNo. The original number was 64.\\nThat was a minimum of 64.\\nAnd then it was increased?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:26:34\"}, {\"type\":\"paragraph\",\"text\":\"No, there was no minimum.\\nBut it had to be increased above 64.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:26:39\"}, {\"type\":\"paragraph\",\"text\":\"Oh, so it was not 64?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:26:40\"}, {\"type\":\"paragraph\",\"text\":\"No, I think it was just...\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:26:41\"}, {\"type\":\"paragraph\",\"text\":\"So there was no minimum?\\nYeah, okay, okay.\\nSo there was no minimum.\\nAnd then a minimum was imposed.\\nWhen was this?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:26:50\"}, {\"type\":\"paragraph\",\"text\":\"I think it was 2017, maybe earlier.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:26:53\"}, {\"type\":\"paragraph\",\"text\":\"Oh, a while ago.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:26:55\"}, {\"type\":\"paragraph\",\"text\":\"It might have been done even earlier.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:26:56\"}, {\"type\":\"paragraph\",\"text\":\"Then a minimum was imposed, and that minimum was 84.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:27:00\"}, {\"type\":\"paragraph\",\"text\":\"Something like that.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:27:01\"}, {\"type\":\"paragraph\",\"text\":\"And now that has been decreased to 65.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:27:05\"}, {\"type\":\"paragraph\",\"text\":\"Exactly.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:27:06\"}, {\"type\":\"paragraph\",\"text\":\"What you're saying is the reason that 84 was picked originally is because 65 would have been ideal, but they didn't want to do that because it would reveal something.\\nSo they picked 84, which was a little bit more off to the side, and then attackers wouldn't notice it, hopefully.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:27:30\"}, {\"type\":\"paragraph\",\"text\":\"That's right.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:27:30\"}, {\"type\":\"paragraph\",\"text\":\"What was wrong with?\\nWhy is 64 a magical number?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:27:36\"}, {\"type\":\"paragraph\",\"text\":\"In fact, the strict rule that you really need is not 64.\\nIt can be smaller than 64, it can be bigger than 64, but you don't want 64.\\nThe reason has to do with Merkle trees.\\nWe've talked about Merkle trees in earlier episodes.\\nWe even tried to explain Merkle trees in earlier episodes, I think we should not try that again.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:27:53\"}, {\"type\":\"paragraph\",\"text\":\"Probably multiple times.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:27:54\"}, {\"type\":\"paragraph\",\"text\":\"What it looks like is you take two transactions, you hash each of them, and you put the hash of the first transaction on the left, the hash of the second transaction on the right.\\nAnd the hash of a transaction is how many bytes?\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:28:15\"}, {\"type\":\"paragraph\",\"text\":\"64!\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:28:16\"}, {\"type\":\"paragraph\",\"text\":\"No.\\nThe hash of a transaction is...\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:28:19\"}, {\"type\":\"paragraph\",\"text\":\"I don't know. Should I know?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:28:20\"}, {\"type\":\"paragraph\",\"text\":\"It's called SHA256.\\nThe 256 stands for the number of bits.\\n256 divided by 8 is 32.\\nSo, the hash is 32 bytes.\\nYou put two of them next to each other.\\nThat is 64.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:28:38\"}, {\"type\":\"paragraph\",\"text\":\"Right.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:28:38\"}, {\"type\":\"paragraph\",\"text\":\"Then, you know, this tree goes up and up and up, you keep combining two.\\nSo every...\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:28:42\"}, {\"type\":\"paragraph\",\"text\":\"What? This is not how a Merkle tree works.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:28:44\"}, {\"type\":\"paragraph\",\"text\":\"That's exactly how a Merkle tree works, at least how it works in Bitcoin.\\nYou start with transactions at the bottom, you pair them, and then you hash each of them.\\nYou put the hashes next to each other, so 32 bytes next to 32 bytes, that's 64 bytes in total.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:29:04\"}, {\"type\":\"paragraph\",\"text\":\"Right, yeah, hash these together, right?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:29:04\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, exactly.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:29:06\"}, {\"type\":\"paragraph\",\"text\":\"The problem is that if you implemented the Merkle tree well it would be clear how many leaves there would be.\\nYou would basically say this is a Merkle tree and has so many leaves.\\nSomebody who looks at the Merkle tree can extract it and see these are all transaction hashes.\\nThe problem is, in Bitcoin, it's done unsafely and this has caused problems in the past.\\nAnything that's 64 bytes can be either a transaction of 64 bytes or it can be one of these points inside the Merkle tree.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:29:43\"}, {\"type\":\"paragraph\",\"text\":\"Okay, they look the same.\\nI just want to clarify...\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:29:45\"}, {\"type\":\"paragraph\",\"text\":\"They look the same.\\nThat is where multiple attacks have come from, including much older ones where you could create a block, then you would pretend that the block is invalid and send the same thing again.\\nAll sorts of nasty things.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:30:00\"}, {\"type\":\"paragraph\",\"text\":\"I want to clarify: we're getting really into the weeds with weird niche, but interesting attacks, here.\\nSo, yeah, okay.\\nThe transaction hash is 32 bytes...\\nI'm not going to try to re-explain this one even, but I was kind of following you.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:30:16\"}, {\"type\":\"paragraph\",\"text\":\"Transaction height is 32 bytes.\\nYou put two of them next to each other, and now you have 64 bytes.\\nSo, what does that mean?\\nWell, I think it was Sergio who...\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:30:24\"}, {\"type\":\"paragraph\",\"text\":\"Sergio Demian Lerner.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost:\"}, {\"type\":\"paragraph\",\"text\":\"... who wrote a [blog post in 2017](https://bitslog.com/2018/06/09/leaf-node-weakness-in-bitcoin-merkle-tree-design/) explaining exactly what you can do to attack the user of an SPV wallet.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:30:36\"}, {\"type\":\"paragraph\",\"text\":\"I'll add the link to the article in the show notes.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:30:39\"}, {\"type\":\"paragraph\",\"text\":\"You definitely want to read it.\\nI'll try to explain it at some high level, but I find it confusing.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:30:43\"}, {\"type\":\"paragraph\",\"text\":\"Go for it.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:30:43\"}, {\"type\":\"paragraph\",\"text\":\"What is important to know is that it's an attack on SPV wallets, these are wallets that do not download full blocks but only get a summary.\\nThey get something called an SPV proof, which is saying \\\"hey, this transaction exists, it's inside this block\\\", and then you give it all the block headers so the SPV wallet knows there's some proof of work on top of this transaction.\\nIt can't check all the consensus rules, but at least it knows some miner paid a lot of money to make this thing.\\nThat's a kind of wallet use that's not very common anymore because there are all sorts of problems with it, including the one we're about to describe.\\nIf you have a few million dollars in budget, you can perform this attack and this was in 2017.\\nI think you also need to have a pretty substantial amount of Bitcoin to do that which was cheaper back then.\\nYou create a 64-byte transaction and you pretend that it is part of this Merkle tree or the other way around.\\nThis is where I get confused.\\nThe idea here is, because a transaction is hashed into 32 bytes, and there are two of them next to each other, that means that you can basically start making a...\\nHow do you say this?\\nThere are certain parts of the transactions that can be whatever you want.\\nSo you don't have actually to find a SHA256 preimage.\\nYou have to try far fewer random transactions to be able to craft a transaction that looks like this.\\nOne of the tricks he does is he doesn't care about the amount in advance, so how many amounts can there be?\\nThere are just several bytes worth of what the amounts can be.\\nSo you basically keep looking for transactions with random different amounts.\\nOnce you find the right hash, you use it and you send money to yourself.\\nAnyway, you should read the blog post, but the attack is quite expensive.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:32:37\"}, {\"type\":\"paragraph\",\"text\":\"Can I summarize this?\\nHere's the summary: SPV wallets are not secure if you want to accept millions of dollars worth of Bitcoin.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:32:48\"}, {\"type\":\"paragraph\",\"text\":\"Assuming his calculation is correct, it would cost several million to do this attack at the time.\\nIf you are receiving more than a few million, you should absolutely run a full node.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:32:58\"}, {\"type\":\"paragraph\",\"text\":\"There are some weird quirks in the Bitcoin protocol and miner incentives.\\nSPV is not secure for that.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:33:04\"}, {\"type\":\"paragraph\",\"text\":\"No, and this attack also requires collaboration from a miner.\\nIf you have collaboration from the miner anyway, you might as well do a noble double spend.\\nI think the target audience for this attack was automated systems that use SPV proofs.\\nI think, at the time, Liquid and RSK had some components that were fully automated and would use these SPV proofs.\\nThey would have lots of money in them.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:33:27\"}, {\"type\":\"paragraph\",\"text\":\"Okay. Now I want to ask you, Bitcoin Core made this change?\\nApparently they made the change a couple of years ago, actually.\\nIt's only now, I guess the developer figured most people have now upgraded, so now we can stop pretending that 84 was...\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:33:44\"}, {\"type\":\"paragraph\",\"text\":\"No, the pretending stopped earlier.\\nI think it was changed in 2017 without any explanation, although his blog post was around the same time.\\nThen in 2019 there were comments added to the source code saying actually this is nonsense but this is the reason.\\nOnly now somebody bothered to actually change the limit, which is because nobody needed it.\\nAnd the other irony is...\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:34:08\"}, {\"type\":\"paragraph\",\"text\":\"So why is it needed now?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:34:10\"}, {\"type\":\"paragraph\",\"text\":\"I don't know.\\nI mean, that's what we speculated on earlier.\\nMaybe it's easier to burn money, or it has something to do with these ephemeral anchors.\\nI didn't study it in enough detail.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:34:19\"}, {\"type\":\"paragraph\",\"text\":\"Okay.\\nAnyway, so now the limit is 65.\\nHowever, even now, that's only a policy change.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:34:25\"}, {\"type\":\"paragraph\",\"text\":\"Yeah.\\nThe irony is this never prevented the attack because the attack as described actually requires being a miner or at least working with a miner.\\nIt's ironic because a miner doesn't care about standards and rules.\\nIt was a step, like, okay.\\nBut there's something called defense in depth where you say, \\\"okay, we think only a miner can do this, but maybe somebody else figures out a way to do it without the help of a miner\\\".\\nIt still helps to make it more difficult to relay these things.\\nAnd there is a software proposal called the Great Consensus Cleanup, which Matt Carollo proposed in 2017.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:34:58\"}, {\"type\":\"paragraph\",\"text\":\"We may have done an episode on that or no.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:35:00\"}, {\"type\":\"paragraph\",\"text\":\"Yep, and one of the parts of that proposal was to make the minimum transaction size 65 bytes.\\nThat would be consensus change.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:35:06\"}, {\"type\":\"paragraph\",\"text\":\"Right.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:35:07\"}, {\"type\":\"paragraph\",\"text\":\"Which is precisely for this reason.\"}, {\"type\":\"heading\",\"text\":\"Replace-by-fee implementation release\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:35:08\"}, {\"type\":\"paragraph\",\"text\":\"Right, but that's not what this is.\\nI feel we're getting really into the weeds with this Bitcoin Core 25 episode, Sjors.\\nI think this is a very niche upgrade, but it's an upgrade.\\nWe've now covered four topics.\\nWe're done with this one, right?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:35:26\"}, {\"type\":\"paragraph\",\"text\":\"I think we've covered four of them.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:35:28\"}, {\"type\":\"paragraph\",\"text\":\"Good.\\nAre we done with the episode?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:35:31\"}, {\"type\":\"paragraph\",\"text\":\"I think so.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:35:32\"}, {\"type\":\"paragraph\",\"text\":\"I mean that was this other thing you wanted to mention maybe something about the full RBF (replace-by-fee) release.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:35:36\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, there's an alternative implementation which you can download at your own risk.\\nMake sure to check all the signatures.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:35:44\"}, {\"type\":\"paragraph\",\"text\":\"Is this is Peter Todd's implementation?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:35:45\"}, {\"type\":\"paragraph\",\"text\":\"Yes, Peter Todd, I think, together with Antoine Riard.\\nThey're lobbying the full RBF thing, which we've done plenty of episodes about.\\nIt's essentially Bitcoin Core 25 plus the full RBF stuff.\\nThe one thing that's interesting about it is that when you turn on full RBF, you're able to replace transactions without setting the RBF signal.\\nBut if you're sending it to your peers, none of those peers might relay it.\\nSo, you want to find other nodes out there in the network that also support this feature.\\nThere's something called service flags in which nodes can communicate that they have this feature and deliberately connect to him.\\nThis patch does that.\\nBut I should warn you that changing peer-to-peer code is always very scary.\\nIf just one or two people are doing that, I don't know, it's up to you.\"}, {\"type\":\"heading\",\"text\":\"Farewell message\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:36:40\"}, {\"type\":\"paragraph\",\"text\":\"Anyways, this is not Bitcoin Core really, and we were talking about Bitcoin Core.\\nSo that's the episode then, Sjors.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:36:46\"}, {\"type\":\"paragraph\",\"text\":\"That's right.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:36:47\"}, {\"type\":\"paragraph\",\"text\":\"Bitcoin Core 25 is released.\\nWhere can people find it?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:36:49\"}, {\"type\":\"paragraph\",\"text\":\"BitcoinCore.org.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:36:51\"}, {\"type\":\"paragraph\",\"text\":\"There you go.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:36:52\"}, {\"type\":\"paragraph\",\"text\":\"Thank you for listening to Bitcoin...\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:36:54\"}, {\"type\":\"paragraph\",\"text\":\"Explained.\"}",
    "body": "Aaron van Wirdum: 00:00:21\n\nLive from Utrecht, this is Bitcoin...\n\nSjors Provoost: 00:00:24\n\nExplained.\n\n## Introduction\n\nAaron van Wirdum: 00:00:24\n\nHey, Sjors, we're back.\nWe're back in beautiful, sunny Utrecht after I spent some time in Miami and Prague.\nYou spent some time in Prague, and more Prague, is that right?\n\nSjors Provoost: 00:00:38\n\nMostly Prague.\n\nAaron van Wirdum: 00:00:38\n\nYou were in Prague for a while.\nThat's where we recorded the previous episode about Stratum V2.\nNow we're back in Utrecht, and we're gonna talk about Bitcoin Core 25, the latest Bitcoin Core release, but it came out a couple of weeks ago.\nBecause we were traveling, we didn't have time to record this episode, but dear listener, we won't disappoint you.\nHere we are with our episode on Bitcoin Core 25.\nBefore we get there.\n\nSjors Provoost: 00:01:13\n\nIt's time for the critical part of the show.\n\nAaron van Wirdum: 00:01:16\n\nI will be honest with you, Sjors, I am starting to regret doing the jingle myself.\nI do feel like I painted myself in the corner with this one.\nBut here we go!\n(Singing) Sjors stacks sats, Sjors stacks sats, Sjors stacks sats!\n\nSjors Provoost: 00:01:35\n\nYay!\nOkay, I guess I'll read one.\nWe have 250 sats from Unit of Ag, which I would probably read as Prost, as in Cheers, because it's two beer glasses.\nAnd then there's another one from Michael Matulev, Sjor stack sats without a music jingle, and MRMR 1750 sats.\n\nAaron van Wirdum: 00:02:00\n\nHow do you know that was without the music jingle, Sjors?\n\nSjors Provoost: 00:02:02\n\nBecause it doesn't have the music emoji; the last one did.\n\nAaron van Wirdum: 00:02:06\n\nOh, it actually did, and you still didn't sing it?\n\nSjors Provoost: 00:02:09\n\nYeah, this one doesn't.\n\nAaron van Wirdum: 00:02:10\n\nOkay, well, what was the third one?\n\nSjors Provoost: 00:02:13\n\nWhatever, let's move on.\n\nAaron van Wirdum: 00:02:15\n\nSjors, do you still like this part of the episode?\nBecause I don't think I've heard a single interesting message so far.\n\nSjors Provoost: 00:02:22\n\nWell, we could make the criteria a bit stricter so that the message should actually be interesting before we do the segment.\n\n## Bitcoin Core 25.0 release\n\nAaron van Wirdum: 00:02:28\n\nAll right, Sjors, stacked, sats.\nSjors, BitcoinCore 25, or 25.0.\n\nSjors Provoost: 00:02:36\n\nSpeaking of not very interesting.\n\nAaron van Wirdum: 00:02:38\n\nRight, I was gonna say this doesn't strike me as a particularly spectacular release.\nI guess at this point, most listeners will know, but just for context: what does it mean that there is a new Bitcoin Core release?\n\nSjors Provoost: 00:02:56\n\nIt means that about six months went by since the last Bitcoin Core release.\nSo whatever makes it in by some date is what goes in.\nAnd then there's some time, maybe a month or two, spent on fixing bugs, not changing anything, just fixing bugs.\nAnd then it's released.\n\nAaron van Wirdum: 00:03:15\n\nRight.\nThat's in contrast with some other types of software that will release a new version once they've included some important new upgrades.\nInstead of that, Bitcoin Core releases a new version every six months.\nSometimes it's very interesting and sometimes not much happens in six months.\nThat's really worth talking about, but we'll still talk about it.\nIs that right?\n\nSjors Provoost: 00:03:40\n\nIt also depends on your interest.\nBecause if you look at the actual list of all the little commits that go in there, there's a lot of stuff that's under the hood.\nIf you find that stuff interesting, then there might actually be much more for you there.\n\nAaron van Wirdum: 00:03:45\n\nSure.\nI'm just approaching it from a podcast host perspective and what an average listener might find interesting.\nI think this will not be the most spectacular episode, but we're still going to do it short.\n\nSjors Provoost: 00:04:09\n\nThat's right.\n\nAaron van Wirdum: 00:04:10\n\nOkay, so we highlighted a couple of upgrades that are at least kind of worth talking about.\nAnd we're just going to do them in order of us having written them down in our own show notes.\nThey're not in order of importance or in order of anything else, right?\n\nSjors Provoost: 00:04:30\n\nThat's right.\n\n## Performance improvements related to BRC20\n\nAaron van Wirdum: 00:04:30\n\nOkay.\nSo, number one.\nThere are some performance improvements when it comes to huge transaction loads, and they have something to do with BRC20.\nIs that right?\n\nSjors Provoost: 00:04:45\n\nYeah, that's right.\nMore in general, what we've seen in the last few months is the inscriptions, the ordinals, and then the BRC20 hypes; and also the stamps hype that we talked about in an earlier episode.\n\nAaron van Wirdum: 00:05:02\n\nHang on.\nWe spoke about inscriptions and ordinals in a previous episode, as well as stamps.\nWe have not spoken about BRC20.\n\nSjors Provoost: 00:05:11\n\nNo, BRC20 is based on inscriptions, they are inscriptions.\nThey're inscriptions with a piece of JSON in it, and they are supposed to be smart contracts.\nAnd I'm saying that with a very cynical face and scare quotes because they are not smart, and they're also not contracts.\n\nAaron van Wirdum: 00:05:28\n\nSo this is also what I thought.\nBut you're sure about it, they are just using inscriptions, right?\nIt's kind of counterparty reinvented?\n\nSjors Provoost: 00:05:36\n\nYes.\n\nAaron van Wirdum: 00:05:36\n\nBecause that's how it sounds.\nIt's just the counterparty reinvented, more or less.\n\nSjors Provoost: 00:05:44\n\nYes.\n\nAaron van Wirdum: 00:05:44\n\nOkay.\nAnd there's some kind of performance improvement in Bitcoin Core that has something to do with this.\n\nSjors Provoost: 00:05:51\n\nGenerally speaking, what you see is people start using Bitcoin in very different ways.\nSo the transactions look a little bit different than what you're used to.\nFor example, you know, in the last episode or a few episodes ago, we talked about how invalid blocks were produced because people were putting multiple signatures in.\nThat wasn't a problem with Bitcoin Core, that was a problem with the miner software.\nBut the software just gets stressed out and starts hitting weird corners.\nSimilarly, these BRC20 transactions are atypically small.\nThat's sort of one thing you would see about them.\nThey're not the typical two-input, two-output transactions that you see normally.\nThey're smaller.\n\nAaron van Wirdum: 00:06:29\n\nWhy?\nWhat do they look like?\nOr what's the deal?\n\nSjors Provoost: 00:06:31\n\nI haven't looked at them in detail, but I think a lot of them are just one-input one-output (transactions).\nBecause a lot of time, what you do is to update the state of your smart contract.\nYou're saying: \"Okay, my little fluffy image of a dolphin is now for sale.\"\nAnd that is just one JSON picture or one piece of JSON that you're uploading to the blockchain.\nBut you're not sending your coins anywhere, so you probably just sent the same coin to yourself with this extra node.\n\nAaron van Wirdum: 00:06:57\n\nRight.\nWe don't have to re-explain how inscriptions work: you just put this data in the witness, and most nodes wouldn't even look at it.\nThey're very small, like you said because not much else is happening with the transaction.\nThis is the idea. Okay, go on.\n\nSjors Provoost: 00:07:14\n\nIt does mean they're a little smaller than expected.\nThen, if you really look at how Bitcoin Core deals with things like the mempool and how transactions are relayed to other nodes before they go in a block: they were assuming that was happening at about seven transactions per second.\nWith SegWit, that increased a bit.\nFor this type of usage, it should be slightly higher, too.\nThe new release contains some improvements to handle these higher numbers.\nBut I'm being very vague here.\nSo we should do another episode where we try to explain that in more detail.\nI mean, probably when I understand it.\n\nAaron van Wirdum: 00:07:46\n\nOr not, because it doesn't sound super interesting.\nIf I understand you correctly, the Bitcoin Core software is calibrated with certain assumptions about how Bitcoin would usually be used, the software is optimized for that situation.\nNow, that situation changed because of BRC20 and inscriptions and all of that.\nThis new Bitcoin Core release takes this new way of using Bitcoin into account with its assumptions in its code.\n\nSjors Provoost: 00:08:29\n\nThe bigger picture here is that in blocks, we have a very hard limit.\nThere are only so many megabytes that go into a block, so it's much easier to reason about the worst case.\nBut for the mempool, there are not really any rules because it's not consensus.\nSo it's a little bit more complicated to make code that handles all mempool scenarios ideally.\n\nAaron van Wirdum: 00:08:50\n\nRight, okay.\nNow, let's make this as practical as we can.\nI'm a casual Bitcoin Core user; what's the benefit for me when I download Bitcoin Core 25?\nHow does it help me?\n\nSjors Provoost: 00:09:14\n\nProbably when there's another storm of these super small BSC20 transactions, your node will be happier.\nAnd by happier, I mean it's probably gonna make your computer less hot and use less memory...\n\nAaron van Wirdum: 00:09:19\n\n...require less resources.\nOkay, I like my computer cooler, so that's good.\n\n## Updates related to miniscript\n\nAaron van Wirdum: 00:09:19\n\nNext point: there are some updates with Miniscript.\nWe've done a whole episode on Miniscript.\nDo you remember what episode that was?\n\nSjors Provoost: 00:09:40\n\nI do not.\n\nAaron van Wirdum: 00:09:42\n\nLook it up.\nIn a previous Bitcoin Core release episode, we mentioned that something related to Miniscript was implemented, but it wasn't quite there.\nIt sounds like a new step has been made, right?\n\nSjors Provoost: 00:09:57\n\nYeah.\nWe described Miniscript several years ago, I think it was one of the first episodes.\nIt's not a consensus change, it's not a soft fork.\nA miniscript is a way to write scripts in a sane manner, because writing Bitcoin scripts by hand is the best way to lose your money.\nUsing miniscript allows you to write scripts in a safe way.\nBitcoin Core added support for making a watch-only wallet.\nThat's a wallet that you can see your balance, you can create addresses, you can use Miniscript, and you can receive coins, but you couldn't spend it.\nThat's not ideal for most people.\nThis new release does let you spend it.\nI'd still say it's pretty experimental.\nAnd there are some edge cases where you can actually not spend it.\n\nAaron van Wirdum: 00:10:42\n\nOkay, as a brief recap of Miniscript.\nThe thing here is that the Bitcoin protocol allows certain kinds of basic smart contract functionalities: it allows multisig, time locks, hash pre-images; it allows a bunch of things.\nWith Miniscript, it's very easy to implement these things in the smart contract QA, so you can receive coins in a certain way.\nSo, for example, you can have a board of directors in a company, and they can say, three out of five have to agree or two out of five after a year, whatever.\nYou can do that kind of stuff.\nWith Miniscript, you can implement that easily.\nNow with Bitcoin Core is where I'm getting lost.\nBecause this is what the Bitcoin protocol allows.\n\nSjors Provoost: 00:11:32\n\nYeah, nothing changed in the Bitcoin protocol for Miniscript.\n\nAaron van Wirdum: 00:11:34\n\nRight, so what is Bitcoin Core, actually?\n\nSjors Provoost: 00:11:37\n\nBitcoin Core is really multiple things.\nBitcoin Core is the node, the thing that checks the blocks for validity.\nNothing changed there.\nBut Bitcoin Core is also a software package that has a wallet built into it.\nAnybody's free to build a wallet, there's nothing special about the Bitcoin Core wallet.\nIn fact, it's probably not one of the most user-friendly wallets, but it is quite powerful.\nAt least, it's becoming quite powerful.\nI think that's a better way to say it, thanks to Miniscript.\nThis wallet is able to use Miniscript...\n\nAaron van Wirdum: 00:12:06\n\nWhen you say use Miniscript...\n\nSjors Provoost: 00:12:09\n\nIt means you can give it a piece of Miniscript and it understands how to create addresses, how to sign transactions using it, etc.\n\nAaron van Wirdum: 00:12:17\n\nBut Miniscript is literally script.\nIt's still something you code as a programmer, right?\n\nSjors Provoost: 00:12:23\n\nYeah.\n\nAaron van Wirdum: 00:12:24\n\nSo you give that code to the Bitcoin Core wallet.\nWe're not talking about the GUI, then.\nYou have to go into the command line, you paste a piece of code there and this is what Bitcoin Core will understand.\n\nSjors Provoost: 00:12:37\n\nI mean, some people may have been used to pasting xpubs around.\nThe way miniscript works in practice is just an xpub with a bunch of extra script around it saying what to do with the xpub.\n\nAaron van Wirdum: 00:12:50\n\nOkay this is what you paste in the command line.\n\nSjors Provoost: 00:12:53\n\nYeah.\nYou paste it in the command line, but there's no reason this could not be added to the user interface too.\nIt's just that you'll have to paste something magical that you probably don't understand so that's a bit dangerous.\n\nAaron van Wirdum: 00:13:07\n\nOkay.\nSo far, Bitcoin Core could understand it, and you could receive the coins.\nBut they were sitting there in your wallet, and you couldn't actually spend them.\nSounds like being able to spend them is a pretty good upgrade.\n\nSjors Provoost: 00:13:15\n\nIt's one of the nicer features of Bitcoin, although it's good for inflation if people don't, you know...\n\nAaron van Wirdum: 00:13:21\n\nOkay, so I guess.\nWait, but this is still sort of limited.\n\nSjors Provoost: 00:13:30\n\nYeah, I think for most cases that you've described, it'll work.\nYou can create a PSBT because there are now, I believe, two hardware wallets or maybe three.\nThe Ledger was first.\nThen I believe it was Coldcard or Bitbox, one of those two, that added support for Miniscript, which means you can make like a multisig wallet with three physically different devices with each of having their own trade-offs.\nIn order to do that you need PSBTs to move between these devices.\nBut there are some limits to what you can do.\nSo there may be some obscure scripts that you can write, you can receive coins on it, but you will not be able to send them to the hardware wallets using a PSBT.\nSome edge cases that, if you know Miniscript, you'll probably understand them.\nI don't.\n\nAaron van Wirdum: 00:14:13\n\nAlso, it doesn't work with Taproot yet.\n\nSjors Provoost: 00:14:16\n\nYeah, that's a bigger drawback, I would say.\nMiniscript was designed quite a while ago before Taproot.\nIt was initially designed for use with SegWit, basically SegWit script.\nThere's also a Miniscript standard for pre-SegWit script, I think.\nBut, at least, it was designed for SegWit scripts.\nAnd so there has now been a recent modification to that proposal that makes it work for the Taproot script.\nMost of the script is the same between SegWit and Taproot, most of the same opcodes so that you can make signatures, etc.\nBut there are a few subtle changes in Taproot.\nThat changes a few things about Miniscript.\n\nAaron van Wirdum: 00:14:57\n\nThat would be an upgrade in the future, I would assume.\n\nSjors Provoost: 00:15:00\n\nYeah.\nAnd again, that's one step at a time.\nThe first step would be that you can write miniscripts, and then it'll generate a script leaf in Taproot because you can put your individual scripts in individual leaves in the tree.\nBut there's no way yet to decide how to distribute your scripts between all the leaves most efficiently.\nIf you have five different conditions, do you want to make five leaves in taproot, or do you want to make one leaf that does two of them?\nThat sort of stuff, there's no tooling for that yet.\n\nAaron van Wirdum: 00:15:31\n\nRight.\n\nSjors Provoost: 00:15:32\n\nSoon, TM.\n\n## Fast wallet rescan\n\nAaron van Wirdum: 00:15:35\n\nTwo weeks.\nWe've mentioned two improvements so far.\nOne of which was the transaction loads, BRC20.\nAnd then we now mentioned Miniscript.\nNow we're getting to the third one.\nAnd that's actually the last one already.\n\nSjors Provoost:\n\nFast wallet rescan.\n\nAaron van Wirdum:\n\nFast wallet rescan.\nSjors, explain.\n\nSjors Provoost: 00:15:54\n\nSo, Bitcoin Core has a wallet built into it.\nLet's say you first used that in 2012 and you received some Bitcoin.\nThen you were like: \"okay, let me put this wallet on a USB stick, put it in a vault somewhere physically, so the whole wallet, not just the backup codes, the actual file and remove it from my computer because I'm traveling around with it\".\nYour node just keeps updating, keeps syncing, keeps syncing, keeps syncing.\nNow you come back and you put the USB stick back into your computer.\nMaybe that's a bad idea if there's a lot of money on it, but let's say you do.\nThen, your wallet is behind, in a sense, because the new transactions that happened since 2012 would not be in that wallet file, because it was in your vault.\nAnd your node doesn't really track them either, not specifically, it just has all the blocks.\nSo, there's something called a rescan, in which the wallet file...\n\nAaron van Wirdum: 00:16:51\n\nWait, wait, wait, wait.\nBecause it is confusing.\nI think what you mean to say is you received coins in one wallet, and now, after that, you started using a new wallet, right?\nWhen you say \"syncing, syncing, syncing\", your node is not syncing based on that wallet anymore.\n\nSjors Provoost: 00:17:10\n\nYeah, your node is still syncing.\nIt just stores all the blocks and checks their validity.\nBut it's not keeping track of how that matters for your wallet.\n\nAaron van Wirdum: 00:17:17\n\nRight.\nSo you basically reinstalled Bitcoin Core or something like that.\nYou got a new computer, something like that?\n\nSjors Provoost: 00:17:23\n\nNo, you can basically unload a wallet and then load it again.\nBut I guess another scenario would be, yes.\nSo you are restoring, you're reinstalling Bitcoin Core, and you're recovering your wallet.\nYou're trying to see if there are any coins in that wallet and find the transactions.\nThe only way to do that is to go through all the blocks and check if there's something useful in that block.\nThis takes a long time, it could be several hours.\n\nAaron van Wirdum: 00:18:49\n\nThat's not so bad.\n\nSjors Provoost: 00:18:52\n\nIt depends on your patience.\n\nAaron van Wirdum: 00:18:53\n\nI guess we can do better than that.\n\nSjors Provoost: 00:18:56\n\nYes, we can.\n\nAaron van Wirdum: 00:18:56\n\nSo how do we do better?\n\nSjors Provoost: 00:18:58\n\nThis is using the neutrino filters that we did in earlier episode about the compact block filters.\nI forgot the episode. Look for \"Bitcoin Explained Neutrino\", and you'll find it.\nThe idea there is that light wallets can use these filters to figure out which blocks they need to download.\nInstead of downloading all the blocks, a mobile wallet can figure out by itself, without revealing any private information to the outside world, which blocks it should download.\nIn order to do that, it needs to download something called these filters.\nThese filters are much smaller than normal blocks.\nBitcoin Core can create these filters and now the wallet will take advantage of that because rather than scanning every block from the history from the last time you checked your wallet, it now knows which blocks it needs to scan.\nAnd so it'll scan fewer blocks, which is faster.\n\nAaron van Wirdum: 00:19:50\n\nWait.\nSo if I have a `wallet.dat` file on a USB stick, as we discussed, that's the example we're using.\nI buy a new computer tomorrow and I sync Bitcoin Core.\nNow I get the `wallet.dat` file.\nSomehow Bitcoin Core would know which blocks to download based on the `wallet.dat`?\n\nSjors Provoost: 00:20:12\n\nThe `wallet.dat` file contains the addresses that belong to your wallet.\nDepending on how old it is, that's gonna be somewhere between 2000 and 8000, because it basically creates a cache of addresses.\nIt knows these addresses, and yet, using these filters which Bitcoin Core will also have created, it's able to know which blocks are relevant and which blocks are not, because these filters are like a compressed summary of the blocks.\nIt looks at the filters and it says: \"Okay, if I run my addresses through this filter, does it say yes or no?\"\nIf it says yes, I'm gonna download the block and check everything.\nThe filters are not accurate, so it's possible that you might download ten times more blocks than you really need, but you're not downloading them all.\nIn the case of Bitcoin Core it's not even about downloading them, it's just about checking them.\n\nAaron van Wirdum: 00:21:02\n\nSo it doesn't work with a pruned node, right?\nYou do need to have all the blocks available.\n\nSjors Provoost: 00:21:09\n\nCorrect.\nAt the moment, it does not work with a pruned node.\nIf you have these filters on your computer, but have pruned blocks, you would be able to know which blocks to download again which currently you can only do with some manual magic.\nIt is possible with the pruned node, but then you need a script.\nI've tried this myself, like experimenting with it.\nYou can scan...\nI don't know if I tried this myself, I may not.\nNo, I think I'm lying here.\nIn theory, it's possible to download all the blocks that you're missing and then scan them, but the wallet will be very confused.\n\nAaron van Wirdum: 00:21:44\n\nOkay.\nI don't understand how this works, but that's probably because I forgot how Neutrino works.\nSo, if I want to understand that, I would have to go back to our own episode and listen to that.\n\nSjors Provoost: 00:21:53\n\nSounds good.\n\nAaron van Wirdum: 00:21:54\n\nUnless, Sjors, you want to try explaining this right now?\n\nSjors Provoost: 00:21:58\n\nDid you forget how Neutrino works?\n\nAaron van Wirdum: 00:22:00\n\nI mean, I don't remember.\n\nSjors Provoost: 00:22:01\n\nI just told you.\nSo the idea is if you're...\n\nAaron van Wirdum: 00:22:03\n\nI mean, I understand the idea. I just don't understand why that...\n\nSjors Provoost: 00:22:07\n\nWhy it works?\nIt's magical math.\n\nAaron van Wirdum: 00:22:09\n\nYes, exactly.\nI feel that at some point I understood it more than just magical math, but not right now.\n\nSjors Provoost: 00:22:18\n\nThe magical math basically says that you've done some calculations before to make a filter from a block and then you can check against the filter.\nYou say \"do these addresses belong to this block or not?\"\nThat is it.\n\nAaron van Wirdum: 00:22:31\n\nOkay, do you want just to leave it there?\n\nSjors Provoost: 00:22:33\n\nYeah, because that's about as well as I can explain it.\n\nAaron van Wirdum: 00:22:35\n\nOkay, we'll leave it there.\nIf you want to know more, I think we go a little bit more in-depth in our actual Neutrino episode.\n\n## 65 byte transactions\n\nSjors Provoost: 00:22:41\n\nWe missed a topic.\n\nAaron van Wirdum: 00:22:43\n\nI wasn't done, Sjors.\nI think you will bring up the RBF, the full RBF.\n\nSjors Provoost: 00:22:49\n\nNo, no, no, no.\nThe 65 byte transactions.\n\nAaron van Wirdum: 00:22:53\n\nOh, you're right, we missed a topic.\nSjors, you're so sharp today.\nLuckily, because I'm apparently not.\nSo yes, there's something going on with the minimum size of transactions.\n\nSjors Provoost: 00:23:07\n\nYeah, we added more freedom to the mempool.\n\nAaron van Wirdum: 00:23:11\n\nIs that so?\n\nSjors Provoost: 00:23:12\n\nYes.\n\nAaron van Wirdum: 00:23:13\n\nOkay, explain.\n\nSjors Provoost: 00:23:14\n\nRemember there is consensus, which are the rules for the blocks, and there's standardness, which are rules for the mempool.\nGenerally, the standardness rules are stricter than the consensus rules.\nIn fact, that's always the case.\nIn other words, There are some transactions that are perfectly fine in a block, but they are not fine in the mempool.\nThis has to do with preventing denial of service attacks on your node.\nIn this case, though, it's not really that.\nThere is a minimum size.\nI believe it was 84 bytes, so, any transaction that's less than 84 bytes would not be relayed by nodes.\nIf it's in a block, it's fine.\n\nAaron van Wirdum: 00:23:56\n\nIs there a minimum size (for transactions) to be in blocks at all?\n\nSjors Provoost: 00:24:01\n\nI don't think so.\nThere's probably a minimum practical size because you must point to a previous transaction, etc.\n\nAaron van Wirdum: 00:24:06\n\nThere's an actual minimum size that a transaction can be, but there's no consensus rule for it.\n\nSjors Provoost: 00:24:12\n\nI guess you'd say there's an inherent minimum size.\nIt follows from what has to be in a transaction.\nBut other than that, I don't think there's a number.\n\nAaron van Wirdum: 00:24:19\n\nOkay, but there is a minimum size for the mempool policy.\n\nSjors Provoost: 00:24:24\n\nI think it was something like 82 or 84, some number.\nAnd this number has decreased.\nNow it's 65.\n\nAaron van Wirdum: 00:24:32\n\nWhy?\n\nSjors Provoost: 00:24:32\n\nThere's some use for it.\nI think the idea is that it makes it a little bit easier to burn coins if you need to.\n\nAaron van Wirdum: 00:24:42\n\nTo burn coins?\n\nSjors Provoost: 00:24:44\n\nYeah, if you have some dust that you want to get rid of.\nYou want to remove it from the UTXO set.\n\nAaron van Wirdum: 00:24:49\n\nOkay.\n\nSjors Provoost: 00:24:50\n\nI think it's easier to do that with smaller transactions.\n\nAaron van Wirdum: 00:24:55\n\nWait, what?\nWhy would you want to do that?\n\nSjors Provoost: 00:24:58\n\nBecause you want to clean up the UTXO set.\n\nAaron van Wirdum: 00:25:01\n\nBut you literally want to throw away coins?\n\nSjors Provoost: 00:25:04\n\nYou'd throw away coins that are not economical.\n\nAaron van Wirdum: 00:25:08\n\nWhy not just leave it alone?\n\nSjors Provoost: 00:25:10\n\nBecause it's sitting in people's memory and using up resources.\nBe a good citizen and clean up your UTXOs.\n\nAaron van Wirdum: 00:15:18\n\nI guess, okay, yeah, go on.\n\nSjors Provoost: 00:25:20\n\nI think this was proposed by Greg Sanders ([instagibbs](https://github.com/instagibbs)).\nHe's working on ephemeral anchors, which are ways to combine two transactions that are paying a zero fee and then one is bumping the other.\nMaybe those transactions are actually smaller, and maybe that's why he needs it.\nI haven't looked at the reasoning.\nIn any case, it's possible, so it's done.\nThe original reason is kind of funny.\nThe original limit was made this weird number like 82 or 84 because if they had made it 65, then the bad people would have understood why it was done, and they might have been able to exploit something before the fix was released.\nSo this is a case of you have a vulnerability, you know that if people make 64 byte transactions, they can cause problems.\nYou don't want to give that away too obviously.\nSo you say, yeah, we won't make the limit 65.\nWe will make it like 84 and then make up some excuse for why 84 is a good number.\nBecause nobody needed it.\n\nAaron van Wirdum: 00:26:17\n\nThis is super confusing.\nLuckily, I know what you're talking about.\n\nSjors Provoost: 00:26:20\n\nAll right.\nWell, maybe you can explain it.\n\nAaron van Wirdum: 00:26:22\n\nYes.\nSo you mentioned the original number, and you said that it was 82.\nSo that's the confusing part.\nNo. The original number was 64.\nThat was a minimum of 64.\nAnd then it was increased?\n\nSjors Provoost: 00:26:34\n\nNo, there was no minimum.\nBut it had to be increased above 64.\n\nAaron van Wirdum: 00:26:39\n\nOh, so it was not 64?\n\nSjors Provoost: 00:26:40\n\nNo, I think it was just...\n\nAaron van Wirdum: 00:26:41\n\nSo there was no minimum?\nYeah, okay, okay.\nSo there was no minimum.\nAnd then a minimum was imposed.\nWhen was this?\n\nSjors Provoost: 00:26:50\n\nI think it was 2017, maybe earlier.\n\nAaron van Wirdum: 00:26:53\n\nOh, a while ago.\n\nSjors Provoost: 00:26:55\n\nIt might have been done even earlier.\n\nAaron van Wirdum: 00:26:56\n\nThen a minimum was imposed, and that minimum was 84.\n\nSjors Provoost: 00:27:00\n\nSomething like that.\n\nAaron van Wirdum: 00:27:01\n\nAnd now that has been decreased to 65.\n\nSjors Provoost: 00:27:05\n\nExactly.\n\nAaron van Wirdum: 00:27:06\n\nWhat you're saying is the reason that 84 was picked originally is because 65 would have been ideal, but they didn't want to do that because it would reveal something.\nSo they picked 84, which was a little bit more off to the side, and then attackers wouldn't notice it, hopefully.\n\nSjors Provoost: 00:27:30\n\nThat's right.\n\nAaron van Wirdum: 00:27:30\n\nWhat was wrong with?\nWhy is 64 a magical number?\n\nSjors Provoost: 00:27:36\n\nIn fact, the strict rule that you really need is not 64.\nIt can be smaller than 64, it can be bigger than 64, but you don't want 64.\nThe reason has to do with Merkle trees.\nWe've talked about Merkle trees in earlier episodes.\nWe even tried to explain Merkle trees in earlier episodes, I think we should not try that again.\n\nAaron van Wirdum: 00:27:53\n\nProbably multiple times.\n\nSjors Provoost: 00:27:54\n\nWhat it looks like is you take two transactions, you hash each of them, and you put the hash of the first transaction on the left, the hash of the second transaction on the right.\nAnd the hash of a transaction is how many bytes?\n\nAaron van Wirdum: 00:28:15\n\n64!\n\nSjors Provoost: 00:28:16\n\nNo.\nThe hash of a transaction is...\n\nAaron van Wirdum: 00:28:19\n\nI don't know. Should I know?\n\nSjors Provoost: 00:28:20\n\nIt's called SHA256.\nThe 256 stands for the number of bits.\n256 divided by 8 is 32.\nSo, the hash is 32 bytes.\nYou put two of them next to each other.\nThat is 64.\n\nAaron van Wirdum: 00:28:38\n\nRight.\n\nSjors Provoost: 00:28:38\n\nThen, you know, this tree goes up and up and up, you keep combining two.\nSo every...\n\nAaron van Wirdum: 00:28:42\n\nWhat? This is not how a Merkle tree works.\n\nSjors Provoost: 00:28:44\n\nThat's exactly how a Merkle tree works, at least how it works in Bitcoin.\nYou start with transactions at the bottom, you pair them, and then you hash each of them.\nYou put the hashes next to each other, so 32 bytes next to 32 bytes, that's 64 bytes in total.\n\nAaron van Wirdum: 00:29:04\n\nRight, yeah, hash these together, right?\n\nSjors Provoost: 00:29:04\n\nYeah, exactly.\n\nSjors Provoost: 00:29:06\n\nThe problem is that if you implemented the Merkle tree well it would be clear how many leaves there would be.\nYou would basically say this is a Merkle tree and has so many leaves.\nSomebody who looks at the Merkle tree can extract it and see these are all transaction hashes.\nThe problem is, in Bitcoin, it's done unsafely and this has caused problems in the past.\nAnything that's 64 bytes can be either a transaction of 64 bytes or it can be one of these points inside the Merkle tree.\n\nAaron van Wirdum: 00:29:43\n\nOkay, they look the same.\nI just want to clarify...\n\nSjors Provoost: 00:29:45\n\nThey look the same.\nThat is where multiple attacks have come from, including much older ones where you could create a block, then you would pretend that the block is invalid and send the same thing again.\nAll sorts of nasty things.\n\nAaron van Wirdum: 00:30:00\n\nI want to clarify: we're getting really into the weeds with weird niche, but interesting attacks, here.\nSo, yeah, okay.\nThe transaction hash is 32 bytes...\nI'm not going to try to re-explain this one even, but I was kind of following you.\n\nSjors Provoost: 00:30:16\n\nTransaction height is 32 bytes.\nYou put two of them next to each other, and now you have 64 bytes.\nSo, what does that mean?\nWell, I think it was Sergio who...\n\nAaron van Wirdum: 00:30:24\n\nSergio Demian Lerner.\n\nSjors Provoost:\n\n... who wrote a [blog post in 2017](https://bitslog.com/2018/06/09/leaf-node-weakness-in-bitcoin-merkle-tree-design/) explaining exactly what you can do to attack the user of an SPV wallet.\n\nAaron van Wirdum: 00:30:36\n\nI'll add the link to the article in the show notes.\n\nSjors Provoost: 00:30:39\n\nYou definitely want to read it.\nI'll try to explain it at some high level, but I find it confusing.\n\nAaron van Wirdum: 00:30:43\n\nGo for it.\n\nSjors Provoost: 00:30:43\n\nWhat is important to know is that it's an attack on SPV wallets, these are wallets that do not download full blocks but only get a summary.\nThey get something called an SPV proof, which is saying \"hey, this transaction exists, it's inside this block\", and then you give it all the block headers so the SPV wallet knows there's some proof of work on top of this transaction.\nIt can't check all the consensus rules, but at least it knows some miner paid a lot of money to make this thing.\nThat's a kind of wallet use that's not very common anymore because there are all sorts of problems with it, including the one we're about to describe.\nIf you have a few million dollars in budget, you can perform this attack and this was in 2017.\nI think you also need to have a pretty substantial amount of Bitcoin to do that which was cheaper back then.\nYou create a 64-byte transaction and you pretend that it is part of this Merkle tree or the other way around.\nThis is where I get confused.\nThe idea here is, because a transaction is hashed into 32 bytes, and there are two of them next to each other, that means that you can basically start making a...\nHow do you say this?\nThere are certain parts of the transactions that can be whatever you want.\nSo you don't have actually to find a SHA256 preimage.\nYou have to try far fewer random transactions to be able to craft a transaction that looks like this.\nOne of the tricks he does is he doesn't care about the amount in advance, so how many amounts can there be?\nThere are just several bytes worth of what the amounts can be.\nSo you basically keep looking for transactions with random different amounts.\nOnce you find the right hash, you use it and you send money to yourself.\nAnyway, you should read the blog post, but the attack is quite expensive.\n\nAaron van Wirdum: 00:32:37\n\nCan I summarize this?\nHere's the summary: SPV wallets are not secure if you want to accept millions of dollars worth of Bitcoin.\n\nSjors Provoost: 00:32:48\n\nAssuming his calculation is correct, it would cost several million to do this attack at the time.\nIf you are receiving more than a few million, you should absolutely run a full node.\n\nAaron van Wirdum: 00:32:58\n\nThere are some weird quirks in the Bitcoin protocol and miner incentives.\nSPV is not secure for that.\n\nSjors Provoost: 00:33:04\n\nNo, and this attack also requires collaboration from a miner.\nIf you have collaboration from the miner anyway, you might as well do a noble double spend.\nI think the target audience for this attack was automated systems that use SPV proofs.\nI think, at the time, Liquid and RSK had some components that were fully automated and would use these SPV proofs.\nThey would have lots of money in them.\n\nAaron van Wirdum: 00:33:27\n\nOkay. Now I want to ask you, Bitcoin Core made this change?\nApparently they made the change a couple of years ago, actually.\nIt's only now, I guess the developer figured most people have now upgraded, so now we can stop pretending that 84 was...\n\nSjors Provoost: 00:33:44\n\nNo, the pretending stopped earlier.\nI think it was changed in 2017 without any explanation, although his blog post was around the same time.\nThen in 2019 there were comments added to the source code saying actually this is nonsense but this is the reason.\nOnly now somebody bothered to actually change the limit, which is because nobody needed it.\nAnd the other irony is...\n\nAaron van Wirdum: 00:34:08\n\nSo why is it needed now?\n\nSjors Provoost: 00:34:10\n\nI don't know.\nI mean, that's what we speculated on earlier.\nMaybe it's easier to burn money, or it has something to do with these ephemeral anchors.\nI didn't study it in enough detail.\n\nAaron van Wirdum: 00:34:19\n\nOkay.\nAnyway, so now the limit is 65.\nHowever, even now, that's only a policy change.\n\nSjors Provoost: 00:34:25\n\nYeah.\nThe irony is this never prevented the attack because the attack as described actually requires being a miner or at least working with a miner.\nIt's ironic because a miner doesn't care about standards and rules.\nIt was a step, like, okay.\nBut there's something called defense in depth where you say, \"okay, we think only a miner can do this, but maybe somebody else figures out a way to do it without the help of a miner\".\nIt still helps to make it more difficult to relay these things.\nAnd there is a software proposal called the Great Consensus Cleanup, which Matt Carollo proposed in 2017.\n\nAaron van Wirdum: 00:34:58\n\nWe may have done an episode on that or no.\n\nSjors Provoost: 00:35:00\n\nYep, and one of the parts of that proposal was to make the minimum transaction size 65 bytes.\nThat would be consensus change.\n\nAaron van Wirdum: 00:35:06\n\nRight.\n\nSjors Provoost: 00:35:07\n\nWhich is precisely for this reason.\n\n## Replace-by-fee implementation release\n\nAaron van Wirdum: 00:35:08\n\nRight, but that's not what this is.\nI feel we're getting really into the weeds with this Bitcoin Core 25 episode, Sjors.\nI think this is a very niche upgrade, but it's an upgrade.\nWe've now covered four topics.\nWe're done with this one, right?\n\nSjors Provoost: 00:35:26\n\nI think we've covered four of them.\n\nAaron van Wirdum: 00:35:28\n\nGood.\nAre we done with the episode?\n\nSjors Provoost: 00:35:31\n\nI think so.\n\nAaron van Wirdum: 00:35:32\n\nI mean that was this other thing you wanted to mention maybe something about the full RBF (replace-by-fee) release.\n\nSjors Provoost: 00:35:36\n\nYeah, there's an alternative implementation which you can download at your own risk.\nMake sure to check all the signatures.\n\nAaron van Wirdum: 00:35:44\n\nIs this is Peter Todd's implementation?\n\nSjors Provoost: 00:35:45\n\nYes, Peter Todd, I think, together with Antoine Riard.\nThey're lobbying the full RBF thing, which we've done plenty of episodes about.\nIt's essentially Bitcoin Core 25 plus the full RBF stuff.\nThe one thing that's interesting about it is that when you turn on full RBF, you're able to replace transactions without setting the RBF signal.\nBut if you're sending it to your peers, none of those peers might relay it.\nSo, you want to find other nodes out there in the network that also support this feature.\nThere's something called service flags in which nodes can communicate that they have this feature and deliberately connect to him.\nThis patch does that.\nBut I should warn you that changing peer-to-peer code is always very scary.\nIf just one or two people are doing that, I don't know, it's up to you.\n\n## Farewell message\n\nAaron van Wirdum: 00:36:40\n\nAnyways, this is not Bitcoin Core really, and we were talking about Bitcoin Core.\nSo that's the episode then, Sjors.\n\nSjors Provoost: 00:36:46\n\nThat's right.\n\nAaron van Wirdum: 00:36:47\n\nBitcoin Core 25 is released.\nWhere can people find it?\n\nSjors Provoost: 00:36:49\n\nBitcoinCore.org.\n\nAaron van Wirdum: 00:36:51\n\nThere you go.\n\nSjors Provoost: 00:36:52\n\nThank you for listening to Bitcoin...\n\nAaron van Wirdum: 00:36:54\n\nExplained.\n\n",
    "body_type": "markdown",
    "created_at": "2023-06-26T00:00:00.000Z",
    "domain": "https://btctranscripts.com/",
    "url": "https://btctranscripts.com/bitcoin-explained/bitcoin-core-v25",
    "categories": [
        "podcast"
    ],
    "tags": [
        "bitcoin-core",
        "miniscript",
        "wallet",
        "compact-block-filters",
        "transaction-relay-policy"
    ],
    "media": "https://www.youtube.com/watch?v=TN2P9xwd6ZU",
    "authors": [
        "Sjors Provoost",
        "Aaron van Wirdum"
    ],
    "indexed_at": "2024-03-21T16:33:36.102Z",
    "transcript_by": "edilmedeiros via review.btctranscripts.com",
    "summary": "In a recent comprehensive dialogue, Sjors Provoost and Aaron van Wirdum embarked on a deep dive into the latest developments of Bitcoin Core 25, unraveling the layers of improvements that, while seemingly modest at first glance, significantly enhance the Bitcoin ecosystem. Their conversation began with reflections on their travels, setting an anticipatory mood for discussing the nuanced advancements brought about by the new release. Despite initial appearances of minor updates, they revealed substantial under-the-hood enhancements aimed at bolstering the network's robustness and efficiency.\n\nA key area of focus during their discussion was the performance enhancements related to BRC20 transactions and adjustments within Bitcoin Core to accommodate evolving Bitcoin usage patterns, notably inscriptions and ordinals. Provoost highlighted how these emerging activities have necessitated a reevaluation of transaction processing and relay, leading to optimizations in Bitcoin Core 25 designed to efficiently manage increased transaction loads. These modifications are crucial for ensuring node resilience against potential spikes in activity, thereby maintaining the network's stability amidst the growing popularity of novel transaction types.\n\nDelving further into technical advancements, the conversation illuminated the integration of Miniscript within Bitcoin Core, emphasizing its role in facilitating secure and complex Bitcoin scripts in a more accessible manner. This development enhances the wallet functionality within Bitcoin Core, allowing for a broader range of transactions to be executed more smoothly. However, Provoost noted the experimental nature of this feature, indicating ongoing refinement efforts to maximize its practicality and usability within the ecosystem.\n\nMoreover, Provoost and van Wirdum explored the practical implications of Miniscript's integration, including the ability for users to input Miniscript code via command lines for generating addresses and signing transactions. This advancement marks a significant step towards democratizing access to advanced Bitcoin functionalities, despite the complexities involved. They also discussed limitations, especially regarding hardware wallet integration and Taproot compatibility, underscoring the continuous efforts toward full Miniscript support for enhanced script handling efficiency.\n\nLastly, the podcast shed light on another critical improvement: the fast wallet rescan feature facilitated by compact block filters from the Neutrino project. This enhancement significantly streamlines the process of rescanning blockchain history for wallets, exemplifying the commitment to refining Bitcoin's infrastructure for improved user experience and efficiency.\n\nThroughout their dialogue, Provoost and van Wirdum adeptly navigated the intricate updates and their implications for the Bitcoin network's evolution. By dissecting the immediate benefits and broader impacts of these enhancements, they provided a clear perspective on the meticulous attention to detail and forward-thinking approach embodied in Bitcoin Core 25. The incremental improvements encapsulated in the release play a pivotal role in strengthening the network's robustness, efficiency, and adaptability, ensuring its preparedness for the diverse and dynamic ways it is utilized. Through their insightful analysis, listeners gain a comprehensive understanding of the significance and narrative behind the ongoing developments in Bitcoin technology."
}