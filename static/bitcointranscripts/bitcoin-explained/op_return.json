{
    "id": "bitcointranscripts+bitcoin-explained+op_return",
    "title": "OP_RETURN",
    "body_formatted": "{\"type\":\"heading\",\"text\":\"Intro\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:00:19\"}, {\"type\":\"paragraph\",\"text\":\"Live from Utrecht, this is Bitcoin Explained.\\nHey Sjors.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:00:24\"}, {\"type\":\"paragraph\",\"text\":\"What's up?\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:00:25\"}, {\"type\":\"paragraph\",\"text\":\"How exciting.\\nTwo weeks ago you told me that maybe you would go to Bitcoin Amsterdam.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:00:31\"}, {\"type\":\"paragraph\",\"text\":\"Yes.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:00:31\"}, {\"type\":\"paragraph\",\"text\":\"And now you're a speaker.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:00:33\"}, {\"type\":\"paragraph\",\"text\":\"I'm a panelist, probably not a real speaker.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:00:37\"}, {\"type\":\"paragraph\",\"text\":\"That counts that that's a speaker in my book Sjors.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:00:40\"}, {\"type\":\"paragraph\",\"text\":\"Sounds good.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:00:41\"}, {\"type\":\"paragraph\",\"text\":\"How exciting.\\nSjors today we're gonna discuss we're gonna discuss a blog post by BitMax Research.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:00:48\"}, {\"type\":\"paragraph\",\"text\":\"That's right.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:00:48\"}, {\"type\":\"paragraph\",\"text\":\"Which is about the OP_RETURN Wars.\\nSo exactly, very nice clickbait title.\\nDo you remember what the name of the blog post is?\\nWas it was it just the OP_RETURN Wars?\"}, {\"type\":\"heading\",\"text\":\"OP_RETURN War\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:01:00\"}, {\"type\":\"paragraph\",\"text\":\"It's called the OP_RETURN wars of 2014, Dapps versus Bitcoin transactions.\\nAnd it's a slightly clickbaity title because well it was only called wars by certain other people.\\nBut\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:01:14\"}, {\"type\":\"paragraph\",\"text\":\"wasn't it referred to as the OP_RETURN wars previously in your memory?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:01:18\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, but some people object that the OP_RETURN wars have been sort of that term was phrased by people trying to launch various coins and trying to make Bitcoin developers look bad.\\nNot everybody likes the term.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:01:31\"}, {\"type\":\"paragraph\",\"text\":\"Okay, fair enough.\\nOkay, so let's start at the beginning.\\nThis has been, we've discussed this in some of our episodes here and there before, I think, but first of all, Sjors, what is OP_RETURN?\"}, {\"type\":\"heading\",\"text\":\"What is OP_RETURN\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:01:44\"}, {\"type\":\"paragraph\",\"text\":\"So When OP_RETURN appears in a transaction, so in a script, then as soon as that happens, the script is invalid.\\nAnd so a nice example, and so the most practical form to use that would be that your entire script starts with OP_RETURN, and then it follows whatever you want to put there, for example, some random text.\\nBecause when a script is invalid, you know it's not going to run, and that means that nobody can ever spend it.\\nBecause no matter what you do, it's always going to be invalid.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:02:14\"}, {\"type\":\"paragraph\",\"text\":\"Right, but that to me sounds like the transaction would be invalid.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:02:18\"}, {\"type\":\"paragraph\",\"text\":\"Oh, no, no, no.\\nIt's an output of a transaction.\\nSo if you're sending to an OP_RETURN transaction, so if you're sending, if your address, quote unquote, so the script on the blockchain is in OP_RETURN followed by anything, then whoever tries to spend it will find that their transaction is invalid.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:02:34\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nOkay.\\nSo you can send to an OP_RETURN.\\nIt's just provably unspendable.\\nYou can't spend anything from an OP_RETURN.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:02:42\"}, {\"type\":\"paragraph\",\"text\":\"Exactly.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:02:42\"}, {\"type\":\"paragraph\",\"text\":\"From an output that has OP_RETURN in it.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:02:45\"}, {\"type\":\"paragraph\",\"text\":\"Yes.\\nAnd because it's provably unspendable, that allows software that processes the Bitcoin blockchain to make some optimizations, it can basically just pretend that those coins don't exist.\\nBut whether they really exist or not is kind of in the eye of the beholder.\\nThey're there, but it's impossible to spend them.\"}, {\"type\":\"heading\",\"text\":\"How long has OP_RETURN been around\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:03:01\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nAnd OP_RETURN has always been in Bitcoin?\\nHas it always been a function in Bitcoin?\\nHas it always been possible?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:03:09\"}, {\"type\":\"paragraph\",\"text\":\"As far as I know, yes.\\nAnd so that means it's also been always been possible to put anything you want after the OP_RETURN code.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:03:17\"}, {\"type\":\"paragraph\",\"text\":\"Right, so you could always create a transaction with OP_RETURN.\\nHowever, and now we'll get to this in a second, I think originally transactions that spent from an OP_RETURN, no wait, transactions that spent to, wait now I'm confused.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:03:30\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, as far as I know, originally, if you created a transaction that spends to an OP_RETURN, then nodes generally will not relay that transaction.\\nThey would simply ignore it.\\nHowever, if they saw it in a block, they would be fine with it.\\nSo that's called standardness.\\nIn this case, it's not standard.\\nSo standard transactions are transactions of a specific shape and form.\\nThose are automatically relayed.\\nAnd that's partially to prevent people shooting themselves in the foot by creating a transaction that's just wrong.\\nAnd there's probably some other reasons that we can get into in another podcast.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:04:04\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nYeah.\\nSo, yeah.\\nSo, an OP_RETURN was always possible, but Bitcoin nodes generally just wouldn't forward it to other nodes.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:04:13\"}, {\"type\":\"paragraph\",\"text\":\"That's right.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:04:13\"}, {\"type\":\"paragraph\",\"text\":\"So, it's very hard to get it into an actual block.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:04:16\"}, {\"type\":\"paragraph\",\"text\":\"Yeah.\\nYou'd have to talk to a miner.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:04:18\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, and then the miner would have to put it into a block, because I assume that mining software also by default just wouldn't include it in blocks, right?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:04:27\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, so either you would have to know which node is a miner, And then maybe that miner is configured that they do consider it standard, but more likely, the miner would have to manually include it through some process.\"}, {\"type\":\"heading\",\"text\":\"OP_RETURN Node acceptance and Standardness\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:04:40\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nSo at some point, and this is what the blog post is about, at some point, it was decided that nodes, that Bitcoin nodes, Bitcoin Core nodes specifically, although back then it wasn't even called Bitcoin Core yet, they would actually start forwarding some OP_RETURN transactions, right?\\nSo why was that?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:05:01\"}, {\"type\":\"paragraph\",\"text\":\"Yeah.\\nSo in roughly the end of 2013 or the beginning of 2014, there was a release of Bitcoin Core that would let you that if there was less than 40 bytes or 40 bytes or less after the OP_RETURN message, it would be standard.\\nSo you would relay those.\\nAnd then later on, as we'll discuss, it was increased to 80 bytes.\\nAnd so the reason is, it was kind of, I think one of the analogies that was used, or many analogies used, I'll stick to the, let's say the friendly ones, is this idea of People were breaking windows all the time because they're trying to get inside of a house and it was nice to just leave the window open, basically.\\nSo it was actually a form, it was meant as a form of damage control.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:05:42\"}, {\"type\":\"paragraph\",\"text\":\"Well, before we get to the analogy, or Well, now you've given the analogy, but what is it an analogy for?\\nWhat are we actually talking about?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:05:49\"}, {\"type\":\"paragraph\",\"text\":\"What is the actual damage, right?\\nWhy were people breaking windows?\\nSo basically, people were trying to put things on the blockchain that are not transactions, that are not moving money, but that are sharing information.\\nAnd one example of that, which I'll shamelessly plug, you can also find in my book, is to put the Bitcoin white paper inside the blockchain.\\nAnd the way they would do that is to create a transaction that sends money to a multi-sig address and that multi-sig address would have three keys but those keys you know would not actually be keys because a public key would you know be a nice piece of data but they wouldn't be actual keys and it turns out that if you add up all these fake keys you can reconstruct a Bitcoin white paper.\\nNow, the problem with that is that for nodes who are looking at the blockchain, those transactions look like they're real.\\nThey look like they're really sending money to somebody and that somebody apparently is a multi-sig owner.\\nAnd this is where the problem comes in.\\nNodes don't only need to relay those transactions and store them in the blockchain, they also need to keep track of this thing called the UTXO set.\\nSo there's a set, usually kept in memory if at all possible, of every coin that currently exists.\\nSo when you create a transaction, you're spending a coin, so those coins no longer exist, and you're creating new coins, and those coins do exist.\\nThat's what you need to keep track of.\\nAnd so this white paper and this other stuff that was put in that way has to be kept track of by nodes.\\nEven today, even though nobody will ever spend it, you still have to keep track of it.\\nAnd so the solution is to use OP_RETURN.\\nNow you can still put that kind of data on the blockchain if you wanted to, but nodes don't have to keep track of it because they know it is not spendable.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:07:36\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nSo to go one step back or to tackle that step by step.\\nSo originally if you wanted to include data in the blockchain, could be any type of data, You gave the Bitcoin white paper as an example.\\nThen what people would originally do is basically break down the Bitcoin white paper into data and then create public keys that aren't actually public keys because there are no private keys for them.\\nAnd these public keys would just include the data that is the Bitcoin white paper, right?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:08:04\"}, {\"type\":\"paragraph\",\"text\":\"Yes.\"}, {\"type\":\"heading\",\"text\":\"Keeping unnecessary data off the UTXO set\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:08:05\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nSo, and then that's transmitted over the Bitcoin network.\\nEveryone verifies these as transactions.\\nIt's included in the blockchain and then it's also included in the UTXO set.\\nNow, with OP_RETURN, it's still included in the blockchain.\\nYes.\\nHowever, it's not included in the UTXO set.\\nThat's the real difference there, right?\\nYeah, exactly.\\nNotes just know these coins are provably unspendable, so we don't have to store these in the UTXO set.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:09:33\"}, {\"type\":\"paragraph\",\"text\":\"Yes, so it saves some time because now when you know you still have to download the blockchain, you still have to check every block, that does not change.\\nBut the difference is that this little database that you're keeping of the UTXO set, that no longer has to grow.\\nAnd you can also normally throw away old blocks.\\nSo if you have a small hard drive, you can always toss out the old blocks, but you can never toss out anything from the UTXO set.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:09:54\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, so the two main benefits are, first of all, storage, especially for pruned nodes that don't store the entire blockchain, because they now have a benefit because they have a smaller UTXO set.\\nAnd the other one is computational.\\nWhen a new transaction comes in, there's a smaller UTXO set to check the new transaction against.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:10:13\"}, {\"type\":\"paragraph\",\"text\":\"Yeah.\\nSo I guess a better way to say that is it's saving you, potentially saving you memory.\\nSo ideally you want to keep the entire UTXO set in RAM.\\nNow that's already not possible these days.\\nI guess back when this discussion was happening, the UTXO set may have been much smaller, maybe a few hundred megabytes.\\nNow it is over 10 gigabytes.\\nSo for now most people unless you have like you know 20 gigabytes of RAM you're probably not holding it in RAM anyway.\\nBut it is nice if you can keep the UTXO set in RAM all the time it's much faster.\\nAnd we did an episode about that.\\nIt is episode 15 in which we explain a mechanism that could solve this problem called U3XO.\\nAnd that would remove the need to keep the UTXO set in RAM, but it comes at the expense of some trade-offs.\\nAnd we just explain those there.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:11:02\"}, {\"type\":\"paragraph\",\"text\":\"Okay, let's stick to the OP_RETURN for now.\\nPeople were storing data in the blockchain.\\nThis came at a cost for people that were running full nodes.\\nAnd so at some point, developers figured, okay, look guys, if you're going to store data in the blockchain anyways, then please use OP_RETURN.\\nAnd that way, there's a smaller cost to all nodes.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:11:27\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, but there was a second request too, I would say, because this limit of 40 bytes.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:11:32\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I was going to get there.\\nSo OP_RETURN was always in the protocol, but it was basically useless because nodes wouldn't forward OP_RETURN transactions.\\nThen Bitcoin developers said, all right guys, you're going to store data anyways.\\nSo we'll allow, we'll effectively enable OP_RETURN.\\nBut then the next debate was about the size of the OP_RETURN messages.\"}, {\"type\":\"heading\",\"text\":\"The OP_RETURN message size debate\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:11:55\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, exactly.\\nSo one number you could have used for that size was to say, okay, how big can these multi-sig transactions be?\\nAnd I think that was 172 bytes so you could have said okay we're just gonna make OP_RETURN 172 bytes because in that case there is really no reason to use these multi-sig keys anymore because you might as well use OP_RETURN but there was a simultaneous I guess movement or desire to not make the blockchain unnecessarily big.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:12:22\"}, {\"type\":\"paragraph\",\"text\":\"I think it's useful to look at that in perspective.\\nSo right now there is a fee market.\\nSo that means that if you're putting a lot of data onto the blockchain, it's going to be very expensive for you to do that.\\nOr at least there's a mechanism to make sure that, you know, useful stuff goes on the blockchain more easily than useless stuff, depending on if you define useful by how much you're willing to pay for it.\\nBut back then, blocks were super small.\\nThey were maybe 10 kilobytes or 100 kilobytes, I don't know where they were in 2014.\\nAnd that meant that this OP_RETURN data could just make blocks really big for the time that happened.\\nAnd we've done an episode in the past where we looked at, I think it's episode number 55, where we looked at old node software and see how that old node software would perform under the current block sizes.\\nAnd it turns out that very old node software, especially from say 2012, would not have been able to keep up with actual one megabyte blocks,or at least not very easily.\\nSo back then it was actually necessary to keep blocks small, basically from a more altruistic point of view.\\nAnd that's what a lot of the discussion was about, like what is good behavior on the blockchain.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:13:27\"}, {\"type\":\"paragraph\",\"text\":\"So why was, so the first limit that was set, well initially the limit was zero, initially OP_RETURN was effectively impossible, but then the limit was increased to 40 and why why was it increased to 40 okay\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:13:43\"}, {\"type\":\"paragraph\",\"text\":\"so the idea behind 40 is that it allows you to put a hash in there, a typical hash using normal cryptography like SHA-256 is 32 bytes.\\nSo this allows you to put a 32 byte hash on the blockchain and then a few extra bytes to do, I don't know, some metadata for that hash.\\nNow there were some protocols out there that wanted 80 bytes.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:14:06\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, Counterparty in specific.\\nThis is what sort of this blog post that is the reason we're making this podcast.\\nThat's the main example that's given.\\nIt's basically about the counterparty protocol.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:14:17\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, so I don't know for sure if the increase to 80 bytes was only for counterparty or whether there was another protocol that needed it.\\nBut basically there was some back and forth and I guess people decided to just allow 80 bytes.\\nBut really 40 should be enough for most things, but it requires a little bit more work for those protocols.\\nSo if you look at something like, as far as i know..\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:14:38\"}, {\"type\":\"paragraph\",\"text\":\"The reason 40 is enough is what you're saying is because really the only data you ever need to include in the blockchain really is a hash.\\nBecause then you anchor any other data you want to anchor in and that's really all you ever need to do.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:14:52\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, so if you're building some sort of other protocol and we talked about open timestamps in an earlier episode, we talked about other things.\\nGenerally that protocol has its own software and that software should take care of its own data.\\nIt should have its own peer-to-peer network essentially.\\nIt should send its own data around.\\nMaybe that data is a blockchain, maybe that data is something else.\\nBut that's more complicated to implement because now you have to build your own peer-to-peer network And so a lot of these protocols back in the day and very likely Counterparty as well preferred to just shove everything onto the Bitcoin blockchain and not have to deal with that complexity.\\nAnd so that was some of the discussion about.\\nBut Counterparty was using the multi-sig solution in the beginning.\\nSo they were putting data on the blockchain anyway.\\nAnd so yeah, I guess then it makes more sense to say, okay, let's just increase the OP_RETURN limit to 80 bytes.\\nSo they stopped doing that.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:15:44\"}, {\"type\":\"paragraph\",\"text\":\"So At first it was increased to 40, this was in 2014 and the argument there, as we explained, or as you explained, is that you really only need 40 because you can just include a hash.\\nBut then people, you said a counterparty project, it was using more than 40 for whatever they want to do.\\nSo essentially Bitcoin developers conceded and said, all right, well, if you're going to do it anyways, here's 80, here, have fun with it, with your 80.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:16:13\"}, {\"type\":\"paragraph\",\"text\":\"I think that's how it went, But there may have been other projects there too that needed 80 for some reason.\\nNow there is some confusion because if you look at the original proposal, so the original release that had the 40 byte limit, there was also a pre-release.\\nSo with Bitcoin, or Bitcoin Core anyway nowadays, What happens is when you make changes they go into a pull request on GitHub and then once they're approved they get merged and they end up in this master branch and this master branch sort of a working copy which is not released but anybody can run it so there was a time when there was a limit of 80, if you were using that master branch of Bitcoin.\\nBut generally that's not considered final software, it could have bugs in it, et cetera.\\nSo before that release came out, it was reduced to 40.\\nDoes that make sense?\\nSo there was a limit of 80, but only in unreleased software.\\nThen there was a limit of 40 in the release software.\\nAnd then much later, there was another limit of 80.\\nAnd so some of the fight, war, whatever you want to call it, seems to be about that.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:17:14\"}, {\"type\":\"paragraph\",\"text\":\"They announced 80.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:17:15\"}, {\"type\":\"paragraph\",\"text\":\"Where It was sort of seen as a revoking of the 80, but that was never really released.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:17:21\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nGot it.\\nIt was never 80, but it was announced to be 80, and then it was brought back to 40.\\nAnd I think that's what threw some people off.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:17:29\"}, {\"type\":\"paragraph\",\"text\":\"So I think what happened is there was this upper turn thing was introduced in the code and they just picked 80 as the first number then there was, I think Jeff Garzik put it on the mailing list saying hey we should probably talk about that and then people said okay let's make it 40 and that was what went into the release.\\nSo and then there's you can find newer discussions where people said oh you know we told you about Counterparty and then I think Greg Maxwell would say no you didn't you told us after basically this release and then we increased it but you know so that's a whole fight about what was the sequence of events there.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:18:04\"}, {\"type\":\"paragraph\",\"text\":\"So and right now the limit is 80?\\nYeah and there was a minor maybe mistake in the blog post where it said that currently the limit is 83 but you you say it's just 80 right?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:18:16\"}, {\"type\":\"paragraph\",\"text\":\"So the the amount of data you can put on it is 80.\\nHowever, the size of the output, so what the script on the blockchain would look like, is 83.\\nAnd the reason is because you have one byte that says OP_RETURN, then you have another byte that says, I'm going to give you a bunch of data now and then another byte that says how much data so that that would be 80 bytes for example and then the data itself so that in total that's 83 and there's some some weird edge cases where you could have like one OP_RETURN and then say I'm gonna and then you could say I'm gonna give you five bytes of data and now I'm gonna give you another five bytes of data.\\nSo there's ways of grouping your data.\\nThere's just very subtle implementation details, but as long as you stay below the 83 bytes for the whole script you're fine.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:19:03\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nNow one thing you already alluded to is that back then, back when this discussion was happening, I think people were really looking at the Bitcoin blockchain as sort of a shared resource.\\nAnd they weren't thinking about it as much, it seemed like, like we would today as a market.\\nSo today, in general, I think we have more of this idea that whoever is willing to pay the highest fees gets into the block.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:19:34\"}, {\"type\":\"paragraph\",\"text\":\"And we have a block size limit to protect nodes, essentially, to protect users from having to store too much data.\\nAnd back then, people weren't really thinking about fee markets yet.\\nThere were no fee markets yet.\\nSo it was really just considered a shared resource.\\nNow from today's perspective, don't you think it would make more sense to just remove any OP_RETURN limit and just say whoever wants to pay for it will pay or put differently would you say that maybe the people that were making that argument what was it eight years ago maybe you were right that it should have just been allowed and whoever pays pays\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:20:14\"}, {\"type\":\"paragraph\",\"text\":\"I'm not sure So one of the things is that the fees that you're paying go to miners, they don't go to node operators.\\nSo every node operator is still somewhat altruistically running these things.\\nSo you'd still want to see what do you want node operators to do for you?\\nDo you want them to store your your bible?\\nOr do you only want to do payments?\\nSo you could still have that argument that even if somebody was willing to pay a very high rate, a very high fee to miners to include lots of OP_RETURN data, you could argue well, but they're not paying the node operators to store that OP_RETURN data and people are not running nodes to publish the Bible or whatever.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:20:52\"}, {\"type\":\"paragraph\",\"text\":\"But they don't have to store the data.\\nThough they still need to verify it once.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:20:56\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, they still need to process it.\\nSo, but yeah, the burden is a bit lower, especially when you use OP_RETURN and it's much better than the alternatives.\\nOn the other hand, there's also now things like RGB and things like OpenTimestamps, various other projects that show that you can just use a single hash or even not a hash at all because from a privacy point of view, things like tweaked signatures, tweaked public keys or tweaked signatures are even a more privacy-friendly way to put data on the blockchain, which also makes them indistinguishable from regular transactions.\\nThat one thing, that means that you can't stop it, whatever you do in the protocol.\\nBut it also means that by using the protocol in that way, even though you're using it for something that's not moving money around, you are helping the people that are moving money around because you're creating a bigger anonymity set for everybody else.\\nBecause you're just creating a bunch of noise between all the transactions.\"}, {\"type\":\"heading\",\"text\":\"Should the size limits remain?\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:21:48\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nWell, that could also be considered an argument for removing the limit.\\nIt's like you say, if you can create it anyways and no one can even see that you're just creating data that's non-transaction data essentially.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:22:01\"}, {\"type\":\"paragraph\",\"text\":\"You can't see it if you're not using OP_RETURN.\\nSo those protocols that use tweaked signatures don't use OP_RETURN at all.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:22:09\"}, {\"type\":\"paragraph\",\"text\":\"Well, that's what I mean.\\nSo at that point, why don't we just say, okay, people can put data on the blockchain and we can stop them.\\nWe might as well just make it easy and have it done in such a way that it doesn't impact the UTXO set.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:22:24\"}, {\"type\":\"paragraph\",\"text\":\"But then it's actually hurting privacy because if people start using OP_RETURN for their data instead of these more privacy-friendly ways, then they're just hurting their own privacy.\\nBut as far as I know there's nobody currently with a serious proposal of why they would need bigger OP_RETURN messages.\\nI think Bitcoin SV is experimenting with very, very, very, very large OP_RETURN messages and like has 99.999999% of their chain with OP_RETURN data.\\nSo I don't know how I would feel about it, but so far I don't think it's a relevant question.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:23:00\"}, {\"type\":\"paragraph\",\"text\":\"So the general idea behind, and I think this is what you mentioned when you said some people don't like the term OP_RETURN wars, is that this part of Bitcoin's history is sort of considered by Vitalik decided to launch Ethereum.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:23:15\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, but that makes very little sense because he could have used, if he needed OP_RETURN, then he could have done the same thing with OPMULTISIG.\\nSo I don't think that particular thing would have made the difference.\\nIt's not possible to run Ethereum on top of Bitcoin with or without OP_RETURN.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:23:36\"}, {\"type\":\"paragraph\",\"text\":\"And the other thing anyone can do, of course, is just fork Bitcoin Core and allow for bigger OP_RETURN messages, since it's not a consensus rule.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:23:44\"}, {\"type\":\"paragraph\",\"text\":\"So you know, maybe The lesson from that discussion was that Bitcoin was clearly not going the way of allowing everything and everyone to do complicated things on the blockchain.\\nAnd that may have been a realization point for him to say, okay, if Bitcoin is not going that direction, I'll try my own project.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:24:00\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I think that's sort of the argument or that's also the argument sort of presented in this blog post that it was a cultural thing that the Bitcoin culture at that time was not very accommodating to non-transaction data on the blockchain and that's why Vitalik decided to start his own blockchain.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:24:19\"}, {\"type\":\"paragraph\",\"text\":\"Perhaps, might also have something to do with being able to make money.\\nBut of course the nice thing about having a new chain is you know you can do whatever you want so it does give you a lot of creative freedom.\\nThat's the more optimistic interpretation of it.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:24:31\"}, {\"type\":\"paragraph\",\"text\":\"Yes, they can clearly do whatever they want.\\nWe cover everything about OP_RETURN?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:24:36\"}, {\"type\":\"paragraph\",\"text\":\"I think so.\\nWell, it might be fun to mention there was an incident in 2019, a project called VariBlock, Which I believe has Jeff Garzik as their advisor.\\nAnd at some point there was a lot of increase in the number of OP_RETURN transactions, not the size of them, just the sheer number of them.\\nTo the point where they were starting to compete, you know, they had to pay some pretty high fees to compete with regular transactions And it was interesting to watch and there was kind of a worry that this would just mean that, you know, OP_RETURN transactions are the buyer of last resort and every block from now on will be full.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:25:11\"}, {\"type\":\"paragraph\",\"text\":\"That was basically an altcoin that used Bitcoin's proof of work as its security?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:25:18\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I believe so.\\nI think roughly what the idea was is that people on that altcoin would create candidate blocks basically and the hash of those candidate blocks would be on the Bitcoin chain and then whoever paid the highest fee on the Bitcoin chain would be the winning block on that chain.\\nSo you'd have lots and lots of Bitcoin transactions, each with a hash that could represent the future block and then whichever has the highest fee would win.\\nSo it would be a nice way to give money to Bitcoin miners.\\nBut last time I checked on a coin market cap, it said market data is untracked.\\nSo it sounds like that's not going very well.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:25:50\"}, {\"type\":\"paragraph\",\"text\":\"It doesn't sound very good, Sjors.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:25:51\"}, {\"type\":\"paragraph\",\"text\":\"But who knows.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:25:52\"}, {\"type\":\"paragraph\",\"text\":\"Okay, I think that's it, or not.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provoost: 00:25:55\"}, {\"type\":\"paragraph\",\"text\":\"Yep, that's all I got.\\nGreat.\\nThank you for listening.\"}",
    "body": "## Intro\n\nAaron van Wirdum: 00:00:19\n\nLive from Utrecht, this is Bitcoin Explained.\nHey Sjors.\n\nSjors Provoost: 00:00:24\n\nWhat's up?\n\nAaron van Wirdum: 00:00:25\n\nHow exciting.\nTwo weeks ago you told me that maybe you would go to Bitcoin Amsterdam.\n\nSjors Provoost: 00:00:31\n\nYes.\n\nAaron van Wirdum: 00:00:31\n\nAnd now you're a speaker.\n\nSjors Provoost: 00:00:33\n\nI'm a panelist, probably not a real speaker.\n\nAaron van Wirdum: 00:00:37\n\nThat counts that that's a speaker in my book Sjors.\n\nSjors Provoost: 00:00:40\n\nSounds good.\n\nAaron van Wirdum: 00:00:41\n\nHow exciting.\nSjors today we're gonna discuss we're gonna discuss a blog post by BitMax Research.\n\nSjors Provoost: 00:00:48\n\nThat's right.\n\nAaron van Wirdum: 00:00:48\n\nWhich is about the OP_RETURN Wars.\nSo exactly, very nice clickbait title.\nDo you remember what the name of the blog post is?\nWas it was it just the OP_RETURN Wars?\n\n## OP_RETURN War\n\nSjors Provoost: 00:01:00\n\nIt's called the OP_RETURN wars of 2014, Dapps versus Bitcoin transactions.\nAnd it's a slightly clickbaity title because well it was only called wars by certain other people.\nBut\n\nAaron van Wirdum: 00:01:14\n\nwasn't it referred to as the OP_RETURN wars previously in your memory?\n\nSjors Provoost: 00:01:18\n\nYeah, but some people object that the OP_RETURN wars have been sort of that term was phrased by people trying to launch various coins and trying to make Bitcoin developers look bad.\nNot everybody likes the term.\n\nAaron van Wirdum: 00:01:31\n\nOkay, fair enough.\nOkay, so let's start at the beginning.\nThis has been, we've discussed this in some of our episodes here and there before, I think, but first of all, Sjors, what is OP_RETURN?\n\n\n## What is OP_RETURN\n\nSjors Provoost: 00:01:44\n\nSo When OP_RETURN appears in a transaction, so in a script, then as soon as that happens, the script is invalid.\nAnd so a nice example, and so the most practical form to use that would be that your entire script starts with OP_RETURN, and then it follows whatever you want to put there, for example, some random text.\nBecause when a script is invalid, you know it's not going to run, and that means that nobody can ever spend it.\nBecause no matter what you do, it's always going to be invalid.\n\nAaron van Wirdum: 00:02:14\n\nRight, but that to me sounds like the transaction would be invalid.\n\nSjors Provoost: 00:02:18\n\nOh, no, no, no.\nIt's an output of a transaction.\nSo if you're sending to an OP_RETURN transaction, so if you're sending, if your address, quote unquote, so the script on the blockchain is in OP_RETURN followed by anything, then whoever tries to spend it will find that their transaction is invalid.\n\nAaron van Wirdum: 00:02:34\n\nRight.\nOkay.\nSo you can send to an OP_RETURN.\nIt's just provably unspendable.\nYou can't spend anything from an OP_RETURN.\n\nSjors Provoost: 00:02:42\n\nExactly.\n\nAaron van Wirdum: 00:02:42\n\nFrom an output that has OP_RETURN in it.\n\nSjors Provoost: 00:02:45\n\nYes.\nAnd because it's provably unspendable, that allows software that processes the Bitcoin blockchain to make some optimizations, it can basically just pretend that those coins don't exist.\nBut whether they really exist or not is kind of in the eye of the beholder.\nThey're there, but it's impossible to spend them.\n\n## How long has OP_RETURN been around\n\nAaron van Wirdum: 00:03:01\n\nRight.\nAnd OP_RETURN has always been in Bitcoin?\nHas it always been a function in Bitcoin?\nHas it always been possible?\n\nSjors Provoost: 00:03:09\n\nAs far as I know, yes.\nAnd so that means it's also been always been possible to put anything you want after the OP_RETURN code.\n\nAaron van Wirdum: 00:03:17\n\nRight, so you could always create a transaction with OP_RETURN.\nHowever, and now we'll get to this in a second, I think originally transactions that spent from an OP_RETURN, no wait, transactions that spent to, wait now I'm confused.\n\nSjors Provoost: 00:03:30\n\nYeah, as far as I know, originally, if you created a transaction that spends to an OP_RETURN, then nodes generally will not relay that transaction.\nThey would simply ignore it.\nHowever, if they saw it in a block, they would be fine with it.\nSo that's called standardness.\nIn this case, it's not standard.\nSo standard transactions are transactions of a specific shape and form.\nThose are automatically relayed.\nAnd that's partially to prevent people shooting themselves in the foot by creating a transaction that's just wrong.\nAnd there's probably some other reasons that we can get into in another podcast.\n\nAaron van Wirdum: 00:04:04\n\nRight.\nYeah.\nSo, yeah.\nSo, an OP_RETURN was always possible, but Bitcoin nodes generally just wouldn't forward it to other nodes.\n\nSjors Provoost: 00:04:13\n\nThat's right.\n\nAaron van Wirdum: 00:04:13\n\nSo, it's very hard to get it into an actual block.\n\nSjors Provoost: 00:04:16\n\nYeah.\nYou'd have to talk to a miner.\n\nAaron van Wirdum: 00:04:18\n\nYeah, and then the miner would have to put it into a block, because I assume that mining software also by default just wouldn't include it in blocks, right?\n\nSjors Provoost: 00:04:27\n\nYeah, so either you would have to know which node is a miner, And then maybe that miner is configured that they do consider it standard, but more likely, the miner would have to manually include it through some process.\n\n## OP_RETURN Node acceptance and Standardness\n\nAaron van Wirdum: 00:04:40\n\nRight.\nSo at some point, and this is what the blog post is about, at some point, it was decided that nodes, that Bitcoin nodes, Bitcoin Core nodes specifically, although back then it wasn't even called Bitcoin Core yet, they would actually start forwarding some OP_RETURN transactions, right?\nSo why was that?\n\nSjors Provoost: 00:05:01\n\nYeah.\nSo in roughly the end of 2013 or the beginning of 2014, there was a release of Bitcoin Core that would let you that if there was less than 40 bytes or 40 bytes or less after the OP_RETURN message, it would be standard.\nSo you would relay those.\nAnd then later on, as we'll discuss, it was increased to 80 bytes.\nAnd so the reason is, it was kind of, I think one of the analogies that was used, or many analogies used, I'll stick to the, let's say the friendly ones, is this idea of People were breaking windows all the time because they're trying to get inside of a house and it was nice to just leave the window open, basically.\nSo it was actually a form, it was meant as a form of damage control.\n\nAaron van Wirdum: 00:05:42\n\nWell, before we get to the analogy, or Well, now you've given the analogy, but what is it an analogy for?\nWhat are we actually talking about?\n\nSjors Provoost: 00:05:49\n\nWhat is the actual damage, right?\nWhy were people breaking windows?\nSo basically, people were trying to put things on the blockchain that are not transactions, that are not moving money, but that are sharing information.\nAnd one example of that, which I'll shamelessly plug, you can also find in my book, is to put the Bitcoin white paper inside the blockchain.\nAnd the way they would do that is to create a transaction that sends money to a multi-sig address and that multi-sig address would have three keys but those keys you know would not actually be keys because a public key would you know be a nice piece of data but they wouldn't be actual keys and it turns out that if you add up all these fake keys you can reconstruct a Bitcoin white paper.\nNow, the problem with that is that for nodes who are looking at the blockchain, those transactions look like they're real.\nThey look like they're really sending money to somebody and that somebody apparently is a multi-sig owner.\nAnd this is where the problem comes in.\nNodes don't only need to relay those transactions and store them in the blockchain, they also need to keep track of this thing called the UTXO set.\nSo there's a set, usually kept in memory if at all possible, of every coin that currently exists.\nSo when you create a transaction, you're spending a coin, so those coins no longer exist, and you're creating new coins, and those coins do exist.\nThat's what you need to keep track of.\nAnd so this white paper and this other stuff that was put in that way has to be kept track of by nodes.\nEven today, even though nobody will ever spend it, you still have to keep track of it.\nAnd so the solution is to use OP_RETURN.\nNow you can still put that kind of data on the blockchain if you wanted to, but nodes don't have to keep track of it because they know it is not spendable.\n\nAaron van Wirdum: 00:07:36\n\nRight.\nSo to go one step back or to tackle that step by step.\nSo originally if you wanted to include data in the blockchain, could be any type of data, You gave the Bitcoin white paper as an example.\nThen what people would originally do is basically break down the Bitcoin white paper into data and then create public keys that aren't actually public keys because there are no private keys for them.\nAnd these public keys would just include the data that is the Bitcoin white paper, right?\n\nSjors Provoost: 00:08:04\n\nYes.\n\n## Keeping unnecessary data off the UTXO set\n\nAaron van Wirdum: 00:08:05\n\nRight.\nSo, and then that's transmitted over the Bitcoin network.\nEveryone verifies these as transactions.\nIt's included in the blockchain and then it's also included in the UTXO set.\nNow, with OP_RETURN, it's still included in the blockchain.\nYes.\nHowever, it's not included in the UTXO set.\nThat's the real difference there, right?\nYeah, exactly.\nNotes just know these coins are provably unspendable, so we don't have to store these in the UTXO set.\n\n\nSjors Provoost: 00:09:33\n\nYes, so it saves some time because now when you know you still have to download the blockchain, you still have to check every block, that does not change.\nBut the difference is that this little database that you're keeping of the UTXO set, that no longer has to grow.\nAnd you can also normally throw away old blocks.\nSo if you have a small hard drive, you can always toss out the old blocks, but you can never toss out anything from the UTXO set.\n\nAaron van Wirdum: 00:09:54\n\nYeah, so the two main benefits are, first of all, storage, especially for pruned nodes that don't store the entire blockchain, because they now have a benefit because they have a smaller UTXO set.\nAnd the other one is computational.\nWhen a new transaction comes in, there's a smaller UTXO set to check the new transaction against.\n\nSjors Provoost: 00:10:13\n\nYeah.\nSo I guess a better way to say that is it's saving you, potentially saving you memory.\nSo ideally you want to keep the entire UTXO set in RAM.\nNow that's already not possible these days.\nI guess back when this discussion was happening, the UTXO set may have been much smaller, maybe a few hundred megabytes.\nNow it is over 10 gigabytes.\nSo for now most people unless you have like you know 20 gigabytes of RAM you're probably not holding it in RAM anyway.\nBut it is nice if you can keep the UTXO set in RAM all the time it's much faster.\nAnd we did an episode about that.\nIt is episode 15 in which we explain a mechanism that could solve this problem called U3XO.\nAnd that would remove the need to keep the UTXO set in RAM, but it comes at the expense of some trade-offs.\nAnd we just explain those there.\n\nAaron van Wirdum: 00:11:02\n\nOkay, let's stick to the OP_RETURN for now.\nPeople were storing data in the blockchain.\nThis came at a cost for people that were running full nodes.\nAnd so at some point, developers figured, okay, look guys, if you're going to store data in the blockchain anyways, then please use OP_RETURN.\nAnd that way, there's a smaller cost to all nodes.\n\nSjors Provoost: 00:11:27\n\nYeah, but there was a second request too, I would say, because this limit of 40 bytes.\n\nAaron van Wirdum: 00:11:32\n\nYeah, I was going to get there.\nSo OP_RETURN was always in the protocol, but it was basically useless because nodes wouldn't forward OP_RETURN transactions.\nThen Bitcoin developers said, all right guys, you're going to store data anyways.\nSo we'll allow, we'll effectively enable OP_RETURN.\nBut then the next debate was about the size of the OP_RETURN messages.\n\n## The OP_RETURN message size debate\n\nSjors Provoost: 00:11:55\n\nYeah, exactly.\nSo one number you could have used for that size was to say, okay, how big can these multi-sig transactions be?\nAnd I think that was 172 bytes so you could have said okay we're just gonna make OP_RETURN 172 bytes because in that case there is really no reason to use these multi-sig keys anymore because you might as well use OP_RETURN but there was a simultaneous I guess movement or desire to not make the blockchain unnecessarily big.\n\n\nSjors Provoost: 00:12:22\n\nI think it's useful to look at that in perspective.\nSo right now there is a fee market.\nSo that means that if you're putting a lot of data onto the blockchain, it's going to be very expensive for you to do that.\nOr at least there's a mechanism to make sure that, you know, useful stuff goes on the blockchain more easily than useless stuff, depending on if you define useful by how much you're willing to pay for it.\nBut back then, blocks were super small.\nThey were maybe 10 kilobytes or 100 kilobytes, I don't know where they were in 2014.\nAnd that meant that this OP_RETURN data could just make blocks really big for the time that happened.\nAnd we've done an episode in the past where we looked at, I think it's episode number 55, where we looked at old node software and see how that old node software would perform under the current block sizes.\nAnd it turns out that very old node software, especially from say 2012, would not have been able to keep up with actual one megabyte blocks,or at least not very easily.\nSo back then it was actually necessary to keep blocks small, basically from a more altruistic point of view.\nAnd that's what a lot of the discussion was about, like what is good behavior on the blockchain.\n\nAaron van Wirdum: 00:13:27\n\nSo why was, so the first limit that was set, well initially the limit was zero, initially OP_RETURN was effectively impossible, but then the limit was increased to 40 and why why was it increased to 40 okay\n\nSjors Provoost: 00:13:43\n\nso the idea behind 40 is that it allows you to put a hash in there, a typical hash using normal cryptography like SHA-256 is 32 bytes.\nSo this allows you to put a 32 byte hash on the blockchain and then a few extra bytes to do, I don't know, some metadata for that hash.\nNow there were some protocols out there that wanted 80 bytes.\n\nAaron van Wirdum: 00:14:06\n\nYeah, Counterparty in specific.\nThis is what sort of this blog post that is the reason we're making this podcast.\nThat's the main example that's given.\nIt's basically about the counterparty protocol.\n\nSjors Provoost: 00:14:17\n\nYeah, so I don't know for sure if the increase to 80 bytes was only for counterparty or whether there was another protocol that needed it.\nBut basically there was some back and forth and I guess people decided to just allow 80 bytes.\nBut really 40 should be enough for most things, but it requires a little bit more work for those protocols.\nSo if you look at something like, as far as i know..\n\nAaron van Wirdum: 00:14:38\n\nThe reason 40 is enough is what you're saying is because really the only data you ever need to include in the blockchain really is a hash.\nBecause then you anchor any other data you want to anchor in and that's really all you ever need to do.\n\nSjors Provoost: 00:14:52\n\nYeah, so if you're building some sort of other protocol and we talked about open timestamps in an earlier episode, we talked about other things.\nGenerally that protocol has its own software and that software should take care of its own data.\nIt should have its own peer-to-peer network essentially.\nIt should send its own data around.\nMaybe that data is a blockchain, maybe that data is something else.\nBut that's more complicated to implement because now you have to build your own peer-to-peer network And so a lot of these protocols back in the day and very likely Counterparty as well preferred to just shove everything onto the Bitcoin blockchain and not have to deal with that complexity.\nAnd so that was some of the discussion about.\nBut Counterparty was using the multi-sig solution in the beginning.\nSo they were putting data on the blockchain anyway.\nAnd so yeah, I guess then it makes more sense to say, okay, let's just increase the OP_RETURN limit to 80 bytes.\nSo they stopped doing that.\n\nAaron van Wirdum: 00:15:44\n\nSo At first it was increased to 40, this was in 2014 and the argument there, as we explained, or as you explained, is that you really only need 40 because you can just include a hash.\nBut then people, you said a counterparty project, it was using more than 40 for whatever they want to do.\nSo essentially Bitcoin developers conceded and said, all right, well, if you're going to do it anyways, here's 80, here, have fun with it, with your 80.\n\nSjors Provoost: 00:16:13\n\nI think that's how it went, But there may have been other projects there too that needed 80 for some reason.\nNow there is some confusion because if you look at the original proposal, so the original release that had the 40 byte limit, there was also a pre-release.\nSo with Bitcoin, or Bitcoin Core anyway nowadays, What happens is when you make changes they go into a pull request on GitHub and then once they're approved they get merged and they end up in this master branch and this master branch sort of a working copy which is not released but anybody can run it so there was a time when there was a limit of 80, if you were using that master branch of Bitcoin.\nBut generally that's not considered final software, it could have bugs in it, et cetera.\nSo before that release came out, it was reduced to 40.\nDoes that make sense?\nSo there was a limit of 80, but only in unreleased software.\nThen there was a limit of 40 in the release software.\nAnd then much later, there was another limit of 80.\nAnd so some of the fight, war, whatever you want to call it, seems to be about that.\n\nAaron van Wirdum: 00:17:14\n\nThey announced 80.\n\nSjors Provoost: 00:17:15\n\nWhere It was sort of seen as a revoking of the 80, but that was never really released.\n\nAaron van Wirdum: 00:17:21\n\nRight.\nGot it.\nIt was never 80, but it was announced to be 80, and then it was brought back to 40.\nAnd I think that's what threw some people off.\n\nSjors Provoost: 00:17:29\n\nSo I think what happened is there was this upper turn thing was introduced in the code and they just picked 80 as the first number then there was, I think Jeff Garzik put it on the mailing list saying hey we should probably talk about that and then people said okay let's make it 40 and that was what went into the release.\nSo and then there's you can find newer discussions where people said oh you know we told you about Counterparty and then I think Greg Maxwell would say no you didn't you told us after basically this release and then we increased it but you know so that's a whole fight about what was the sequence of events there.\n\nAaron van Wirdum: 00:18:04\n\nSo and right now the limit is 80?\nYeah and there was a minor maybe mistake in the blog post where it said that currently the limit is 83 but you you say it's just 80 right?\n\nSjors Provoost: 00:18:16\n\nSo the the amount of data you can put on it is 80.\nHowever, the size of the output, so what the script on the blockchain would look like, is 83.\nAnd the reason is because you have one byte that says OP_RETURN, then you have another byte that says, I'm going to give you a bunch of data now and then another byte that says how much data so that that would be 80 bytes for example and then the data itself so that in total that's 83 and there's some some weird edge cases where you could have like one OP_RETURN and then say I'm gonna and then you could say I'm gonna give you five bytes of data and now I'm gonna give you another five bytes of data.\nSo there's ways of grouping your data.\nThere's just very subtle implementation details, but as long as you stay below the 83 bytes for the whole script you're fine.\n\nAaron van Wirdum: 00:19:03\n\nRight.\nNow one thing you already alluded to is that back then, back when this discussion was happening, I think people were really looking at the Bitcoin blockchain as sort of a shared resource.\nAnd they weren't thinking about it as much, it seemed like, like we would today as a market.\nSo today, in general, I think we have more of this idea that whoever is willing to pay the highest fees gets into the block.\n\nAaron van Wirdum: 00:19:34\n\nAnd we have a block size limit to protect nodes, essentially, to protect users from having to store too much data.\nAnd back then, people weren't really thinking about fee markets yet.\nThere were no fee markets yet.\nSo it was really just considered a shared resource.\nNow from today's perspective, don't you think it would make more sense to just remove any OP_RETURN limit and just say whoever wants to pay for it will pay or put differently would you say that maybe the people that were making that argument what was it eight years ago maybe you were right that it should have just been allowed and whoever pays pays\n\nSjors Provoost: 00:20:14\n\nI'm not sure So one of the things is that the fees that you're paying go to miners, they don't go to node operators.\nSo every node operator is still somewhat altruistically running these things.\nSo you'd still want to see what do you want node operators to do for you?\nDo you want them to store your your bible?\nOr do you only want to do payments?\nSo you could still have that argument that even if somebody was willing to pay a very high rate, a very high fee to miners to include lots of OP_RETURN data, you could argue well, but they're not paying the node operators to store that OP_RETURN data and people are not running nodes to publish the Bible or whatever.\n\nAaron van Wirdum: 00:20:52\n\nBut they don't have to store the data.\nThough they still need to verify it once.\n\nSjors Provoost: 00:20:56\n\nYeah, they still need to process it.\nSo, but yeah, the burden is a bit lower, especially when you use OP_RETURN and it's much better than the alternatives.\nOn the other hand, there's also now things like RGB and things like OpenTimestamps, various other projects that show that you can just use a single hash or even not a hash at all because from a privacy point of view, things like tweaked signatures, tweaked public keys or tweaked signatures are even a more privacy-friendly way to put data on the blockchain, which also makes them indistinguishable from regular transactions.\nThat one thing, that means that you can't stop it, whatever you do in the protocol.\nBut it also means that by using the protocol in that way, even though you're using it for something that's not moving money around, you are helping the people that are moving money around because you're creating a bigger anonymity set for everybody else.\nBecause you're just creating a bunch of noise between all the transactions.\n\n## Should the size limits remain?\n\nAaron van Wirdum: 00:21:48\n\nRight.\nWell, that could also be considered an argument for removing the limit.\nIt's like you say, if you can create it anyways and no one can even see that you're just creating data that's non-transaction data essentially.\n\nSjors Provoost: 00:22:01\n\nYou can't see it if you're not using OP_RETURN.\nSo those protocols that use tweaked signatures don't use OP_RETURN at all.\n\nAaron van Wirdum: 00:22:09\n\nWell, that's what I mean.\nSo at that point, why don't we just say, okay, people can put data on the blockchain and we can stop them.\nWe might as well just make it easy and have it done in such a way that it doesn't impact the UTXO set.\n\nSjors Provoost: 00:22:24\n\nBut then it's actually hurting privacy because if people start using OP_RETURN for their data instead of these more privacy-friendly ways, then they're just hurting their own privacy.\nBut as far as I know there's nobody currently with a serious proposal of why they would need bigger OP_RETURN messages.\nI think Bitcoin SV is experimenting with very, very, very, very large OP_RETURN messages and like has 99.999999% of their chain with OP_RETURN data.\nSo I don't know how I would feel about it, but so far I don't think it's a relevant question.\n\nAaron van Wirdum: 00:23:00\n\nSo the general idea behind, and I think this is what you mentioned when you said some people don't like the term OP_RETURN wars, is that this part of Bitcoin's history is sort of considered by Vitalik decided to launch Ethereum.\n\nSjors Provoost: 00:23:15\n\nYeah, but that makes very little sense because he could have used, if he needed OP_RETURN, then he could have done the same thing with OPMULTISIG.\nSo I don't think that particular thing would have made the difference.\nIt's not possible to run Ethereum on top of Bitcoin with or without OP_RETURN.\n\nAaron van Wirdum: 00:23:36\n\nAnd the other thing anyone can do, of course, is just fork Bitcoin Core and allow for bigger OP_RETURN messages, since it's not a consensus rule.\n\nSjors Provoost: 00:23:44\n\nSo you know, maybe The lesson from that discussion was that Bitcoin was clearly not going the way of allowing everything and everyone to do complicated things on the blockchain.\nAnd that may have been a realization point for him to say, okay, if Bitcoin is not going that direction, I'll try my own project.\n\nAaron van Wirdum: 00:24:00\n\nYeah, I think that's sort of the argument or that's also the argument sort of presented in this blog post that it was a cultural thing that the Bitcoin culture at that time was not very accommodating to non-transaction data on the blockchain and that's why Vitalik decided to start his own blockchain.\n\nSjors Provoost: 00:24:19\n\nPerhaps, might also have something to do with being able to make money.\nBut of course the nice thing about having a new chain is you know you can do whatever you want so it does give you a lot of creative freedom.\nThat's the more optimistic interpretation of it.\n\nAaron van Wirdum: 00:24:31\n\nYes, they can clearly do whatever they want.\nWe cover everything about OP_RETURN?\n\nSjors Provoost: 00:24:36\n\nI think so.\nWell, it might be fun to mention there was an incident in 2019, a project called VariBlock, Which I believe has Jeff Garzik as their advisor.\nAnd at some point there was a lot of increase in the number of OP_RETURN transactions, not the size of them, just the sheer number of them.\nTo the point where they were starting to compete, you know, they had to pay some pretty high fees to compete with regular transactions And it was interesting to watch and there was kind of a worry that this would just mean that, you know, OP_RETURN transactions are the buyer of last resort and every block from now on will be full.\n\nAaron van Wirdum: 00:25:11\n\nThat was basically an altcoin that used Bitcoin's proof of work as its security?\n\nSjors Provoost: 00:25:18\n\nYeah, I believe so.\nI think roughly what the idea was is that people on that altcoin would create candidate blocks basically and the hash of those candidate blocks would be on the Bitcoin chain and then whoever paid the highest fee on the Bitcoin chain would be the winning block on that chain.\nSo you'd have lots and lots of Bitcoin transactions, each with a hash that could represent the future block and then whichever has the highest fee would win.\nSo it would be a nice way to give money to Bitcoin miners.\nBut last time I checked on a coin market cap, it said market data is untracked.\nSo it sounds like that's not going very well.\n\nAaron van Wirdum: 00:25:50\n\nIt doesn't sound very good, Sjors.\n\nSjors Provoost: 00:25:51\n\nBut who knows.\n\nAaron van Wirdum: 00:25:52\n\nOkay, I think that's it, or not.\n\nSjors Provoost: 00:25:55\n\nYep, that's all I got.\nGreat.\nThank you for listening.\n\n",
    "body_type": "markdown",
    "created_at": "2022-07-15T00:00:00.000Z",
    "domain": "https://btctranscripts.com/",
    "url": "https://btctranscripts.com/bitcoin-explained/op_return",
    "categories": [
        "podcast"
    ],
    "tags": [
        "scripts-addresses",
        "transaction-relay-policy"
    ],
    "media": "https://www.youtube.com/watch?v=NYj80OGlWGg",
    "authors": [
        "Sjors Provoost",
        "Aaron van Wirdum"
    ],
    "indexed_at": "2024-03-21T16:33:36.147Z",
    "transcript_by": "realdezzy via review.btctranscripts.com",
    "summary": "In a recent captivating episode of \"Bitcoin Explained,\" recorded live from Utrecht, Sjors Provoost and Aaron van Wirdum delved into the nuanced intricacies of Bitcoin's OP_RETURN feature, sparked by discussions in a BitMax Research blog post. The conversation commenced with Provoost sharing his experiences as a panelist at Bitcoin Amsterdam, setting the stage for an in-depth exploration of both the historical and technical aspects of Bitcoin transactions. Central to their dialogue was the OP_RETURN script, which marks transaction outputs as invalid, thereby rendering them unspendable. This feature allows for the embedding of arbitrary data within the Bitcoin blockchain without impacting the spendability of outputs, ensuring that while data can be permanently stored, it does not perpetuate the tracking burden of unspendable outputs.\n\nThe historical evolution of OP_RETURN has been significant since Bitcoin's inception. Initially, transactions containing OP_RETURN outputs faced challenges in being relayed by nodes, complicating their inclusion in blocks. However, a critical turning point emerged between the end of 2013 and the beginning of 2014 when updates to Bitcoin Core began standardizing and relaying OP_RETURN transactions under specific conditions. This was partly motivated by the need to deter the misuse of the blockchain for embedding extensive non-transactional data, such as the entire Bitcoin white paper, in ways that cluttered the UTXO set\u2014a crucial database for tracking all spendable coins.\n\nPrior to the acceptance of OP_RETURN transactions, enthusiasts employed creative yet problematic methods, such as pseudo-public keys, to encode data within the blockchain. This practice significantly inflated the UTXO set, presenting substantial challenges for node operators tasked with maintaining and verifying this expanding dataset, thus straining computational and storage resources. The adoption of OP_RETURN marked a pivotal compromise, facilitating the inclusion of arbitrary data on the blockchain while mitigating its impact on the UTXO set. By designating data as provably unspendable, OP_RETURN transactions could be efficiently pruned, alleviating the operational burden on node operators and underscoring Bitcoin's adaptability and commitment to maintaining a lean, effective network.\n\nFurther discussions highlighted the challenges and debates surrounding the appropriate size limits for OP_RETURN messages, balancing functionality with the need to avoid unnecessary blockchain bloat. Initial reluctance to forward OP_RETURN transactions evolved as developers recognized the necessity to enable such transactions, sparking debates over optimal message sizes to prevent excessive growth of the blockchain. The subsequent decision to increase the limit to 80 bytes reflected a nuanced understanding of the blockchain as a communal resource, necessitating careful consideration of both technological capabilities and collective community interests.\n\nMoreover, Provoost and Van Wirdum examined the broader implications of these technical decisions, distinguishing between the fees paid to miners for transaction inclusion and the unrecompensed services provided by node operators. This distinction highlights an ongoing debate about the nature of the blockchain as a public good and elucidates the responsibilities of its participants.\n\nThe dialogue also ventured into alternative methods like RGB and OpenTimestamps, illustrating how data can be discreetly embedded within the blockchain to enhance privacy and security. The contentious issue of size limits reemerged, with van Wirdum suggesting that the capacity for data embedding could argue against strict limitations, advocating for a more inclusive approach that preserves the UTXO set's integrity.\n\nIn conclusion, Provoost and van Wirdum's comprehensive discussion illuminated the complex interplay of technological innovation, economic incentives, and community governance in blockchain development. Through their analysis of OP_RETURN and its associated debates, they emphasized the importance of thoughtful deliberation and consensus in steering Bitcoin's future, showcasing the dynamic journey of optimization and inclusivity within the cryptocurrency ecosystem."
}