{
    "id": "bitcointranscripts+bitcoin-explained+bitcoin-core-v0-21",
    "title": "Bitcoin Core 0.21.0",
    "body_formatted": "{\"type\":\"heading\",\"text\":\"Intro\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:01:35\"}, {\"type\":\"paragraph\",\"text\":\"Live from Utrecht, this is The Van Wirdum Sjorsnado.\\nEpisode 24, we're going to discuss Bitcoin Core 21.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:01:46\"}, {\"type\":\"paragraph\",\"text\":\"Hooray.\\nWell, 0.21.\\nWe're still in the age of the zero point releases.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:01:51\"}, {\"type\":\"paragraph\",\"text\":\"Yes, which is ending now.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:01:53\"}, {\"type\":\"paragraph\",\"text\":\"Probably yes.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:01:54\"}, {\"type\":\"paragraph\",\"text\":\"That's what I understand.\\nThe next one, the 22 will actually be Bitcoin Core 22.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:01:59\"}, {\"type\":\"paragraph\",\"text\":\"That's what it says in the master branch right now but you know until there's a release somebody could come out and you know change it back all right well anyways it's gonna be yeah 22 will be the next version.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:02:10\"}, {\"type\":\"paragraph\",\"text\":\"Yeah so this one is still called Bitcoin Core 0.21 and it was released exactly a week ago when we're recording?\\nNo, less than a week ago.\\nAnyways, last week and we're gonna discuss this new release and the new features in this new release.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:02:27\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, there's some very cool features in there.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:02:29\"}, {\"type\":\"paragraph\",\"text\":\"It's a big release.\\nThere's a lot of new stuff in here.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:02:32\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, and we're going to refer back to some earlier episodes where we talk about either the specific feature or at least the general area that this feature touches.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:02:40\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, we already discussed some of it.\\nSo what we're going to do for this episode is we're just going to take the release notes and discuss each notable new future point by point for the most interesting ones.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:02:56\"}, {\"type\":\"paragraph\",\"text\":\"That's right.\\nAnd in the show notes you can find the full release notes which are very long.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:03:01\"}, {\"type\":\"paragraph\",\"text\":\"Let's start.\\nAre you ready?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:03:03\"}, {\"type\":\"paragraph\",\"text\":\"I'm ready.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:03:04\"}, {\"type\":\"paragraph\",\"text\":\"Let's go.\\nSo first points.\"}, {\"type\":\"heading\",\"text\":\"Mempool\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:03:06\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, so the first change, the mempool, right?\\nIt used to be that when you have a Bitcoin Core wallet, you would be broadcasting transactions from your wallet.\\nAnd then after 15 seconds or so you would be broadcasting transactions from the wallet and you would just keep broadcasting it to your peers nearby.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:03:26\"}, {\"type\":\"paragraph\",\"text\":\"Isn't it 15 minutes?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:03:27\"}, {\"type\":\"paragraph\",\"text\":\"Yeah 15 minutes.\\nSo it would very frequently broadcast its own transactions because the wallet really wants to make sure that the rest of the world hears about its transactions.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:03:37\"}, {\"type\":\"paragraph\",\"text\":\"Until it's included in a block, of course.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:03:40\"}, {\"type\":\"paragraph\",\"text\":\"Exactly.\\nThe problem with that is it's not very good for privacy.\\nBecause if you can pinpoint which node is constantly repeating a transaction, then that suggests that that's the node that created it.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:03:51\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, it makes it very obvious which addresses, which inputs originate from which node, which is bad for privacy, because a node can be tied to an IP address and an IP address to an identity and so forth.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:04:03\"}, {\"type\":\"paragraph\",\"text\":\"Exactly.\\nSo the long-term goal here, which has not been achieved in this specific change, but we always do little micro steps.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:04:11\"}, {\"type\":\"paragraph\",\"text\":\"The long-term goal is to get to a place where the node will just treat its own transactions, its own wallet transactions, just like it would transactions from another peer.\\nSo it will not prioritize its own transactions.\\nAnd there's some downside to that because you have to keep your wallet open probably a little bit longer to make sure that it does get broadcast.\\nBut yeah, then it would be indistinguishable.\\nSo I think one of the long-term goals is to say, we're going to wait until the wallet transaction fee is close to what it would be for the next block, because you can order transactions by fee.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:04:45\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I think what you're trying to say is that right now this rebroadcasting is done blindly while in the future the plan is to actually see if the transaction should have been included in a block by now based on the fees and only if that's not the case will it rebroadcast the transaction and it will do so for any transaction the node has seen not just for its own transactions.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:05:08\"}, {\"type\":\"paragraph\",\"text\":\"Exactly and this also creates a better separation between because then you know Bitcoin Core is a node which has a mempool and it's a wallet and you know this dealing with mempools should be done by the node, and it shouldn't be done by the wallet.\\nSo there's a lot of process separation going on under the hood there.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:05:25\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, but this, what we're describing right now, is actually not included in Bitcoin Core 21 right now.\\nWe've seen one micro step towards this in Bitcoin Core 21.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:05:26\"}, {\"type\":\"paragraph\",\"text\":\"So what is this micro step?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:05:36\"}, {\"type\":\"paragraph\",\"text\":\"If I understand correctly, the micro step is that it's going to broadcast it once a day instead of every 15 minutes.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:05:42\"}, {\"type\":\"paragraph\",\"text\":\"I think that's right.\\nIt just does it less often.\\nSo there's a bigger chance it will have been included in a block by then, which means it's never going to rebroadcast.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:05:52\"}, {\"type\":\"paragraph\",\"text\":\"And you need to spy on a node a lot longer.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:05:54\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, exactly.\\nSo it's a benefit for privacy.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:05:58\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I would say so.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:05:59\"}, {\"type\":\"paragraph\",\"text\":\"And it's a small step towards a bigger plan.\"}, {\"type\":\"heading\",\"text\":\"Tor Version 3 Support\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:06:02\"}, {\"type\":\"paragraph\",\"text\":\"Okay, next one.\\nOh, we should mention as far as the mempool stuff, we've discussed this in episode 19.\\nThat's in more detail for listeners who want to go back a couple of episodes and hear more about this.\\nOkay, next point is Tor version 3 support.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:06:20\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, which we talked about in episode 13 in quite a bit of detail.\\nSo the quick version is Tor has been improved, this is version 3, Bitcoin Core now uses that.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:06:31\"}, {\"type\":\"paragraph\",\"text\":\"That's the very short version.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:06:33\"}, {\"type\":\"paragraph\",\"text\":\"And I think that's good enough for now.\\nSo yeah, episode 13 for anyone who wants to hear more.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:06:38\"}, {\"type\":\"paragraph\",\"text\":\"Right, because this also includes a new way to gossip addresses.\\nSo that's, you know, that's actually a bigger change.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:06:44\"}, {\"type\":\"paragraph\",\"text\":\"I mean, the important thing is that I think a year from now, if I'm recalling correctly, if you want to use Tor in a year from now, you actually do need to have this version 3 support, right?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:06:57\"}, {\"type\":\"paragraph\",\"text\":\"That's also my understanding, yeah.\\nTor is still centralized, So there's somebody in charge who can say, okay, next year, you can no longer use version 2.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:07:04\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nSo now Bitcoin Core supports version 3, which means it's compatible with Tor even a year from now.\"}, {\"type\":\"heading\",\"text\":\"Anchors - Eclipse Attacks\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:07:15\"}, {\"type\":\"paragraph\",\"text\":\"Anchors.\\nIt's a new file, but more importantly, we talked in episode 17 and 18 about eclipse attacks, how a node can be sort of isolated from the rest of the network.\\nAnd one of the countermeasures that we talked about back then is that when the node restarts it should remember at least some of the nodes it was previously connected to and that's what these anchor connections are.\\nSo before your node shuts down it saves, or I guess it regularly saves, two of the nodes that it's connected to currently, namely nodes that it's only exchanging blocks with, so very low bandwidth.\\nAnd then when it starts up, it's going to read that file and it's going to connect to them again.\\nAnd we explain a lot more about that in those episodes.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:07:55\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I think especially episode 17.\\nYeah, both 17 and 18, I think most of this specific change was in episode 17.\\nSo this was included in Bitcoin Core 21 as well.\\nSo Eclipse attacks are now harder to pull off against Bitcoin Core 21 nodes.\"}, {\"type\":\"heading\",\"text\":\"BIP-157 \\\"Neutrino Filters\\\"\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:08:18\"}, {\"type\":\"paragraph\",\"text\":\"The next point is BIP-157, also known as neutrino filters.\\nWe have not talked about that yet, so we can briefly explain it.\\nThere are lots of mobile wallets out there, especially for Lightning, that don't want to download the entire blockchain.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:08:34\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, or just Lite wallets in general.\\nThey don't have to be mobile, just something that doesn't download and verify the entire blockchain.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:08:41\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, though I think the number of excuses you have to run a Lite wallet outside of a mobile situation are reduced.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:08:48\"}, {\"type\":\"paragraph\",\"text\":\"I mean, a lot of people don't feel like waiting for two days for the whole thing to sync.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:08:53\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, that's true for the initial experience.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:08:55\"}, {\"type\":\"paragraph\",\"text\":\"I mean it's a bad idea or you know definitely not preferable but that would be the reason.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:09:01\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, so what these filters do is they instead of you instead of downloading every block you download these filters which are much smaller than a block and then you can take your own list of addresses and run your own list of addresses against that filter And the filter will tell you whether or not there's something in the block pertaining to your addresses.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:09:20\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, or at least possibly.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:09:22\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, there can be some false positives.\\nSo you might get a list of a thousand blocks that you need to download, and maybe of those thousand blocks only a hundred actually contain your transactions.\\nBut that's better than downloading all 666,666 plus blocks.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:09:36\"}, {\"type\":\"paragraph\",\"text\":\"Yes, we made that milestone this week.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:09:39\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, exactly.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:09:40\"}, {\"type\":\"paragraph\",\"text\":\"That's why you remember the exact number.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:09:42\"}, {\"type\":\"paragraph\",\"text\":\"Precisely, it's very hard to remember.\\nThere are lots of trade-offs when it comes to these filters, so I think we should go into that for another episode.\\nIt's not enforced by consensus, so you're kind of trusting that the list is real.\\nLet's say the list gives you a bunch of nonsense results and you start downloading those blocks and you don't see what you're expecting, well then you know that whoever gave you those filters was lying to you.\\nBut it gets a little complicated.\\nSo we'll talk about that some other time.\\nBut it's there and it was already used in the wild a lot, especially by the mobile lightning wallets.\\nSo far there was only specialized nodes that would serve that, usually running BTCD.\\nAnd now, you know, every Bitcoin Core wallet can do it.\\nYeah, if you turn it on.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:10:22\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, so just to be clear, the thing that's new in this Bitcoin Core 21 release, I'm just gonna call it Bitcoin Core 21, Not Bitcoin Core 0.21.\\nAnyways, what's new here is that I think previous Bitcoin Core release could already create the filter and now in this Bitcoin Core release it can share it over, I guess, the peer-to-peer network, right?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:10:44\"}, {\"type\":\"paragraph\",\"text\":\"That's correct, yes.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:10:45\"}, {\"type\":\"paragraph\",\"text\":\"That's what's new.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:10:46\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, the filter has been around there.\\nSo as usual, you have this filter but you can't really use it.\\nAnd now you can use it.\\nNext one?\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:10:53\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, so we'll get back to this in another episode.\\nI think this is the short version of it.\"}, {\"type\":\"heading\",\"text\":\"Signet Signup\"}, {\"type\":\"paragraph\",\"text\":\"Next point.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:11:00\"}, {\"type\":\"paragraph\",\"text\":\"Signet.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:11:01\"}, {\"type\":\"paragraph\",\"text\":\"Signet.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:11:01\"}, {\"type\":\"paragraph\",\"text\":\"Which we discussed in episode 10.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:11:04\"}, {\"type\":\"paragraph\",\"text\":\"Correct.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:11:04\"}, {\"type\":\"paragraph\",\"text\":\"In great detail.\\nBut the very short version is, it is like testnet, but heavily centralized.\\nAnd everybody can make their own if you want to.\\nAnd it's awesome.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:11:16\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, what it does is it creates a Bitcoin blockchain in a way, just like testnet is just sort of a copy of the Bitcoin blockchain.\\nSame rules and same things apply, it's just there for developers to test new stuff on, to test new software on without the risk of losing coins if there are bugs and these kinds of things.\\nThe problem with the testnet is that because it's so similar to the Bitcoin blockchain it depends on hash power but without any economic incentives to actually keep the way secure or stable in any way.\\nThe testnet can be very insecure or no not as well insecure and more importantly unstable.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:11:57\"}, {\"type\":\"paragraph\",\"text\":\"Yeah unstable especially because there might not be any blocks and then after 20 minutes there's like lots of blocks.\\nYeah.\\nIt's just a mess.\\nYou can have very large reorgs.\\nIt's not fun to develop against it and although when you develop software you should make it very robust, you have to deal with edge cases that really make no sense on the real Bitcoin network.\\nSo you're kind of wasting your time.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:12:19\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nSo yeah, SIGNET is like a testnet, except that Bitcoin blocks need a valid signature.\\nFrom whoever is running the SIGNET.\\nAnd that person is making sure that the test network is somewhat stable.\\nSo it's completely insecure.\\nThis is not how you want to design actual Bitcoin, because it depends on the trusted third party, but because it's just for testing anyways, it's fine.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:12:45\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, and although there's just two people who can sign it, that doesn't really matter because everybody can make their own SIGNET with their own rules.\\nAnd you can have a 15 out of 15 multi-SIG, or you can make it everybody can sign it.\\nIt's probably a bad idea.\\nBut the centralization part is solved by just having as many as you want, and it's worth nothing.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:13:04\"}, {\"type\":\"paragraph\",\"text\":\"So this was included in Bitcoin Core 21.\\nWhat does that mean exactly, to have it included in Bitcoin Core 21?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:13:11\"}, {\"type\":\"paragraph\",\"text\":\"Well, it means that you can start Bitcoin Core with the `-signet`, just like you can start it with `-testnet` and your icon will have a nice different color and there's a faucet out there that you can go to and you can get signet coins which you get by the dozen, I think, so it's nice.\\nThe other thing that's included is taproot.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:13:36\"}, {\"type\":\"paragraph\",\"text\":\"Right yeah okay.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:13:38\"}, {\"type\":\"paragraph\",\"text\":\"And taproot is active on Signet.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:13:41\"}, {\"type\":\"paragraph\",\"text\":\"Yeah so we now have taproot on Signet.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:13:43\"}, {\"type\":\"paragraph\",\"text\":\"That's right.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:13:44\"}, {\"type\":\"paragraph\",\"text\":\"Obviously this is meaningless for regular users, this is just for developers, just for testing their software.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:13:51\"}, {\"type\":\"paragraph\",\"text\":\"Exactly, but the main plan was to have the taproot code inside of Bitcoin Core, unactivated, but just there so people can find bugs in it and can play with it.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:13:59\"}, {\"type\":\"paragraph\",\"text\":\"Which is also the case, it's in there now.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:14:02\"}, {\"type\":\"paragraph\",\"text\":\"Exactly, so it's nice because normally you would have the code of a soft fork in there and you could theoretically play with it but it's not very clear how you would do that but now it's very clear because you can use it on Signet and the nice thing about Signet is that the rules can be changed anytime because there's you know two miners that can centralize decide to just enforce different taproot rules if the taproot spec is changed because it's not final until it's live.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:14:29\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, well it's kind of final.\\nThe idea is that from here on out, it shouldn't be changed anymore, I think.\\nThat's why it's included in the code in the first place.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:14:38\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I think you'd see it as a release candidate.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:14:41\"}, {\"type\":\"paragraph\",\"text\":\"Because even if taproot activates on mainnet in the future with a new version of Bitcoin Core, this old version of Bitcoin Core won't do anything with that.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:14:50\"}, {\"type\":\"paragraph\",\"text\":\"So, even if the rules change now, there's no problem with your 0.21 node.\\nIt will not get confused if taproot changes.\\nOf course, hopefully it doesn't.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:14:59\"}, {\"type\":\"paragraph\",\"text\":\"But about that, so yeah, the taproot code is included in Bitcoin Core 21.\\nThis also means that probably the next minor version of Bitcoin Core, which would be Bitcoin Core 21.1, well, Bitcoin Core 0.21.1, will have the actual activation logic for taproot.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:15:22\"}, {\"type\":\"paragraph\",\"text\":\"Hopefully, yeah, if all goes well.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:15:23\"}, {\"type\":\"paragraph\",\"text\":\"That's kind of the plan, right?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:15:24\"}, {\"type\":\"paragraph\",\"text\":\"I mean, yeah, I think that's the tradition.\\nBut you know, there's no centralized management team that decides what the plan is.\\nSo it is what may happen.\\nBut yeah, let's just say that's the plan.\\nThat's the thing with an anarchistic system, right?\\nIt's what we did the last time, but nobody can force any of the volunteers and developers to do it again until it's been done.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:15:47\"}, {\"type\":\"paragraph\",\"text\":\"Isn't it time for you to take charge, Sjors?\\nI'm assuming that there will be a minor release which has a taproot activation in it.\\nIt's just gonna be my assumption.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:15:58\"}, {\"type\":\"paragraph\",\"text\":\"I'm optimistic, but I have not followed any of the, we discussed taproot activation possibilities in episode 3 I believe and taproot itself in episode 2 or the other way around.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:16:09\"}, {\"type\":\"paragraph\",\"text\":\"And I have not followed the news since then when it comes to activation so I guess I'll just see when it activates.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:16:15\"}, {\"type\":\"paragraph\",\"text\":\"Yeah there's more on that discussion indeed in episode 3 and taproot itself in episode 2.\\nAll right, next point.\"}, {\"type\":\"heading\",\"text\":\"BIP339 \\\"WTXID\\\"\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:16:22\"}, {\"type\":\"paragraph\",\"text\":\"Yeah so we'll jump back in our little queue to BIP339 witness transaction id relay or WTXID so here's the thing a long long time ago before there was SegWit, transactions had a hash.\\nAnd this hash represented, you know, the entire transaction.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:16:43\"}, {\"type\":\"paragraph\",\"text\":\"It was a transaction ID.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:16:45\"}, {\"type\":\"paragraph\",\"text\":\"Exactly.\\nBut then we created SegWit.\\nAnd segwit added data to the transaction but the identifiers that we use for transactions are still based on what is in the transaction minus all the segwit stuff this is because old nodes don't don't see the segwit stuff\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:17:04\"}, {\"type\":\"paragraph\",\"text\":\"Yeah this was kind of why segwit worked to solve malleability because previously the transaction before segwit the transaction had all the transaction details how many bitcoins are involved where they going plus the signature and this was all hashed and this hash was a transaction ID.\\nHowever, it turned out that slightly different signatures could all be valid and therefore a signature could be changed in flight for example you send a transaction to the network someone on that network slightly changes the signature the transaction is still valid but all of a sudden the transaction ID changed because the hash changed because the signature changed.\\nSo to solve that, this was a problem for things like Lightning.\\nSo to solve this, SegWit separated the transaction details from the signature and the transaction details were still hashed to create the transaction ID and the signature was put in a separate part of a block, a segwit part of the block, and therefore malleability was solved.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:18:16\"}, {\"type\":\"paragraph\",\"text\":\"But this meant that the signature was not part of the transaction ID at all.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:18:17\"}, {\"type\":\"paragraph\",\"text\":\"That's right, and that makes a lot of sense when you, for example, have something like Lightning or any sort of escrow system where you pre-sign a transaction to release coins.\\nYou want to make sure that the transactions go in.\\nAnd so The transaction that releases the coins refers to the transaction that puts the coins in there.\\nSo you don't want somebody to be able to change that transaction that goes in, because then you suddenly don't have a release transaction anymore and your coins are held hostage.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:18:43\"}, {\"type\":\"paragraph\",\"text\":\"So what's this change now?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:18:44\"}, {\"type\":\"paragraph\",\"text\":\"What this change is, is not about how the consensus works, but it's how transactions are relayed between nodes.\\nSo, when a node talks to another node, it says, hey, here's a bunch of transaction IDs, would you like the whole transaction for this thing?\\nAnd that's still referring to this pre-segwit transaction hash, also the on-chain transaction hash.\\nBut this new change lets you gossip these transactions using the witness transaction ID, which does include the signature, I believe.\\nNow I don't know why that's useful, to be honest, but because I haven't read up on what exactly the BIP is saying.\\nI'm just saying that you can now gossip transactions based on, including the witness, which I guess could have some benefit.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:19:27\"}, {\"type\":\"paragraph\",\"text\":\"Do you think this has something to do with potentially sharing a transaction with an invalid signature and therefore...\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:19:41\"}, {\"type\":\"paragraph\",\"text\":\"That's my theory, because I should have read it, but my guess is that indeed you would send another node a transaction hash and they would ask for the transaction and you would give it a fake transaction because you would just add your own signature to it and it would just be nonsense.\\nAnd then the other node would say, okay, this transaction is dumb.\\nI'm just going to ignore that moving forward.\\nAnd then another node would give the real one, but this node is now rejecting it because it's already seen it and it thought it was fake.\\nSo you want to prevent that.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:20:02\"}, {\"type\":\"paragraph\",\"text\":\"Right and that's what this new change might solve is your speculation but neither of us is actually sure because we didn't read the BIP.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:20:10\"}, {\"type\":\"paragraph\",\"text\":\"That's right.\\nRead the BIP fellows.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:20:15\"}, {\"type\":\"paragraph\",\"text\":\"And it's BIP which one is it?\\n339.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:20:17\"}, {\"type\":\"paragraph\",\"text\":\"Yes, I also know this was done before taproot because it has some sort of utility there too.\"}, {\"type\":\"heading\",\"text\":\"RPC Changes\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:20:25\"}, {\"type\":\"paragraph\",\"text\":\"Next item is taproot which we've already covered.\\nSo then the next item is a bunch of RPC changes.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:20:32\"}, {\"type\":\"paragraph\",\"text\":\"That's right.\\nIf you look at the release notes, a lot of changes are about the RPC.\\nAnd we're not gonna mention them because they're not that interesting.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:20:39\"}, {\"type\":\"paragraph\",\"text\":\"RPC stands for Remote Procedure Call?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:20:42\"}, {\"type\":\"paragraph\",\"text\":\"Yes.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:20:42\"}, {\"type\":\"paragraph\",\"text\":\"What does that mean actually, Sjors?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:20:44\"}, {\"type\":\"paragraph\",\"text\":\"It basically means if you're running a Bitcoin node, then you can issue commands to it.\\nAnd if you're a desktop user, you would just click on buttons.\\nBut if you're in the command line, well, you would type Bitcoin client, then some command.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:20:56\"}, {\"type\":\"paragraph\",\"text\":\"But if you are on the network, you probably want to send some JSON to it and get some JSON back from it over the network.\\nAnd that's what these RPC calls are for.\\nSo you can send the commands over the network and get a response back.\\nAnd if you've built some sort of complicated server, you want to make sure nothing breaks.\\nAnd BitConcord is always very careful.\\nIt tries not to make breaking changes in that RPC.\\nSo, for example, a situation you might be in is you run a block explorer of some sort, and you have one little server machine that has a Bitcoin full node on it and we'll get to that actually with the CMQ explanation but I guess we'll transition to that.So you'll have one node that runs Bitcoin core on it and another that runs a database and another that runs the website because usually you know they try to split all these things up so the web server might ask the node questions like what is the current block height or you know what's in your mempool that that's done via RPC That might or it might say send a transaction to this person that's also done via RPC.\\nSo that's all scripts and code so you want to make sure that your code is still doing what you think it's doing when you upgrade the node.\\nBut which brings us to the next point ZeroMQ feature improvement.\\nSo you can read in, if you find this interesting, you can read in the release note exactly what.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:22:22\"}, {\"type\":\"paragraph\",\"text\":\"Is that one of the RPC changes?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:22:25\"}, {\"type\":\"paragraph\",\"text\":\"Well ZeroMQ is not actually RPC, but it's also a way to communicate.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:22:32\"}, {\"type\":\"paragraph\",\"text\":\"So with RPC you have the Bitcoin node is listening and you send a command to it and you get a response back.\\nThat's how RPC works.\\nBut in ZeroMQ it's push-based.\\nSo what you're doing is the Bitcoin Node is constantly broadcasting and you can listen to that broadcast through a channel and so the broadcast could be every new block.\\nSo then you're listening to a certain channel and you get the block as soon as the node sees it.\\nOr you can listen to transactions or I believe you can even listen to transactions at a certain address.\\nThis might be useful if you have a block explorer with a live page where you're looking at an address and then the notes sees a new transaction on that address, it sends a message to your ZMQ to the web server and the web server sends a WebSocket message to the browser so your browser updates without having to hit the refresh button, something like that.\"}, {\"type\":\"heading\",\"text\":\"Send RPC\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:23:28\"}, {\"type\":\"paragraph\",\"text\":\"There is a new Send RPC by yours truly, which is cool.\\nIt basically, if you want to send coins through the command line, I mean, you can do it with the graphical interface, but if you're, you know, the cool kids want to do it with the command line, it's very tedious.\\nYou know, when the first version of Bitcoin Core came out, but it wasn't even Bitcoin Core.\\nI think you just had a command called send to address and you gave it an address and an amount and that was it.\\nAnd that's still out there.\\nBut the problem is that command got expanded, but it doesn't have all the features you may want.\\nAnd at the same time, there were commands to create PSBTs that we talked about in an earlier episode.\\nThose commands were very powerful.\\nYou could do all sorts of cool things to your transaction, including coin selection, for example, through the command line.\\nBut it was very tedious because if you want to make a PSBT then you have to make it and then sign it and then finalize it and do a bunch of things.\\nSo the problem was you had a very simple way to send coins with the very old Satoshi time RPC methods, just send to an address but you couldn't configure it.\\nOr you had a super powerful method that was extremely hard to use.\\nAnd so the new `send` RPC is easier to use and powerful.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:24:41\"}, {\"type\":\"paragraph\",\"text\":\"And you made this?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:24:42\"}, {\"type\":\"paragraph\",\"text\":\"Yes, and it's been improved since.\\nIt's especially useful if you're experimenting with newer features, like hardware wallet integration and stuff.\\nThen you want to experiment on the command line and then hopefully later do it in the GUI.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:25:01\"}, {\"type\":\"paragraph\",\"text\":\"How is that going to take a side path?\\nWhat's going on with hardware integration, hardware wallet integration?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:25:07\"}, {\"type\":\"paragraph\",\"text\":\"It's very slow.\\nSo I think I gave a presentation in 2019 or something.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:25:14\"}, {\"type\":\"paragraph\",\"text\":\"In London?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:25:15\"}, {\"type\":\"paragraph\",\"text\":\"Yeah and Andrew Chow was on it as well.\\nAnd I mean the final picture we thought would be here now, or at least I was hoping for, but it's not.\\nBut a lot of things have been done.\\nSo part of the hardware wallet project was to get PSBT support.\\nThat's pretty much done.\\nPart of it was descriptor wallets, which we'll get to next.\\nSo that's been done and the thing I've been working on as a work in progress is a expansion of this send command in RPC that will let you talk to a hardware wallet directly from the command line and The second one is a graphical interface around that.\\nAnd those pull requests exist, they get a little bit of review, but they're not moving forward very quickly.\\nEventually it might happen.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:25:56\"}, {\"type\":\"paragraph\",\"text\":\"But it's still moving.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:25:58\"}, {\"type\":\"paragraph\",\"text\":\"It's still moving, and also there are great other solutions out there.\\nSo there's the Spectre open source project which just runs a little web server on your own computer and then it magically talks to the RPC again with these RPC calls that we talked about and it creates wallets and it's very very nice very slick we wouldn't be able to get it that slick.\\nBut if you can get more support inside of Bitcoin Core, it means fewer software that you need to download from places that you then need to trust.\"}, {\"type\":\"heading\",\"text\":\"Experimental Descriptor Wallets and SQLight Support\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:26:28\"}, {\"type\":\"paragraph\",\"text\":\"The next point is called experimental descriptor wallets and SQLite support.\\nSo two things.\\nSo descriptor wallets, I don't think we've talked about that yet.\\nSo the general idea is that when Bitcoin Core started, it was just a single address type, pay to public key.\\nI think we did discuss that.\\nAnd then there was a new address format, pay to public key hash.\\nAnd so that was added to the wallet.\\nAnd then SegWit came along and pay to script hash came along.\\nAnd now there's the wallet is just a giant mess of backwards compatible things.\"}, {\"type\":\"heading\",\"text\":\"The Descriptor Wallet\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:27:02\"}, {\"type\":\"paragraph\",\"text\":\"Code that nobody understands.\\nAnd well, Andrew Chow has been at work at cleaning that up.\\nAnd one of the things that was added was the idea of the descriptor wallet.\\nThe descriptor is something invented by Sipa.\\nAnd the idea there is that you describe what is in the wallet.\\nSo you literally just write out, you start with this master key, and then you take the first derivation, you know, within BIP 42, and you take the second derivation or whatever, and then it's slash star, and then if you write down just those descriptors you can recover your addresses.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:27:33\"}, {\"type\":\"paragraph\",\"text\":\"Yeah so this could be for example you have a bunch of multi-sig addresses and these are described as multi-sig addresses and then your hardware wallet addresses and then your playing addresses or whatever and these are sort of categorized you can easily categorize your different UTXOs your different coins.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:27:53\"}, {\"type\":\"paragraph\",\"text\":\"Yeah so for a hardware wallet is a nice example usually a hardware wallet will give you an xpub you know if you plug it in it can spit out an xpub and xpub is a way to derive multiple addresses.\\nAnd so a multi-sig address.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:28:05\"}, {\"type\":\"paragraph\",\"text\":\"We did discuss that in, I think, one of the first episodes.\\nI don't have the number in front of me.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:28:12\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, could be.\\nAnd basically, You can say, okay, here's a multi-sig address consisting of these three XPUBS and then what you need to do to these XPUBS to get the individual addresses.\\nSo you can describe very complicated wallets.\\nAnd if we add mini-script support in the future, you can describe even more wildly complicated wallets that way.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:28:32\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nSo what's up with SQLite?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:28:34\"}, {\"type\":\"paragraph\",\"text\":\"SQLite is a new database format so the wallet itself is just a bunch of records essentially and right now it's sitting in Berkeley DB version 4 which is a 10 year old unmaintained piece of software which you know it's 10 years old and unmaintained so that's a problem and SQLite is a bit more modern it's still being maintained and it's very short so the total code for SQLite is not that large to review, and it is designed to be backwards and forwards compatible in sane ways.\\nSo if a new version of SQLite comes out, you have pretty strong guarantees that it's still going to work.\\nAnd that If you save something in the new wallet, it's also going to work in an old version.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:29:19\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I was just going to ask that.\\nSo if you upgrade to Bitcoin Core 21, you're...\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:29:27\"}, {\"type\":\"paragraph\",\"text\":\"Nothing happens.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:29:28\"}, {\"type\":\"paragraph\",\"text\":\"Nothing interesting happens.\\nNothing worrisome happens.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:29:31\"}, {\"type\":\"paragraph\",\"text\":\"No, if you already have a wallet it is not converted to descriptor wallets, it is not converted to SQLite, nothing happens.There are manual commands that if you like to you can do that, but we still consider both of these things somewhat experimental, So you probably don't want to do that.\\nBut the goal in the future is that new wallets will be descriptor wallets and will be stored using the SQLite database.\\nAnd then, you know, more far into the future, there'll be an automatic migration tool or like at least some button that says, you know, you probably want to migrate this.\\nRight.\\nThen even further into the future when you start it up, it'll say, okay, I'm not going to start up, please migrate the wallet first using this tool or something.\\nAnd then later on it's like, please download an older version.\\nNow, I guess there'll always be a conversion tool because you want to be nice.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:30:21\"}, {\"type\":\"paragraph\",\"text\":\"I like my backwards compatibility, Sjors.\\nPlease keep that for me.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:30:25\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I guess it depends on how horrendous it is to keep all that old code around.\\nBut I guess one thing we might end up doing is write just the code that's necessary to read one of those old Berkeley databases, no longer to be able to write it.\\nSo you wouldn't need the whole library, you know we talked about libraries, we would just need enough to be able to read it.\\nBut that's you know years and years probably.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:30:48\"}, {\"type\":\"paragraph\",\"text\":\"I think we've made it to our last point.\\nIt's a small one.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:30:52\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, at the RPC level, you can now specify your fee in Satoshi per byte.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:30:58\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, so it used to be Satoshi per kilobyte or BTC per kilobyte, some weird unit.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:31:03\"}, {\"type\":\"paragraph\",\"text\":\"Something no one else used.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:31:05\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, exactly, because now all the websites will use Satoshi per byte\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:31:10\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, the annoying thing about the standard that it was using before is if you type one because you intended one satoshi per byte, you're actually saying, I don't know, a thousand satoshi per byte, or some really obscene number that would be very expensive if you don't know what you're doing.\\nThere is actually protection against that since a few years.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:31:29\"}, {\"type\":\"paragraph\",\"text\":\"So that's changed to make it more consistent with the rest of the Bitcoin ecosystem.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:31:33\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, and that's not yet in the graphical interface, but that's typically the next step.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:31:38\"}, {\"type\":\"paragraph\",\"text\":\"Right.\\nSo yeah, I noticed there were like 140 contributors to this release, something like that?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:31:43\"}, {\"type\":\"paragraph\",\"text\":\"Quite possible.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:31:45\"}, {\"type\":\"paragraph\",\"text\":\"Maybe 130, 140, something around that number.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:31:48\"}, {\"type\":\"paragraph\",\"text\":\"Because we talked about the highlights, but if you look at the actual release notes and then at the bottom, there are so many super small changes that could be an individual contributor that just comes by.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:31:59\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, I just wanted to mention thank you to all these 130 or 40 or whatever it was contributors.\\nThanks to everyone.\\nThanks to you as well, Sjors.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:32:08\"}, {\"type\":\"paragraph\",\"text\":\"Thank you.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:32:09\"}, {\"type\":\"paragraph\",\"text\":\"You're one of them.\\nWhat else?\\nHow do people upgrade?\\nWhat do people do?\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:32:12\"}, {\"type\":\"paragraph\",\"text\":\"Go to bitcoincore.org and download it and then do all the checks to make sure that you've got the real thing.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:32:19\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, like the signature verification stuff and these kinds of, well, I guess that's the main thing.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:32:25\"}, {\"type\":\"paragraph\",\"text\":\"Yes, yeah, I think that's it.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:32:27\"}, {\"type\":\"paragraph\",\"text\":\"Yeah, and nothing else, right?\\nSo Like we mentioned, this Berkeley DB to SQLite, that's unnecessary, you don't need to re-download blocks or anything like that.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:32:36\"}, {\"type\":\"paragraph\",\"text\":\"As a user, you just download the new version and life continues.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:32:41\"}, {\"type\":\"paragraph\",\"text\":\"Nice, I like that.\\nI like life to continue.\"}, {\"type\":\"paragraph\",\"text\":\"Sjors Provost: 00:32:45\"}, {\"type\":\"paragraph\",\"text\":\"Alright, and thank you for listening to The Van Wirdum Sjorsnado.\"}, {\"type\":\"paragraph\",\"text\":\"Aaron van Wirdum: 00:32:48\"}, {\"type\":\"paragraph\",\"text\":\"There you go.\"}",
    "body": "##  Intro\n\nAaron van Wirdum: 00:01:35\n\nLive from Utrecht, this is The Van Wirdum Sjorsnado.\nEpisode 24, we're going to discuss Bitcoin Core 21.\n\nSjors Provost: 00:01:46\n\nHooray.\nWell, 0.21.\nWe're still in the age of the zero point releases.\n\nAaron van Wirdum: 00:01:51\n\nYes, which is ending now.\n\nSjors Provost: 00:01:53\n\nProbably yes.\n\nAaron van Wirdum: 00:01:54\n\nThat's what I understand.\nThe next one, the 22 will actually be Bitcoin Core 22.\n\nSjors Provost: 00:01:59\n\nThat's what it says in the master branch right now but you know until there's a release somebody could come out and you know change it back all right well anyways it's gonna be yeah 22 will be the next version.\n\nAaron van Wirdum: 00:02:10\n\nYeah so this one is still called Bitcoin Core 0.21 and it was released exactly a week ago when we're recording?\nNo, less than a week ago.\nAnyways, last week and we're gonna discuss this new release and the new features in this new release.\n\nSjors Provost: 00:02:27\n\nYeah, there's some very cool features in there.\n\nAaron van Wirdum: 00:02:29\n\nIt's a big release.\nThere's a lot of new stuff in here.\n\nSjors Provost: 00:02:32\n\nYeah, and we're going to refer back to some earlier episodes where we talk about either the specific feature or at least the general area that this feature touches.\n\nAaron van Wirdum: 00:02:40\n\nYeah, we already discussed some of it.\nSo what we're going to do for this episode is we're just going to take the release notes and discuss each notable new future point by point for the most interesting ones.\n\nSjors Provost: 00:02:56\n\nThat's right.\nAnd in the show notes you can find the full release notes which are very long.\n\nAaron van Wirdum: 00:03:01\n\nLet's start.\nAre you ready?\n\nSjors Provost: 00:03:03\n\nI'm ready.\n\nAaron van Wirdum: 00:03:04\n\nLet's go.\nSo first points.\n\n## Mempool\n\nSjors Provost: 00:03:06\n\nYeah, so the first change, the mempool, right?\nIt used to be that when you have a Bitcoin Core wallet, you would be broadcasting transactions from your wallet.\nAnd then after 15 seconds or so you would be broadcasting transactions from the wallet and you would just keep broadcasting it to your peers nearby.\n\nAaron van Wirdum: 00:03:26\n\nIsn't it 15 minutes?\n\nSjors Provost: 00:03:27\n\nYeah 15 minutes.\nSo it would very frequently broadcast its own transactions because the wallet really wants to make sure that the rest of the world hears about its transactions.\n\nAaron van Wirdum: 00:03:37\n\nUntil it's included in a block, of course.\n\nSjors Provost: 00:03:40\n\nExactly.\nThe problem with that is it's not very good for privacy.\nBecause if you can pinpoint which node is constantly repeating a transaction, then that suggests that that's the node that created it.\n\nAaron van Wirdum: 00:03:51\n\nYeah, it makes it very obvious which addresses, which inputs originate from which node, which is bad for privacy, because a node can be tied to an IP address and an IP address to an identity and so forth.\n\nSjors Provost: 00:04:03\n\nExactly.\nSo the long-term goal here, which has not been achieved in this specific change, but we always do little micro steps.\n\nSjors Provost: 00:04:11\n\nThe long-term goal is to get to a place where the node will just treat its own transactions, its own wallet transactions, just like it would transactions from another peer.\nSo it will not prioritize its own transactions.\nAnd there's some downside to that because you have to keep your wallet open probably a little bit longer to make sure that it does get broadcast.\nBut yeah, then it would be indistinguishable.\nSo I think one of the long-term goals is to say, we're going to wait until the wallet transaction fee is close to what it would be for the next block, because you can order transactions by fee.\n\nAaron van Wirdum: 00:04:45\n\nYeah, I think what you're trying to say is that right now this rebroadcasting is done blindly while in the future the plan is to actually see if the transaction should have been included in a block by now based on the fees and only if that's not the case will it rebroadcast the transaction and it will do so for any transaction the node has seen not just for its own transactions.\n\nSjors Provost: 00:05:08\n\nExactly and this also creates a better separation between because then you know Bitcoin Core is a node which has a mempool and it's a wallet and you know this dealing with mempools should be done by the node, and it shouldn't be done by the wallet.\nSo there's a lot of process separation going on under the hood there.\n\nAaron van Wirdum: 00:05:25\n\nYeah, but this, what we're describing right now, is actually not included in Bitcoin Core 21 right now.\nWe've seen one micro step towards this in Bitcoin Core 21.\n\nAaron van Wirdum: 00:05:26\n\nSo what is this micro step?\n\nSjors Provost: 00:05:36\n\nIf I understand correctly, the micro step is that it's going to broadcast it once a day instead of every 15 minutes.\n\nAaron van Wirdum: 00:05:42\n\nI think that's right.\nIt just does it less often.\nSo there's a bigger chance it will have been included in a block by then, which means it's never going to rebroadcast.\n\nSjors Provost: 00:05:52\n\nAnd you need to spy on a node a lot longer.\n\nAaron van Wirdum: 00:05:54\n\nYeah, exactly.\nSo it's a benefit for privacy.\n\nSjors Provost: 00:05:58\n\nYeah, I would say so.\n\nAaron van Wirdum: 00:05:59\n\nAnd it's a small step towards a bigger plan.\n\n## Tor Version 3 Support\n\nAaron van Wirdum: 00:06:02\n\nOkay, next one.\nOh, we should mention as far as the mempool stuff, we've discussed this in episode 19.\nThat's in more detail for listeners who want to go back a couple of episodes and hear more about this.\nOkay, next point is Tor version 3 support.\n\nSjors Provost: 00:06:20\n\nYeah, which we talked about in episode 13 in quite a bit of detail.\nSo the quick version is Tor has been improved, this is version 3, Bitcoin Core now uses that.\n\nAaron van Wirdum: 00:06:31\n\nThat's the very short version.\n\nAaron van Wirdum: 00:06:33\n\nAnd I think that's good enough for now.\nSo yeah, episode 13 for anyone who wants to hear more.\n\nSjors Provost: 00:06:38\n\nRight, because this also includes a new way to gossip addresses.\nSo that's, you know, that's actually a bigger change.\n\nAaron van Wirdum: 00:06:44\n\nI mean, the important thing is that I think a year from now, if I'm recalling correctly, if you want to use Tor in a year from now, you actually do need to have this version 3 support, right?\n\nSjors Provost: 00:06:57\n\nThat's also my understanding, yeah.\nTor is still centralized, So there's somebody in charge who can say, okay, next year, you can no longer use version 2.\n\nAaron van Wirdum: 00:07:04\n\nRight.\nSo now Bitcoin Core supports version 3, which means it's compatible with Tor even a year from now.\n\n## Anchors - Eclipse Attacks\n\nSjors Provost: 00:07:15\n\nAnchors.\nIt's a new file, but more importantly, we talked in episode 17 and 18 about eclipse attacks, how a node can be sort of isolated from the rest of the network.\nAnd one of the countermeasures that we talked about back then is that when the node restarts it should remember at least some of the nodes it was previously connected to and that's what these anchor connections are.\nSo before your node shuts down it saves, or I guess it regularly saves, two of the nodes that it's connected to currently, namely nodes that it's only exchanging blocks with, so very low bandwidth.\nAnd then when it starts up, it's going to read that file and it's going to connect to them again.\nAnd we explain a lot more about that in those episodes.\n\nAaron van Wirdum: 00:07:55\n\nYeah, I think especially episode 17.\nYeah, both 17 and 18, I think most of this specific change was in episode 17.\nSo this was included in Bitcoin Core 21 as well.\nSo Eclipse attacks are now harder to pull off against Bitcoin Core 21 nodes.\n\n## BIP-157 \"Neutrino Filters\"\n\nSjors Provost: 00:08:18\n\nThe next point is BIP-157, also known as neutrino filters.\nWe have not talked about that yet, so we can briefly explain it.\nThere are lots of mobile wallets out there, especially for Lightning, that don't want to download the entire blockchain.\n\nAaron van Wirdum: 00:08:34\n\nYeah, or just Lite wallets in general.\nThey don't have to be mobile, just something that doesn't download and verify the entire blockchain.\n\nSjors Provost: 00:08:41\n\nYeah, though I think the number of excuses you have to run a Lite wallet outside of a mobile situation are reduced.\n\nAaron van Wirdum: 00:08:48\n\nI mean, a lot of people don't feel like waiting for two days for the whole thing to sync.\n\nSjors Provost: 00:08:53\n\nYeah, that's true for the initial experience.\n\nAaron van Wirdum: 00:08:55\n\nI mean it's a bad idea or you know definitely not preferable but that would be the reason.\n\nSjors Provost: 00:09:01\n\nYeah, so what these filters do is they instead of you instead of downloading every block you download these filters which are much smaller than a block and then you can take your own list of addresses and run your own list of addresses against that filter And the filter will tell you whether or not there's something in the block pertaining to your addresses.\n\nAaron van Wirdum: 00:09:20\n\nYeah, or at least possibly.\n\nSjors Provost: 00:09:22\n\nYeah, there can be some false positives.\nSo you might get a list of a thousand blocks that you need to download, and maybe of those thousand blocks only a hundred actually contain your transactions.\nBut that's better than downloading all 666,666 plus blocks.\n\nAaron van Wirdum: 00:09:36\n\nYes, we made that milestone this week.\n\nSjors Provost: 00:09:39\n\nYeah, exactly.\n\nAaron van Wirdum: 00:09:40\n\nThat's why you remember the exact number.\n\nSjors Provost: 00:09:42\n\nPrecisely, it's very hard to remember.\nThere are lots of trade-offs when it comes to these filters, so I think we should go into that for another episode.\nIt's not enforced by consensus, so you're kind of trusting that the list is real.\nLet's say the list gives you a bunch of nonsense results and you start downloading those blocks and you don't see what you're expecting, well then you know that whoever gave you those filters was lying to you.\nBut it gets a little complicated.\nSo we'll talk about that some other time.\nBut it's there and it was already used in the wild a lot, especially by the mobile lightning wallets.\nSo far there was only specialized nodes that would serve that, usually running BTCD.\nAnd now, you know, every Bitcoin Core wallet can do it.\nYeah, if you turn it on.\n\nAaron van Wirdum: 00:10:22\n\nYeah, so just to be clear, the thing that's new in this Bitcoin Core 21 release, I'm just gonna call it Bitcoin Core 21, Not Bitcoin Core 0.21.\nAnyways, what's new here is that I think previous Bitcoin Core release could already create the filter and now in this Bitcoin Core release it can share it over, I guess, the peer-to-peer network, right?\n\nSjors Provost: 00:10:44\n\nThat's correct, yes.\n\nAaron van Wirdum: 00:10:45\n\nThat's what's new.\n\nSjors Provost: 00:10:46\n\nYeah, the filter has been around there.\nSo as usual, you have this filter but you can't really use it.\nAnd now you can use it.\nNext one?\n\nAaron van Wirdum: 00:10:53\n\nYeah, so we'll get back to this in another episode.\nI think this is the short version of it.\n\n## Signet Signup\n\nNext point.\n\nSjors Provost: 00:11:00\n\nSignet.\n\nAaron van Wirdum: 00:11:01\n\nSignet.\n\nSjors Provost: 00:11:01\n\nWhich we discussed in episode 10.\n\nAaron van Wirdum: 00:11:04\n\nCorrect.\n\nSjors Provost: 00:11:04\n\nIn great detail.\nBut the very short version is, it is like testnet, but heavily centralized.\nAnd everybody can make their own if you want to.\nAnd it's awesome.\n\nAaron van Wirdum: 00:11:16\n\nYeah, what it does is it creates a Bitcoin blockchain in a way, just like testnet is just sort of a copy of the Bitcoin blockchain.\nSame rules and same things apply, it's just there for developers to test new stuff on, to test new software on without the risk of losing coins if there are bugs and these kinds of things.\nThe problem with the testnet is that because it's so similar to the Bitcoin blockchain it depends on hash power but without any economic incentives to actually keep the way secure or stable in any way.\nThe testnet can be very insecure or no not as well insecure and more importantly unstable.\n\nSjors Provost: 00:11:57\n\nYeah unstable especially because there might not be any blocks and then after 20 minutes there's like lots of blocks.\nYeah.\nIt's just a mess.\nYou can have very large reorgs.\nIt's not fun to develop against it and although when you develop software you should make it very robust, you have to deal with edge cases that really make no sense on the real Bitcoin network.\nSo you're kind of wasting your time.\n\nAaron van Wirdum: 00:12:19\n\nRight.\nSo yeah, SIGNET is like a testnet, except that Bitcoin blocks need a valid signature.\nFrom whoever is running the SIGNET.\nAnd that person is making sure that the test network is somewhat stable.\nSo it's completely insecure.\nThis is not how you want to design actual Bitcoin, because it depends on the trusted third party, but because it's just for testing anyways, it's fine.\n\nSjors Provost: 00:12:45\n\nYeah, and although there's just two people who can sign it, that doesn't really matter because everybody can make their own SIGNET with their own rules.\nAnd you can have a 15 out of 15 multi-SIG, or you can make it everybody can sign it.\nIt's probably a bad idea.\nBut the centralization part is solved by just having as many as you want, and it's worth nothing.\n\nAaron van Wirdum: 00:13:04\n\nSo this was included in Bitcoin Core 21.\nWhat does that mean exactly, to have it included in Bitcoin Core 21?\n\nSjors Provost: 00:13:11\n\nWell, it means that you can start Bitcoin Core with the `-signet`, just like you can start it with `-testnet` and your icon will have a nice different color and there's a faucet out there that you can go to and you can get signet coins which you get by the dozen, I think, so it's nice.\nThe other thing that's included is taproot.\n\nAaron van Wirdum: 00:13:36\n\nRight yeah okay.\n\nSjors Provost: 00:13:38\n\nAnd taproot is active on Signet.\n\nAaron van Wirdum: 00:13:41\n\nYeah so we now have taproot on Signet.\n\nSjors Provost: 00:13:43\n\nThat's right.\n\nAaron van Wirdum: 00:13:44\n\nObviously this is meaningless for regular users, this is just for developers, just for testing their software.\n\nSjors Provost: 00:13:51\n\nExactly, but the main plan was to have the taproot code inside of Bitcoin Core, unactivated, but just there so people can find bugs in it and can play with it.\n\nAaron van Wirdum: 00:13:59\n\nWhich is also the case, it's in there now.\n\nSjors Provost: 00:14:02\n\nExactly, so it's nice because normally you would have the code of a soft fork in there and you could theoretically play with it but it's not very clear how you would do that but now it's very clear because you can use it on Signet and the nice thing about Signet is that the rules can be changed anytime because there's you know two miners that can centralize decide to just enforce different taproot rules if the taproot spec is changed because it's not final until it's live.\n\nAaron van Wirdum: 00:14:29\n\nYeah, well it's kind of final.\nThe idea is that from here on out, it shouldn't be changed anymore, I think.\nThat's why it's included in the code in the first place.\n\nSjors Provost: 00:14:38\n\nYeah, I think you'd see it as a release candidate.\n\nSjors Provost: 00:14:41\n\nBecause even if taproot activates on mainnet in the future with a new version of Bitcoin Core, this old version of Bitcoin Core won't do anything with that.\n\nSjors Provost: 00:14:50\n\nSo, even if the rules change now, there's no problem with your 0.21 node.\nIt will not get confused if taproot changes.\nOf course, hopefully it doesn't.\n\nAaron van Wirdum: 00:14:59\n\nBut about that, so yeah, the taproot code is included in Bitcoin Core 21.\nThis also means that probably the next minor version of Bitcoin Core, which would be Bitcoin Core 21.1, well, Bitcoin Core 0.21.1, will have the actual activation logic for taproot.\n\nSjors Provost: 00:15:22\n\nHopefully, yeah, if all goes well.\n\nAaron van Wirdum: 00:15:23\n\nThat's kind of the plan, right?\n\nSjors Provost: 00:15:24\n\nI mean, yeah, I think that's the tradition.\nBut you know, there's no centralized management team that decides what the plan is.\nSo it is what may happen.\nBut yeah, let's just say that's the plan.\nThat's the thing with an anarchistic system, right?\nIt's what we did the last time, but nobody can force any of the volunteers and developers to do it again until it's been done.\n\nAaron van Wirdum: 00:15:47\n\nIsn't it time for you to take charge, Sjors?\nI'm assuming that there will be a minor release which has a taproot activation in it.\nIt's just gonna be my assumption.\n\nSjors Provost: 00:15:58\n\nI'm optimistic, but I have not followed any of the, we discussed taproot activation possibilities in episode 3 I believe and taproot itself in episode 2 or the other way around.\n\nSjors Provost: 00:16:09\n\nAnd I have not followed the news since then when it comes to activation so I guess I'll just see when it activates.\n\nAaron van Wirdum: 00:16:15\n\nYeah there's more on that discussion indeed in episode 3 and taproot itself in episode 2.\nAll right, next point.\n\n## BIP339 \"WTXID\"\n\nSjors Provost: 00:16:22\n\nYeah so we'll jump back in our little queue to BIP339 witness transaction id relay or WTXID so here's the thing a long long time ago before there was SegWit, transactions had a hash.\nAnd this hash represented, you know, the entire transaction.\n\nAaron van Wirdum: 00:16:43\n\nIt was a transaction ID.\n\nSjors Provost: 00:16:45\n\nExactly.\nBut then we created SegWit.\nAnd segwit added data to the transaction but the identifiers that we use for transactions are still based on what is in the transaction minus all the segwit stuff this is because old nodes don't don't see the segwit stuff\n\nAaron van Wirdum: 00:17:04\n\nYeah this was kind of why segwit worked to solve malleability because previously the transaction before segwit the transaction had all the transaction details how many bitcoins are involved where they going plus the signature and this was all hashed and this hash was a transaction ID.\nHowever, it turned out that slightly different signatures could all be valid and therefore a signature could be changed in flight for example you send a transaction to the network someone on that network slightly changes the signature the transaction is still valid but all of a sudden the transaction ID changed because the hash changed because the signature changed.\nSo to solve that, this was a problem for things like Lightning.\nSo to solve this, SegWit separated the transaction details from the signature and the transaction details were still hashed to create the transaction ID and the signature was put in a separate part of a block, a segwit part of the block, and therefore malleability was solved.\n\nAaron van Wirdum: 00:18:16\n\nBut this meant that the signature was not part of the transaction ID at all.\n\nSjors Provost: 00:18:17\n\nThat's right, and that makes a lot of sense when you, for example, have something like Lightning or any sort of escrow system where you pre-sign a transaction to release coins.\nYou want to make sure that the transactions go in.\nAnd so The transaction that releases the coins refers to the transaction that puts the coins in there.\nSo you don't want somebody to be able to change that transaction that goes in, because then you suddenly don't have a release transaction anymore and your coins are held hostage.\n\nAaron van Wirdum: 00:18:43\n\nSo what's this change now?\n\nSjors Provost: 00:18:44\n\nWhat this change is, is not about how the consensus works, but it's how transactions are relayed between nodes.\nSo, when a node talks to another node, it says, hey, here's a bunch of transaction IDs, would you like the whole transaction for this thing?\nAnd that's still referring to this pre-segwit transaction hash, also the on-chain transaction hash.\nBut this new change lets you gossip these transactions using the witness transaction ID, which does include the signature, I believe.\nNow I don't know why that's useful, to be honest, but because I haven't read up on what exactly the BIP is saying.\nI'm just saying that you can now gossip transactions based on, including the witness, which I guess could have some benefit.\n\nAaron van Wirdum: 00:19:27\n\nDo you think this has something to do with potentially sharing a transaction with an invalid signature and therefore...\n\nSjors Provost: 00:19:41\n\nThat's my theory, because I should have read it, but my guess is that indeed you would send another node a transaction hash and they would ask for the transaction and you would give it a fake transaction because you would just add your own signature to it and it would just be nonsense.\nAnd then the other node would say, okay, this transaction is dumb.\nI'm just going to ignore that moving forward.\nAnd then another node would give the real one, but this node is now rejecting it because it's already seen it and it thought it was fake.\nSo you want to prevent that.\n\nAaron van Wirdum: 00:20:02\n\nRight and that's what this new change might solve is your speculation but neither of us is actually sure because we didn't read the BIP.\n\nSjors Provost: 00:20:10\n\nThat's right.\nRead the BIP fellows.\n\nAaron van Wirdum: 00:20:15\n\nAnd it's BIP which one is it?\n339.\n\nSjors Provost: 00:20:17\n\nYes, I also know this was done before taproot because it has some sort of utility there too.\n\n## RPC Changes\n\nAaron van Wirdum: 00:20:25\n\nNext item is taproot which we've already covered.\nSo then the next item is a bunch of RPC changes.\n\nSjors Provost: 00:20:32\n\nThat's right.\nIf you look at the release notes, a lot of changes are about the RPC.\nAnd we're not gonna mention them because they're not that interesting.\n\nAaron van Wirdum: 00:20:39\n\nRPC stands for Remote Procedure Call?\n\nSjors Provost: 00:20:42\n\nYes.\n\nAaron van Wirdum: 00:20:42\n\nWhat does that mean actually, Sjors?\n\nSjors Provost: 00:20:44\n\nIt basically means if you're running a Bitcoin node, then you can issue commands to it.\nAnd if you're a desktop user, you would just click on buttons.\nBut if you're in the command line, well, you would type Bitcoin client, then some command.\n\nSjors Provost: 00:20:56\n\nBut if you are on the network, you probably want to send some JSON to it and get some JSON back from it over the network.\nAnd that's what these RPC calls are for.\nSo you can send the commands over the network and get a response back.\nAnd if you've built some sort of complicated server, you want to make sure nothing breaks.\nAnd BitConcord is always very careful.\nIt tries not to make breaking changes in that RPC.\nSo, for example, a situation you might be in is you run a block explorer of some sort, and you have one little server machine that has a Bitcoin full node on it and we'll get to that actually with the CMQ explanation but I guess we'll transition to that.So you'll have one node that runs Bitcoin core on it and another that runs a database and another that runs the website because usually you know they try to split all these things up so the web server might ask the node questions like what is the current block height or you know what's in your mempool that that's done via RPC That might or it might say send a transaction to this person that's also done via RPC.\nSo that's all scripts and code so you want to make sure that your code is still doing what you think it's doing when you upgrade the node.\nBut which brings us to the next point ZeroMQ feature improvement.\nSo you can read in, if you find this interesting, you can read in the release note exactly what.\n\nAaron van Wirdum: 00:22:22\n\nIs that one of the RPC changes?\n\nSjors Provost: 00:22:25\n\nWell ZeroMQ is not actually RPC, but it's also a way to communicate.\n\nSjors Provost: 00:22:32\n\nSo with RPC you have the Bitcoin node is listening and you send a command to it and you get a response back.\nThat's how RPC works.\nBut in ZeroMQ it's push-based.\nSo what you're doing is the Bitcoin Node is constantly broadcasting and you can listen to that broadcast through a channel and so the broadcast could be every new block.\nSo then you're listening to a certain channel and you get the block as soon as the node sees it.\nOr you can listen to transactions or I believe you can even listen to transactions at a certain address.\nThis might be useful if you have a block explorer with a live page where you're looking at an address and then the notes sees a new transaction on that address, it sends a message to your ZMQ to the web server and the web server sends a WebSocket message to the browser so your browser updates without having to hit the refresh button, something like that.\n\n## Send RPC\n\nSjors Provost: 00:23:28\n\nThere is a new Send RPC by yours truly, which is cool.\nIt basically, if you want to send coins through the command line, I mean, you can do it with the graphical interface, but if you're, you know, the cool kids want to do it with the command line, it's very tedious.\nYou know, when the first version of Bitcoin Core came out, but it wasn't even Bitcoin Core.\nI think you just had a command called send to address and you gave it an address and an amount and that was it.\nAnd that's still out there.\nBut the problem is that command got expanded, but it doesn't have all the features you may want.\nAnd at the same time, there were commands to create PSBTs that we talked about in an earlier episode.\nThose commands were very powerful.\nYou could do all sorts of cool things to your transaction, including coin selection, for example, through the command line.\nBut it was very tedious because if you want to make a PSBT then you have to make it and then sign it and then finalize it and do a bunch of things.\nSo the problem was you had a very simple way to send coins with the very old Satoshi time RPC methods, just send to an address but you couldn't configure it.\nOr you had a super powerful method that was extremely hard to use.\nAnd so the new `send` RPC is easier to use and powerful.\n\nAaron van Wirdum: 00:24:41\n\nAnd you made this?\n\nSjors Provost: 00:24:42\n\nYes, and it's been improved since.\nIt's especially useful if you're experimenting with newer features, like hardware wallet integration and stuff.\nThen you want to experiment on the command line and then hopefully later do it in the GUI.\n\nAaron van Wirdum: 00:25:01\n\nHow is that going to take a side path?\nWhat's going on with hardware integration, hardware wallet integration?\n\nSjors Provost: 00:25:07\n\nIt's very slow.\nSo I think I gave a presentation in 2019 or something.\n\nAaron van Wirdum: 00:25:14\n\nIn London?\n\nSjors Provost: 00:25:15\n\nYeah and Andrew Chow was on it as well.\nAnd I mean the final picture we thought would be here now, or at least I was hoping for, but it's not.\nBut a lot of things have been done.\nSo part of the hardware wallet project was to get PSBT support.\nThat's pretty much done.\nPart of it was descriptor wallets, which we'll get to next.\nSo that's been done and the thing I've been working on as a work in progress is a expansion of this send command in RPC that will let you talk to a hardware wallet directly from the command line and The second one is a graphical interface around that.\nAnd those pull requests exist, they get a little bit of review, but they're not moving forward very quickly.\nEventually it might happen.\n\nAaron van Wirdum: 00:25:56\n\nBut it's still moving.\n\nSjors Provost: 00:25:58\n\nIt's still moving, and also there are great other solutions out there.\nSo there's the Spectre open source project which just runs a little web server on your own computer and then it magically talks to the RPC again with these RPC calls that we talked about and it creates wallets and it's very very nice very slick we wouldn't be able to get it that slick.\nBut if you can get more support inside of Bitcoin Core, it means fewer software that you need to download from places that you then need to trust.\n\n## Experimental Descriptor Wallets and SQLight Support\n\nSjors Provost: 00:26:28\n\nThe next point is called experimental descriptor wallets and SQLite support.\nSo two things.\nSo descriptor wallets, I don't think we've talked about that yet.\nSo the general idea is that when Bitcoin Core started, it was just a single address type, pay to public key.\nI think we did discuss that.\nAnd then there was a new address format, pay to public key hash.\nAnd so that was added to the wallet.\nAnd then SegWit came along and pay to script hash came along.\nAnd now there's the wallet is just a giant mess of backwards compatible things.\n\n## The Descriptor Wallet\n\nSjors Provost: 00:27:02\n\nCode that nobody understands.\nAnd well, Andrew Chow has been at work at cleaning that up.\nAnd one of the things that was added was the idea of the descriptor wallet.\nThe descriptor is something invented by Sipa.\nAnd the idea there is that you describe what is in the wallet.\nSo you literally just write out, you start with this master key, and then you take the first derivation, you know, within BIP 42, and you take the second derivation or whatever, and then it's slash star, and then if you write down just those descriptors you can recover your addresses.\n\nAaron van Wirdum: 00:27:33\n\nYeah so this could be for example you have a bunch of multi-sig addresses and these are described as multi-sig addresses and then your hardware wallet addresses and then your playing addresses or whatever and these are sort of categorized you can easily categorize your different UTXOs your different coins.\n\nSjors Provost: 00:27:53\n\nYeah so for a hardware wallet is a nice example usually a hardware wallet will give you an xpub you know if you plug it in it can spit out an xpub and xpub is a way to derive multiple addresses.\nAnd so a multi-sig address.\n\nAaron van Wirdum: 00:28:05\n\nWe did discuss that in, I think, one of the first episodes.\nI don't have the number in front of me.\n\nSjors Provost: 00:28:12\n\nYeah, could be.\nAnd basically, You can say, okay, here's a multi-sig address consisting of these three XPUBS and then what you need to do to these XPUBS to get the individual addresses.\nSo you can describe very complicated wallets.\nAnd if we add mini-script support in the future, you can describe even more wildly complicated wallets that way.\n\nAaron van Wirdum: 00:28:32\n\nRight.\nSo what's up with SQLite?\n\nSjors Provost: 00:28:34\n\nSQLite is a new database format so the wallet itself is just a bunch of records essentially and right now it's sitting in Berkeley DB version 4 which is a 10 year old unmaintained piece of software which you know it's 10 years old and unmaintained so that's a problem and SQLite is a bit more modern it's still being maintained and it's very short so the total code for SQLite is not that large to review, and it is designed to be backwards and forwards compatible in sane ways.\nSo if a new version of SQLite comes out, you have pretty strong guarantees that it's still going to work.\nAnd that If you save something in the new wallet, it's also going to work in an old version.\n\nAaron van Wirdum: 00:29:19\n\nYeah, I was just going to ask that.\nSo if you upgrade to Bitcoin Core 21, you're...\n\nSjors Provost: 00:29:27\n\nNothing happens.\n\nAaron van Wirdum: 00:29:28\n\nNothing interesting happens.\nNothing worrisome happens.\n\nSjors Provost: 00:29:31\n\nNo, if you already have a wallet it is not converted to descriptor wallets, it is not converted to SQLite, nothing happens.There are manual commands that if you like to you can do that, but we still consider both of these things somewhat experimental, So you probably don't want to do that.\nBut the goal in the future is that new wallets will be descriptor wallets and will be stored using the SQLite database.\nAnd then, you know, more far into the future, there'll be an automatic migration tool or like at least some button that says, you know, you probably want to migrate this.\nRight.\nThen even further into the future when you start it up, it'll say, okay, I'm not going to start up, please migrate the wallet first using this tool or something.\nAnd then later on it's like, please download an older version.\nNow, I guess there'll always be a conversion tool because you want to be nice.\n\nAaron van Wirdum: 00:30:21\n\nI like my backwards compatibility, Sjors.\nPlease keep that for me.\n\nSjors Provost: 00:30:25\n\nYeah, I guess it depends on how horrendous it is to keep all that old code around.\nBut I guess one thing we might end up doing is write just the code that's necessary to read one of those old Berkeley databases, no longer to be able to write it.\nSo you wouldn't need the whole library, you know we talked about libraries, we would just need enough to be able to read it.\nBut that's you know years and years probably.\n\nAaron van Wirdum: 00:30:48\n\nI think we've made it to our last point.\nIt's a small one.\n\nSjors Provost: 00:30:52\n\nYeah, at the RPC level, you can now specify your fee in Satoshi per byte.\n\nSjors Provost: 00:30:58\n\nYeah, so it used to be Satoshi per kilobyte or BTC per kilobyte, some weird unit.\n\nAaron van Wirdum: 00:31:03\n\nSomething no one else used.\n\nSjors Provost: 00:31:05\n\nYeah, exactly, because now all the websites will use Satoshi per byte\n\nSjors Provost: 00:31:10\n\nYeah, the annoying thing about the standard that it was using before is if you type one because you intended one satoshi per byte, you're actually saying, I don't know, a thousand satoshi per byte, or some really obscene number that would be very expensive if you don't know what you're doing.\nThere is actually protection against that since a few years.\n\nAaron van Wirdum: 00:31:29\n\nSo that's changed to make it more consistent with the rest of the Bitcoin ecosystem.\n\nSjors Provost: 00:31:33\n\nYeah, and that's not yet in the graphical interface, but that's typically the next step.\n\nAaron van Wirdum: 00:31:38\n\nRight.\nSo yeah, I noticed there were like 140 contributors to this release, something like that?\n\nSjors Provost: 00:31:43\n\nQuite possible.\n\nAaron van Wirdum: 00:31:45\n\nMaybe 130, 140, something around that number.\n\nSjors Provost: 00:31:48\n\nBecause we talked about the highlights, but if you look at the actual release notes and then at the bottom, there are so many super small changes that could be an individual contributor that just comes by.\n\nAaron van Wirdum: 00:31:59\n\nYeah, I just wanted to mention thank you to all these 130 or 40 or whatever it was contributors.\nThanks to everyone.\nThanks to you as well, Sjors.\n\nSjors Provost: 00:32:08\n\nThank you.\n\nAaron van Wirdum: 00:32:09\n\nYou're one of them.\nWhat else?\nHow do people upgrade?\nWhat do people do?\n\nSjors Provost: 00:32:12\n\nGo to bitcoincore.org and download it and then do all the checks to make sure that you've got the real thing.\n\nAaron van Wirdum: 00:32:19\n\nYeah, like the signature verification stuff and these kinds of, well, I guess that's the main thing.\n\nSjors Provost: 00:32:25\n\nYes, yeah, I think that's it.\n\nAaron van Wirdum: 00:32:27\n\nYeah, and nothing else, right?\nSo Like we mentioned, this Berkeley DB to SQLite, that's unnecessary, you don't need to re-download blocks or anything like that.\n\nSjors Provost: 00:32:36\n\nAs a user, you just download the new version and life continues.\n\nAaron van Wirdum: 00:32:41\n\nNice, I like that.\nI like life to continue.\n\nSjors Provost: 00:32:45\n\nAlright, and thank you for listening to The Van Wirdum Sjorsnado.\n\nAaron van Wirdum: 00:32:48\n\nThere you go.\n\n",
    "body_type": "markdown",
    "created_at": "2021-01-21T00:00:00.000Z",
    "domain": "https://btctranscripts.com/",
    "url": "https://btctranscripts.com/bitcoin-explained/bitcoin-core-v0-21",
    "categories": [
        "podcast"
    ],
    "tags": [
        "bitcoin-core",
        "anonymity-networks",
        "eclipse-attacks",
        "compact-block-filters",
        "signet\"",
        "descriptors"
    ],
    "media": "https://www.youtube.com/watch?v=kM4912dv39o",
    "authors": [
        "Sjors Provoost",
        "Aaron van Wirdum"
    ],
    "indexed_at": "2024-03-21T16:33:36.085Z",
    "transcript_by": "Bitc0indad via review.btctranscripts.com",
    "summary": "In the latest episode of \"The Van Wirdum Sjorsnado,\" hosts Aaron van Wirdum and Sjors Provoost delve into the significant developments brought by Bitcoin Core 0.21, underscoring its contributions to the security, privacy, and usability of the Bitcoin network. A prime focus of their discussion is the notable improvements made to the mempool\u2014the mechanism through which transactions are broadcasted and managed across the network. This update marks a pivotal shift towards enhancing user privacy by altering the transaction rebroadcast mechanism to occur less frequently, thereby making it more challenging to link transactions to specific nodes.\n\nAnother critical advancement addressed in the podcast is the integration of support for Tor version 3 addresses within Bitcoin Core 0.21. This update ensures that users can continue utilizing the Tor network for increased privacy, keeping pace with the evolving Tor infrastructure and securing Bitcoin's position at the forefront of privacy technology. The hosts also explore the introduction of anchor connections, a feature designed to protect against eclipse attacks by preserving connections to trusted peers, thus significantly mitigating the risk associated with such network manipulations.\n\nThe conversation further highlights the implementation of BIP-157, known as Neutrino filters, which heralds a major leap forward for lite wallets, especially those on mobile devices. By enabling wallets to verify transaction relevancy without downloading the entire blockchain, this feature strikes a delicate balance between efficiency and security, albeit introducing new considerations regarding privacy and trust.\n\nShifting focus, Provoost and van Wirdum discuss the introduction of Signet and its role as a stable and predictable environment for developers testing Bitcoin applications, addressing the challenges posed by the unpredictability of traditional testnets. The activation of taproot on Signet is particularly emphasized for providing developers with a sandbox environment to refine new features, ensuring their robustness before mainstream deployment.\n\nMoreover, the dialogue touches upon technical enhancements like BIP339, which introduces a change in transaction relaying through the incorporation of witness transaction IDs (WTXID), addressing transaction malleability concerns post-SegWit. This adjustment has far-reaching implications for applications reliant on transaction predictability, such as the Lightning Network, enhancing overall transaction integrity within the Bitcoin network.\n\nProvoost and van Wirdum also delve into the development and deployment of a new `send` RPC, aimed at simplifying transaction execution via the command line, alongside discussing the experimental introduction of descriptor wallets and SQLite support. These advancements promise to streamline wallet management and enhance database compatibility, laying the groundwork for future improvements in Bitcoin Core's infrastructure.\n\nLastly, the conversation sheds light on the collaborative essence of Bitcoin's development process, highlighting the diverse contributions from the community that drive the platform's continual evolution. Practical advice for users looking to upgrade to the latest version of Bitcoin Core is shared, emphasizing the importance of signature verification checks to safeguard against potential security threats.\n\nThrough meticulous analysis and discussion, Aaron van Wirdum and Sjors Provoost provide an insightful overview of the continuous efforts within the Bitcoin community to refine and enhance the network's functionality, security, and user experience. The episode not only underscores the technical achievements of Bitcoin Core 0.21 but also celebrates the vibrant community committed to the cryptocurrency's advancement."
}