<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - Lightning transactions with v3 and ephemeral anchors</title>
  <updated>2024-01-19T02:23:42.960547+00:00</updated>
  <author>
    <name>ajtowns 2024-01-19 00:59:40.333000+00:00</name>
  </author>
  <author>
    <name>morehouse 2024-01-18 18:06:19.613000+00:00</name>
  </author>
  <author>
    <name>instagibbs 2024-01-18 17:24:12.326000+00:00</name>
  </author>
  <author>
    <name>t-bast 2024-01-18 15:06:13.751000+00:00</name>
  </author>
  <author>
    <name>t-bast 2024-01-18 14:31:34.683000+00:00</name>
  </author>
  <author>
    <name>instagibbs 2024-01-18 13:39:01.232000+00:00</name>
  </author>
  <author>
    <name>ajtowns 2024-01-18 05:12:05.491000+00:00</name>
  </author>
  <author>
    <name>ajtowns 2024-01-18 05:02:14.398000+00:00</name>
  </author>
  <author>
    <name>instagibbs  . 2024-01-17 23:13:02.376000+00:00</name>
  </author>
  <author>
    <name>morehouse  . 2024-01-17 22:45:18.634000+00:00</name>
  </author>
  <author>
    <name>murch  . 2024-01-17 14:34:16.713000+00:00</name>
  </author>
  <author>
    <name>tbast  . 2024-01-17 14:11:04.951000+00:00</name>
  </author>
  <author>
    <name>glozow  . 2024-01-17 13:54:52.395000+00:00</name>
  </author>
  <author>
    <name>tbast  . 2024-01-17 13:33:00.486000+00:00</name>
  </author>
  <author>
    <name>instagibbs  . 2024-01-17 12:44:11.103000+00:00</name>
  </author>
  <author>
    <name>glozow  . 2024-01-17 11:23:16.215000+00:00</name>
  </author>
  <author>
    <name>glozow  . 2024-01-17 11:20:38.886000+00:00</name>
  </author>
  <author>
    <name>tbast  . 2024-01-17 09:58:32.274000+00:00</name>
  </author>
  <author>
    <name>MattCorallo  . 2024-01-16 22:55:57.312000+00:00</name>
  </author>
  <author>
    <name>instagibbs  . 2024-01-16 18:06:54.151000+00:00</name>
  </author>
  <author>
    <name>tbast  . 2024-01-16 17:28:44.919000+00:00</name>
  </author>
  <link href="delvingbitcoin/Jan_2024/1214_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1209_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1186_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1187_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1185_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1184_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1180_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1179_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1175_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1174_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1163_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1161_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1160_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1159_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1158_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1156_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1155_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1154_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1149_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1147_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1145_Lightning-transactions-with-v3-and-ephemeral-anchors.xml" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>2</id>
    <title>Combined summary - Lightning transactions with v3 and ephemeral anchors</title>
    <updated>2024-01-19T02:23:42.960687+00:00</updated>
    <link href="https://delvingbitcoin.org/t/lightning-transactions-with-v3-and-ephemeral-anchors/418/21" rel="alternate"/>
    <summary>The email discussion addresses the security challenges and proposed solutions within the Lightning Network (LN), particularly regarding pinning attacks and the implementation of version 3 (v3) transactions. Key concerns include Bob's ability to delay Alice's access to funds through HTLCs, with minimal cost implications for himself. The shift to v3 transaction format aims to prevent man-in-the-middle pinning attacks but may require additional measures, like a second `SIGHASH_ALL` signature, due to potential insufficiencies in v3 alone.

To further mitigate risks, the use of pre-signed v3 transactions for both HTLC-Success and HTLC-Timeout paths is recommended. Additionally, relative delays could be introduced to SINGLE/ACP usage to avoid conflicts with HTLC output spends. It's acknowledged that the ability to pay on-chain fees directly from channel balances is an important advantage of the v3 change.

Technical discussions explore options for handling conflicting peer transactions, with suggestions ranging from implementing a simple preimage gossip mechanism to developing Bitcoin Core features for preimage extraction. A less complex alternative to intricate signature exchanges involves a new message type for transmitting HTLC signatures before the commitment signature, aiming to directly address pinning problems.

A Mermaid diagram is shared to illustrate the interactions between FundingTx, CommitmentTxB, and HTLCClaimB transactions under the proposed changes, including the use of an ephemeral anchor output in `CommitmentTxB`.

Regarding coin selection improvements, CoinGrinder is noted as a promising tool for optimizing the process, with a `max_weight` parameter crucial for keeping transactions within weight limits. The completion status of these algorithms nears 90%, though further review is necessary for full confidence in integration.

Proposals affecting eclair's treatment of anchor outputs and batching limitations are discussed, emphasizing the need for consensus across implementations. Misconceptions about the CPFP carve-out policy are clarified, ensuring a smooth transition for users to the new extended coverage.

Challenges related to script introspection and simplification are acknowledged, with efforts focused on streamlining approaches for dealing with segwitv0 and tapscript. The debate over using implicit signaling versus pattern matching at spend time for applying v3 rules highlights ongoing considerations in LN transaction identification.

The programming community is engaged in refining Bitcoin Core wallet functionality, particularly in managing UTXO pools and transaction sizes. The removal of one-block relative delays from LN scripts and the two-step deployment strategy for supporting v3 transactions are outlined. This includes updates to mempool/relay systems and LN implementations, transitioning away from CPFP carveouts to embrace V3 and RBF mechanics.

Optimizations proposed for lightning transactions involve structural adjustments to commitment transactions, incorporating ephemeral anchors to simplify output arrangements and disassociate on-chain fees from off-chain funds. The design changes aim to streamline outputs and eliminate unnecessary delays while maintaining zero-fee HTLC transactions' effectiveness. Feedback from wallet projects on transaction sizes and security is sought to inform the balancing act required within the v3 framework.</summary>
    <published>2024-01-19T00:59:40.333000+00:00</published>
  </entry>
</feed>
