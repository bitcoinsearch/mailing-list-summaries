<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - 64 bit arithmetic soft fork</title>
  <updated>2024-02-04T02:03:00.259387+00:00</updated>
  <author>
    <name>dgpv 2024-02-03 16:04:35.678000+00:00</name>
  </author>
  <author>
    <name>ajtowns 2024-02-03 12:02:57.768000+00:00</name>
  </author>
  <author>
    <name>EthanHeilman  . 2024-02-02 18:46:32.187000+00:00</name>
  </author>
  <author>
    <name>dgpv  . 2024-02-02 16:50:27.200000+00:00</name>
  </author>
  <author>
    <name>dgpv  . 2024-02-02 05:25:46.309000+00:00</name>
  </author>
  <author>
    <name>EthanHeilman  . 2024-02-01 22:23:40.258000+00:00</name>
  </author>
  <author>
    <name>halseth  . 2024-01-23 20:36:15.253000+00:00</name>
  </author>
  <author>
    <name>Chris_Stewart_  . 2024-01-23 16:23:25.319000+00:00</name>
  </author>
  <author>
    <name>dgpv  . 2024-01-20 14:36:06.211000+00:00</name>
  </author>
  <author>
    <name>Chris_Stewart_  . 2024-01-20 13:16:16.585000+00:00</name>
  </author>
  <author>
    <name>Chris_Stewart_  . 2024-01-20 12:57:31.799000+00:00</name>
  </author>
  <author>
    <name>dgpv  . 2024-01-20 05:01:16.940000+00:00</name>
  </author>
  <author>
    <name>Chris_Stewart_  . 2024-01-19 21:27:03.245000+00:00</name>
  </author>
  <author>
    <name>Davidson  . 2024-01-17 22:31:06.270000+00:00</name>
  </author>
  <author>
    <name>jamesob  . 2024-01-16 17:43:34.637000+00:00</name>
  </author>
  <author>
    <name>ajtowns  . 2024-01-15 04:22:58.226000+00:00</name>
  </author>
  <author>
    <name>dgpv  . 2024-01-13 15:12:01.617000+00:00</name>
  </author>
  <author>
    <name>Chris_Stewart_  . 2024-01-13 15:03:10.677000+00:00</name>
  </author>
  <author>
    <name>dgpv  . 2024-01-13 15:00:18.287000+00:00</name>
  </author>
  <author>
    <name>Chris_Stewart_  . 2024-01-13 14:59:37.726000+00:00</name>
  </author>
  <author>
    <name>Chris_Stewart_  . 2024-01-13 14:53:41.807000+00:00</name>
  </author>
  <author>
    <name>dgpv  . 2024-01-13 14:26:46.385000+00:00</name>
  </author>
  <author>
    <name>rustyrussell  . 2024-01-12 16:22:29.735000+00:00</name>
  </author>
  <author>
    <name>halseth  . 2024-01-12 13:20:15.414000+00:00</name>
  </author>
  <author>
    <name>ProofOfKeags  . 2024-01-11 21:01:22.448000+00:00</name>
  </author>
  <author>
    <name>moonsettler  . 2024-01-11 20:57:27.933000+00:00</name>
  </author>
  <author>
    <name>sipa  . 2024-01-11 20:40:26.242000+00:00</name>
  </author>
  <author>
    <name>ProofOfKeags  . 2024-01-11 17:55:35.883000+00:00</name>
  </author>
  <author>
    <name>ajtowns  . 2024-01-11 17:42:51.731000+00:00</name>
  </author>
  <author>
    <name>ajtowns  . 2024-01-11 17:39:55.430000+00:00</name>
  </author>
  <author>
    <name>Chris_Stewart_  . 2024-01-11 17:19:48.085000+00:00</name>
  </author>
  <author>
    <name>Chris_Stewart_  . 2024-01-11 17:19:08.767000+00:00</name>
  </author>
  <author>
    <name>ProofOfKeags  . 2024-01-11 16:46:12.669000+00:00</name>
  </author>
  <author>
    <name>sipa  . 2024-01-11 15:23:39.480000+00:00</name>
  </author>
  <author>
    <name>Chris_Stewart_  . 2024-01-11 15:08:42.326000+00:00</name>
  </author>
  <author>
    <name>sipa  . 2024-01-11 14:54:55.887000+00:00</name>
  </author>
  <author>
    <name>Chris_Stewart_  . 2024-01-11 14:24:52.280000+00:00</name>
  </author>
  <author>
    <name>sipa  . 2024-01-11 14:11:33.795000+00:00</name>
  </author>
  <author>
    <name>halseth  . 2024-01-11 14:07:42.305000+00:00</name>
  </author>
  <author>
    <name>moonsettler  . 2024-01-10 23:10:38.930000+00:00</name>
  </author>
  <author>
    <name>Chris_Stewart_  . 2024-01-10 16:11:01.778000+00:00</name>
  </author>
  <link href="delvingbitcoin/Feb_2024/1454_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Feb_2024/1452_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Feb_2024/1449_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Feb_2024/1448_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Feb_2024/1423_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Feb_2024/1410_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1318_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1313_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1247_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1245_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1243_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1241_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1228_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1173_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1146_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1112_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1101_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1105_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1104_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1103_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1102_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1099_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1093_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1088_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1086_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1085_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1084_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1083_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1082_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1081_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1078_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1080_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1079_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1076_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1075_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1074_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1073_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1072_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1071_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1061_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <link href="delvingbitcoin/Jan_2024/1057_64-bit-arithmetic-soft-fork.xml" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>2</id>
    <title>Combined summary - 64 bit arithmetic soft fork</title>
    <updated>2024-02-04T02:03:00.259657+00:00</updated>
    <link href="https://delvingbitcoin.org/t/64-bit-arithmetic-soft-fork/397/41" rel="alternate"/>
    <summary>Bitcoin Script is being evaluated for its handling of arithmetic operations, particularly concerning the serialization format for variable-length integers to prevent malleability issues. There's a focus on using minimal data and unique serialization to represent numbers consistently. The computational cost of large number processing and strategies for managing overflows are discussed, considering various bit-lengths and the choice between unsigned or signed numbers.

A proposal introduces dedicated opcodes (`FIXNUM`, `TOFIXNUM`, `FROMFIXNUM`, `BYTEREV`) to manage calculations beyond 64 bits and handle conversions and endian formats. Another change suggests pushing both result and overflow onto the stack for operations exceeding 64 bits, although this raises complexity in non-overflow checks.

The Bitcoin Improvement Proposal (BIP) refinement addresses arithmetic on numbers larger than 64 bits, aiming to segment larger numbers into 64-bit chunks. Memory consumption versus disk space is highlighted, noting the expansion of literals from one byte on disk to eight bytes in memory. Rusty Russell's [article](https://rusty.ozlabs.org/2023/12/30/arithmetic-opcodes.html) is recommended for further insights into these issues.

An analysis estimates a 1GB increase in blockchain size due to transitioning to 8-byte encodings for ScriptNums. Detailed transaction examples and resources for review are available at [this GitHub repository](https://github.com/Christewart/bitcoin-s-core/tree/2024-01-19-count-scriptnums).

Rusty Russell proposes simplifying arithmetic opcodes by only dealing with non-negative numbers and removing normalization from shift operations. It recommends compilers' support for `__uint128_t` for compatibility and advocates for a generic opcode for adjusting byte sizes. A recent proposal allows programmers to optionally use an 8-byte input requirement in their Scripts to utilize new features introduced by a potential soft fork without rewriting legacy scripts.

The programming community discusses possibly removing the `SCRIPT_VERIFY_MINIMAL_DATA` policy in future script iterations and balancing software progression with historical script compatibility. BIP62 focuses on transaction malleability rather than optimizing disk space, with standardizing number encodings across the protocol being considered. The reintroduction of 256-bit arithmetic post-Taproot, the practicality of fixed-length 64-bit number encodings, and strategies for overflow checks are also debated.

The technical discussion includes aligning covenant script computations with LE64 or LE32 encoding formats used in transactions to simplify reliability. New opcodes for unsigned numbers and increased precision are called for, building upon `CScriptNum's` current effectiveness. A commit supporting 64-bit arithmetic can be found at [GitHub](https://github.com/halseth/bitcoin/pull/1/commits/13c1848edf66410517b3cb6d47d80874438abb1f). 

Proposed semantics for math operations suggest pushing two values onto the stack, contrasting with current Bitcoin operations. The introduction of `OP_MUL` and debates about input encoding are discussed, along with the complexity of a new `OP_ENABLE64BIT` opcode. The need for precise matching of script interpreters to avoid consensus splits is emphasized.

There's openness toward expanding arithmetic support to 64-bit, with concerns about script reliability and bugs affecting consensus. Compatibility with existing version 1 tapscripts is addressed by proposing an `OP_ENABLE64BIT` opcode to signal capacity for 8-byte inputs. A new taproot leaf version is suggested as an alternative. BIP324's footnote provides insights into the system's efficiencies ([here](https://github.com/bitcoin/bips/blob/deae64bfd31f6938253c05392aa355bf6d7e7605/bip-0342.mediawikicite_note-1)). Covenant opcodes that benefit from satoshi value arithmetic operations are also discussed for improving smart contract functionality.

Finally, the importance of 64-bit arithmetic for enabling TLUV and other protocols is underlined, with developers expressing interest in incorporating it into their systems. A BIP has been proposed at [BIP proposal link](https://github.com/Christewart/bips/pull/1), with corresponding implementation at [implementation link](https://github.com/Christewart/bitcoin/pull/2), seeking early feedback before engaging the wider mailing list.</summary>
    <published>2024-02-03T16:04:35.678000+00:00</published>
  </entry>
</feed>
