<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - Encrypted Wallet Backward Compatibility</title>
  <updated>2023-05-18T21:38:27.169349+00:00</updated>
  <author>
    <name>Matt Corallo 2011-07-04 17:52:53</name>
  </author>
  <author>
    <name>Matt Corallo 2011-07-05 01:10:39</name>
  </author>
  <author>
    <name>Gregory Maxwell 2011-07-04 22:30:12</name>
  </author>
  <author>
    <name>Gregory Maxwell 2011-07-04 20:59:07</name>
  </author>
  <author>
    <name>Pieter Wuille 2011-07-10 19:10:07</name>
  </author>
  <author>
    <name>Matt Corallo 2011-07-05 11:03:15</name>
  </author>
  <author>
    <name>Matt Corallo 2011-07-04 20:39:32</name>
  </author>
  <author>
    <name>Matt Corallo 2011-07-10 14:21:17</name>
  </author>
  <link href="bitcoin-dev/July_2011/000129_Encrypted-Wallet-Backward-Compatibility.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2011/000135_Encrypted-Wallet-Backward-Compatibility.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2011/000134_Encrypted-Wallet-Backward-Compatibility.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2011/000132_Encrypted-Wallet-Backward-Compatibility.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2011/000163_Encrypted-Wallet-Backward-Compatibility.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2011/000138_Encrypted-Wallet-Backward-Compatibility.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2011/000131_Encrypted-Wallet-Backward-Compatibility.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2011/000161_Encrypted-Wallet-Backward-Compatibility.xml" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>2</id>
    <title>Combined summary - Encrypted Wallet Backward Compatibility</title>
    <updated>2023-05-18T21:38:27.170348+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2011-July/000129.html" rel="alternate"/>
    <summary>There are backward-compatibility issues with Bitcoin Wallet encryption. In version 0.3.23, Bitcoin fails to function after writing one unencrypted private key to the otherwise encrypted wallet. In version 0.3.22 and prior versions, Bitcoin opens fine but displays transactions only for unencrypted keys (of which it writes a minimum of one before opening), and each transaction shows only confirmation count, date, no description, and a debit/credit of 0.00.When attempting to perform any action that reads keypool, you get the "ReserveKeyFromKeyPool() : unknown key in key pool" error. Suggestions include renaming wallet.dat for encrypted wallets or doing nothing and letting old clients get mad. To prevent this issue in the future, Bitcoin really shouldn't continue on as if nothing had happened when faced with unknown keys.There is a need to agree on either https://github.com/bitcoin/bitcoin/pull/378 or https://github.com/bitcoin/bitcoin/pull/381. The former is simpler and means that you don't have to keep track of what features you have or have not used in a wallet, but instead just write and let the keys take care of themselves. However, there is a preference for 378 as it is simpler and easier to use.The email conversation revolves around the issue of intentionally breaking unsafe/badly designed backup mechanisms as import/export is planned to get merged at about the same time. The idea is to truncate wallet.dat and set its file-permissions to 000, so if old versions of bitcoin OR any dumb wallet backup scripts try to read it they fail.However, renaming wallet.dat could lead to unforeseeable errors for odd scripts. Future-proofing is suggested by adding a nMinVersion that specifies "you must be at least THIS version to read this file." Meanwhile, Matt Corallo digs deeper and finds a data structure in wallet settings that should cause all versions to crash on load instead of making a new wallet or opening in some bizarre half-state. This resolves all known issues and suggestions that he knows of on newenc except for the invalid mlock calculations which he intends to fix.</summary>
    <published>2011-07-04T17:52:53+00:00</published>
  </entry>
</feed>
