<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - overall bitcoin client code quality</title>
  <updated>2023-05-18T23:15:51.659274+00:00</updated>
  <author>
    <name>Gregory Maxwell 2011-07-12 23:40:46</name>
  </author>
  <author>
    <name>Matt Corallo 2011-07-10 23:36:53</name>
  </author>
  <author>
    <name>Matt Corallo 2011-07-13 00:17:59</name>
  </author>
  <link href="bitcoin-dev/July_2011/000179_overall-bitcoin-client-code-quality.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2011/000170_overall-bitcoin-client-code-quality.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2011/000180_overall-bitcoin-client-code-quality.xml" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>2</id>
    <title>Combined summary - overall bitcoin client code quality</title>
    <updated>2023-05-18T23:15:51.659274+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2011-July/000179.html" rel="alternate"/>
    <summary>In a discussion about code quality and cleanup for Bitcoin, Michael Offel suggests that each class should be able to stand on its own so it can be reused in other projects or situations in the same project. However, another contributor points out that talk is cheap and that coding is what matters. They suggest that new, clean, secondary implementations of the blockchain validation logic are needed, as well as good automatic testing shims which can find inconsistencies between implementations.Offel then highlights three areas where he believes Bitcoin's code quality could be improved: documentation, isolation of modules, and poor use of threads. He argues that the current coding style does not help much with understanding the code and that clear splitting of the code is needed. He also suggests that Bitcoin makes use of global variables, public member variables in classes and global external functions, making it harder to understand the code. Furthermore, he notes that Bitcoin starts a new thread for every little module it has, and as soon as there is some serious work to do, it locks some kind of global mutex, which introduces a high difficulty in writing bug-free code. The contributor agrees that these are issues that need to be addressed in order to improve Bitcoin's code quality. A developer has suggested that the Bitcoin client needs to be cleaned up to improve code clarity and performance. The suggestion is to remove all threads and critical sections to build a sequential easy-to-follow model, except for some modules like the CPU miner which may still require thread spawning. Boost is also seen as an unnecessary barrier for new developers due to its heavyweight non-standard dependency.The style guide is criticized for not including anything about readability, advocating instead for one file per class and no methods with a single code line longer than a screen page. Hardcoded values for the official and testnet block chain are another issue, and while there is an argument for moving all chain related settings to a description file to allow custom chains and clean up the code, it may encourage improperly-implemented alternate chains.The developer suggests that a complete rewrite is too large for one person and that the current code quality is very prone to bugs, but a total rewrite is not necessary. Instead, the code should be thrown into clearly-defined methods and classes to make it more readable and less prone to mistakes. Although the code is messy in terms of global usage and poorly-implemented RPC/net/etc, most of the code is fine. The Bitcoin code base is not messy, but its lack of clear lines between classes makes it seem that way. It does some things inefficiently; however, its general algorithms are quite good. Db4 is an excellent choice if you need indexed database functionality without SQL interface. But compared to an STL map lookup and fopen, fwrite and fclose, it is much harder to understand and brings a lot of performance overhead. Hardcoding alternate chains should be designed in such a way as to share the main chain's difficulty. Those parameters are available, though they do not show up in --help output. If someone had the time to go back and document the parameters not in --help, it would be much appreciated. The transaction (relay) fees are there for a reason much more than just for the hell of it. Trying to fix bugs on an old codebase while rewriting a new one is worthless and just creating way more effort than is necessary.</summary>
    <published>2011-07-12T23:40:46+00:00</published>
  </entry>
</feed>
