<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - 0.4rc1 known bugs</title>
  <updated>2023-05-18T22:46:23.197499+00:00</updated>
  <author>
    <name>Pieter Wuille 2011-09-06 11:55:30</name>
  </author>
  <author>
    <name>Matt Corallo 2011-09-04 02:43:48</name>
  </author>
  <link href="bitcoin-dev/Sept_2011/000463_0-4rc1-known-bugs.xml" rel="alternate"/>
  <link href="bitcoin-dev/Sept_2011/000447_0-4rc1-known-bugs.xml" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>2</id>
    <title>Combined summary - 0.4rc1 known bugs</title>
    <updated>2023-05-18T22:46:23.197499+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2011-September/000463.html" rel="alternate"/>
    <summary>Pieter Wuille compiled bitcoind with Gavin's DEBUG_LOCKORDER and fixed two potential reported deadlock issues. However, these were not actual potential deadlocks as all locking of cs_vRecv/cs_vSend happens inside TRY_CRITICAL_SECTION blocks. Regarding the actual deadlock between IRC seeding and AddAddress, DB internally uses pthreads to implement the txn_begin()/commit() scheme, which needs to be taken into account when searching for deadlocks, but are obviously not detected by DEBUG_LOCKORDER. In particular here, the processing of "addr" created a db transaction for the entire message, while only locking cs_mapAddresses inside AddAddress. For IRC seeded addresses however, no db tx was precreated, and AddAddress first locked cs_mapAddress, and then did the database write (causing a lock) inside. To fix this, a solution was provided in main.cpp, ProcessMessage, case "addr". Gavin Andresen gave a quick status update on 0.4 and stated that he probably won't have time to tackle the deadlock issues properly before Tuesday. sipa found what looks like a deadlock between the addr-handling and IRC-join-handling code and UukGoblin reports a deadlock problem on a bitcoind handling getwork requests. If someone wants to get familiar with the bitcoin code and has a lot of patience, tracking down deadlocks is a great way to do it. Additionally, ArtForz found a performance bug with transactions that have thousands of inputs and outputs on the solidcoin test network. Finally, it was reported that Gitian doesn't build properly, which was attributed to Gavin's fault.</summary>
    <published>2011-09-06T11:55:30+00:00</published>
  </entry>
</feed>
