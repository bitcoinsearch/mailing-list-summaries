<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>1</id>
  <title>New transaction policies (nVersion=3) for contracting protocols</title>
  <updated>2023-07-04T02:30:49.004043+00:00</updated>
  <author>
    <name>Greg Sanders 2023-06-21 20:57:45+00:00</name>
  </author>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>1</id>
    <title>New transaction policies (nVersion=3) for contracting protocols</title>
    <updated>2023-07-04T02:30:49.004078+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021780.html" rel="alternate"/>
    <summary>In a recent proposal by Gloria Zhao, a set of mempool/transaction relay policies have been suggested to aid L2/contract protocols. These policies aim to solve the problem of Rule 3 pinning and potentially eliminate CPFP carve-out.The proposal introduces V3 transactions, which are currently non-standard in Bitcoin Core. V3 transactions can be replaced, even if they do not signal BIP125 replaceability. This allows for inherited replaceability signaling when descendants of unconfirmed transactions are created. Additionally, an unconfirmed V3 transaction cannot have more than 1 descendant. This is to prevent a pinning attack where a malicious counterparty adds many descendant transactions that aren't fee-bumping. Furthermore, a V3 transaction that has an unconfirmed V3 ancestor cannot be larger than 1000 virtual bytes. This limit ensures that the size of the descendant does not become too large, while still allowing enough UTXOs to fund the fee-bump. With this limit, the cost to replace a V3 transaction has lower variance.The proposal also suggests modifications to package RBF rules. It states that a package may include new unconfirmed inputs, but the ancestor feerate of the child must be at least as high as the ancestor feerate of the package. This ensures that the child transaction maintains a higher fee rate than its ancestors.Overall, these proposed policies provide a solution to Rule 3 pinning and offer potential improvements for L2/contract protocols. The implementation of these policies can be found on the Bitcoin Core GitHub repository.The Bitcoin development mailing list recently discussed proposed changes to the Bitcoin transaction replacement policy. The proposed changes aim to ensure that replacement transactions are not less incentive-compatible to mine. One of the changes is to modify the rule regarding the minimum fee rate for replacement transactions. Instead of using the ancestor fee rate alone, the new rule takes the minimum between the package fee rate and the ancestor fee rate of the child transaction. This modification provides a more conservative value for determining the fee rate of replacement transactions.Another proposed change is the requirement that all package transactions with mempool conflicts be V3. This means that the "sponsoring" child transaction must also be V3. This requirement ensures that only V3 transactions can pay to replace their ancestors' conflicts, and only V3 transactions' replacements may be paid for by a descendant. The rationale behind this change is that fee-related rules are economically rational for ancestor packages, but not necessarily for other types of packages. By limiting the replacement transactions to V3 transactions, it becomes easier to account for all possibilities and apply the descendant limits correctly.The intended usage for LN (Lightning Network) is also discussed in the context. Commitment transactions in LN should be V3 and have one anchor output. These transactions can be signed with 0 fees or 1 satoshi per vbyte once package relay is deployed on a significant portion of the network. If the commitment transaction needs to be broadcasted, the desired fee rate can be determined at broadcast time, and the anchor output can be spent in a high fee rate transaction. The broadcasted commitment transaction is referred to as "the parent," and the attached fee-bumping transaction is referred to as "the child." Several restrictions and guidelines are provided for these child transactions, including being V3, having a maximum size of 1000 vB, and not trying to attach a grandchild for a second fee bump.The document also addresses some expected questions. It confirms that the proposed changes fix Rule 3 Pinning and explains that fee-bumping a counterparty's commitment transaction using CPFP is not necessary because it can be packaged RBF (Replace-By-Fee) by attaching a high fee rate child to the user's commitment transaction. The document also addresses concerns about privacy and backward compatibility, stating that the use of V3 transactions should not worsen privacy issues and that V2 transactions cannot replace V3 transactions or vice versa to prevent censorship.The full set of rules and further details can be found in the doc/policy/version3_transactions.md and doc/policy/packages.md files in the related pull request. Feedback and review of the proposed changes are welcomed. [1] provides the link to the mailing list discussion on the proposed changes, while [2] provides a follow-up message with additional details.Overall, the proposed changes aim to improve the incentive compatibility and reliability of replacement transactions, especially in the context of LN transactions.</summary>
    <published>2023-06-21T20:57:45+00:00</published>
  </entry>
</feed>
