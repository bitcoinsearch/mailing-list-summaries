<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>1</id>
  <title>New transaction policies (nVersion=3) for contracting protocols</title>
  <updated>2023-07-12T02:28:35.486746+00:00</updated>
  <author>
    <name>Greg Sanders 2023-06-21 20:57:45+00:00</name>
  </author>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>1</id>
    <title>New transaction policies (nVersion=3) for contracting protocols</title>
    <updated>2023-07-12T02:28:35.486809+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021780.html" rel="alternate"/>
    <summary>A recent proposal by Gloria Zhao suggests a set of mempool/transaction relay policies to support L2/contract protocols. The proposal aims to address the problem of Rule 3 pinning and potentially eliminate CPFP carve-out. It includes additional rules for V3 transactions and modifications to package RBF rules. For V3 transactions, which are currently non-standard in Bitcoin Core, there are several new rules proposed. Firstly, a V3 transaction can be replaced even if it does not signal BIP125 replaceability, allowing for easier replaceability signaling for descendants of unconfirmed transactions. Secondly, an unconfirmed V3 transaction cannot have more than one descendant to prevent a pinning attack. Additionally, at least one descendant is required to allow CPFP of the presigned transaction. The size of a V3 transaction with an unconfirmed V3 ancestor is limited to 1000 virtual bytes.The modifications to package RBF rules involve allowing new unconfirmed inputs in a package, but the child's ancestor feerate must be at least as high as the package's ancestor feerate. This ensures that the fee rate does not decrease when adding new inputs. Gloria also suggests considering allowing OP_TRUE to become a standard script type, which would save bytes by having an empty input of witness data. She proposes allowing for a single dust-value output that is immediately spent by the package, making anchors easier to design. However, she acknowledges that these suggestions may require more time for adoption.Overall, the proposal aims to improve replaceability and address pinning attacks in L2/contract protocols. The implementation of these policies can be found on the Bitcoin Core GitHub repository.Another proposal has been made to modify the rules for Bitcoin transactions to ensure that replacement transactions are incentive-compatible to mine. The first rule change involves modifying the minimum fee requirement for replacement transactions. The minimum fee must now be the higher of the package feerate or the ancestor feerate of the child transaction and cannot be lower than the individual feerates of conflicting transactions and original transactions' ancestor feerates. This change aims to obtain a more conservative value for incentive compatibility.The second rule change requires that all package transactions with mempool conflicts be V3 transactions, meaning the sponsoring child transaction must also be a V3 transaction. This ensures that only V3 transactions can pay to replace their ancestors' conflicts, and only V3 transactions' replacements may be paid for by a descendant. This change is necessary to account for all possibilities and maintain incentive compatibility.For Lightning Network (LN) usage, commitment transactions should be V3 and have one anchor output. When package relay is widely deployed, these commitment transactions can be signed with 0 fees. If broadcasted, the desired feerate should be determined at that time, and the anchor output should be spent in a high-feerate transaction. The commitment transaction being broadcasted is referred to as "the parent," and the fee-bumping transaction attached to it is referred to as "the child." The child must also be a V3 transaction and should not exceed 1000vB in size.There are restrictions on spending from unconfirmed V3 transactions due to the restrictive descendant limits for V3 transactions.The proposal addresses the issue of Rule 3 Pinning by imposing restrictions on both parties involved. Fee-bumping a counterparty's commitment transaction using CPFP is unnecessary, as it can be packaged with a high-feerate child transaction. The use of V3 transactions does not worsen privacy concerns since unilateral closes are already obvious LN transactions.In terms of backward compatibility, a V3 transaction that does not signal BIP125 replaceability is replaceable. However, this is not considered an issue as the previous policy would not have included the V3 transaction in the mempool.Lastly, it is possible for a V2 transaction to replace a V3 transaction and vice versa, allowing for censorship resistance. Censoring V2 transactions spending shared inputs using V3 transactions would violate the "inherited V3" rule and be rejected.Feedback and review of the proposal are welcomed.</summary>
    <published>2023-06-21T20:57:45+00:00</published>
  </entry>
</feed>
