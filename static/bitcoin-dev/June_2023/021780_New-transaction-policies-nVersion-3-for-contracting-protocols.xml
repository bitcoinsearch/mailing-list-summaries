<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>1</id>
  <title>New transaction policies (nVersion=3) for contracting protocols</title>
  <updated>2023-07-09T02:43:14.215644+00:00</updated>
  <author>
    <name>Greg Sanders 2023-06-21 20:57:45+00:00</name>
  </author>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>1</id>
    <title>New transaction policies (nVersion=3) for contracting protocols</title>
    <updated>2023-07-09T02:43:14.215693+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021780.html" rel="alternate"/>
    <summary>A proposal has been made to update the Bitcoin transaction replacement policy. The proposal suggests a set of mempool/transaction relay policies to aid L2/contract protocols and address the remaining problems in the previously proposed Package Mempool Accept package RBF. The new policies include additional rules for V3 transactions and modifications to package RBF rules.For V3 transactions, there are some additional rules. Firstly, a V3 transaction can be replaced even if it does not signal BIP125 replaceability, as long as it meets other RBF rules around fees. Secondly, any descendant of an unconfirmed V3 transaction must also be V3, providing "inherited" replaceability signaling when descendants of unconfirmed transactions are created. Thirdly, an unconfirmed V3 transaction cannot have more than 1 descendant to prevent a pinning attack. Lastly, a V3 transaction with an unconfirmed V3 ancestor cannot be larger than 1000 virtual bytes, setting an upper bound on the size of descendant transactions that may need to be replaced.These rules aim to solve Rule 3 pinning and allow for the removal of CPFP carve-out. However, they do not fix scenarios involving ANYONECANPAY situations or resolving HTLC/commitment-like transactions in batches with relative time constraints.The proposal also includes modifications to the package RBF rules. One of the modifications is that a package may include new unconfirmed inputs, but the ancestor feerate of the child must be at least as high as the ancestor feerate of the input it replaces.In addition to these changes, the proposal suggests allowing OP_TRUE to become a standard script type to save bytes by having the input empty of witness data. It also proposes allowing a single dust-value output that is immediately spent by the package, making anchors easier to design.The author welcomes feedback on the proposal, particularly regarding the 1-anchor-output, 1000vB child limit, and any pinning attacks or issues that may render it unusable. The proposal aims to improve replaceability signaling for transactions and provide more flexibility for L2/contract protocols.Regarding Lightning Network (LN) usage, commitment transactions should be V3 and have one anchor output. These transactions can be signed with zero fees or 1 sat/vbyte once package relay is deployed on a significant portion of the network. If the commitment transaction needs to be broadcasted, the desired feerate should be determined at broadcast time, and the anchor output should be spent in a high-feerate transaction. The child transaction that bumps the fees must also be V3 and should be no more than 1000vB, limiting the number of inputs that can be used to fund the fee bump.The new policy fixes Rule 3 Pinning by restricting both parties involved in an LN transaction. Fee-bumping a counterparty's commitment transaction using Child Pays for Parent (CPFP) is not necessary; instead, the commitment transaction can be packaged with a high-feerate child transaction. The use of V3 transactions for LN transactions does not introduce privacy issues, as unilateral closes are already identifiable due to HTLC inputs. However, it may be unrealistic to assume widespread use of V3 transactions outside of L2.In terms of backward compatibility, a V3 transaction that does not signal BIP125 replaceability is replaceable. This is not an issue because, under the previous policy, the V3 transaction would not have been in the mempool. It is also possible for a V2 transaction to replace a V3 transaction and vice versa, but if the original V3 transaction has an unconfirmed V3 parent, it would violate the "inherited V3" rule and be rejected.For a more comprehensive understanding of the proposed rules, the full set of rules can be found in the doc/policy/version3_transactions.md and doc/policy/packages.md documents in the pull request. Feedback and review of the proposal are welcomed and encouraged.</summary>
    <published>2023-06-21T20:57:45+00:00</published>
  </entry>
</feed>
