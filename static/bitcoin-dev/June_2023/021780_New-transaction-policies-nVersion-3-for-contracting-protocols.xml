<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>1</id>
  <title>New transaction policies (nVersion=3) for contracting protocols</title>
  <updated>2023-06-30T02:24:29.886151+00:00</updated>
  <author>
    <name>Greg Sanders 2023-06-21 20:57:45+00:00</name>
  </author>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>1</id>
    <title>New transaction policies (nVersion=3) for contracting protocols</title>
    <updated>2023-06-30T02:24:29.886190+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021780.html" rel="alternate"/>
    <summary>The proposal suggests a set of mempool/transaction relay policies to aid L2/contract protocols. The main goal is to solve Rule 3 pinning and potentially eliminate CPFP carve-out. The policies include additional rules for V3 transactions and modifications to package RBF rules.For V3 transactions, existing standardness rules still apply, but there are new rules specific to V3. First, a V3 transaction can be replaced even without signaling BIP125 replaceability. This allows for inherited replaceability signaling when descendants of unconfirmed transactions are created. An unconfirmed V3 transaction cannot have more than one descendant, which prevents a pinning attack where a malicious counterparty adds many descendant transactions that aren't fee-bumping. Additionally, a V3 transaction with an unconfirmed V3 ancestor cannot be larger than 1000 virtual bytes. This limits the size of the descendant and ensures that the cost to replace a V3 transaction has lower variance.Regarding package RBF modifications, the rule around unconfirmed inputs is modified. Previously, a package could include new unconfirmed inputs, but the ancestor feerate of the child had to be at least as high as the ancestor feerate of the inputs. Now, this rule is relaxed, allowing for greater flexibility in constructing packages.The proposal also includes some suggestions, such as allowing OP_TRUE to become a standard script type to save bytes and making anchoring outputs easier by allowing a single dust-value output that is immediately spent by the package.Overall, the proposed policies aim to improve replaceability and address pinning attacks in order to support L2/contract protocols.The Bitcoin Development mailing list recently discussed proposed changes to the Bitcoin protocol regarding transaction replacement. The proposed changes aim to improve the incentive compatibility of replacement transactions.One of the new rules states that the minimum fee rate for a package or transaction should not be lower than the individual fee rates of conflicting transactions and the ancestor fee rates of original transactions. This rule ensures that replacement transactions are not less incentivized to be mined.Another new rule requires that all package transactions with mempool conflicts be Version 3 (V3). This also means that the "sponsoring" child transaction must be V3. This requirement, combined with the V3 rules, ensures that only V3 transactions can pay to replace their ancestors' conflicts and that only V3 transactions' replacements may be paid for by a descendant. The rationale behind this rule is that the fee-related rules are economically rational for ancestor packages, but not necessarily for other types of packages. By limiting the type of transactions involved in replacement, it becomes easier to apply the rules correctly.The intended usage for Lightning Network (LN) transactions is also discussed. Commitment transactions should be V3 and have one anchor output. These transactions can initially be signed with zero fees or a low fee rate. Once package relay is deployed on a significant portion of the network, the desired fee rate can be determined at broadcast time, and the anchor output can be spent in a high fee rate transaction. The broadcasted commitment transaction is referred to as the parent, and the attached fee-bumping transaction is referred to as the child. There are specific requirements for the child transaction, such as being V3 and having a maximum size of 1000 virtual bytes (vB).The document also addresses expected questions. It confirms that the proposed changes fix Rule 3 Pinning and explains that the V3 descendant limit restricts both parties involved, ensuring that only the commitment transaction and up to 1000vB need to be replaced. It clarifies that there is no need to fee-bump a counterparty's commitment transaction using Child Pays for Parent (CPFP), as it can be replaced by attaching a high-fee child to the original commitment transaction.Regarding privacy concerns, it is acknowledged that assuming widespread use of V3 transactions outside of Layer 2 (L2) may be unrealistic. However, the document states that unilateral closes are already identifiable LN transactions due to the HTLC inputs. Cooperative closes and opens are suggested to continue using V2 transactions. Overall, the proposed changes should not worsen privacy concerns.The document also addresses backward compatibility questions. It confirms that a V3 transaction that does not signal BIP125 replaceability is replaceable. This is not seen as an issue because, under the previous policy, the V3 transaction would not have been in the mempool in the first place. Additionally, it is highlighted that a V2 transaction can replace a V3 transaction and vice versa to prevent censorship of V2 transactions spending shared inputs. However, if the original V3 transaction has an unconfirmed V3 parent, it would violate the "inherited V3" rule and be rejected.Feedback and review of the proposed changes are welcomed, and links to the full set of rules can be found in the document.[1]: https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-September/</summary>
    <published>2023-06-21T20:57:45+00:00</published>
  </entry>
</feed>
