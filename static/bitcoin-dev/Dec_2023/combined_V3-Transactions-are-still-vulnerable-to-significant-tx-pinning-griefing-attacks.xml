<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - V3 Transactions are still vulnerable to significant tx pinning griefing attacks</title>
  <updated>2023-12-21T01:58:39.778223+00:00</updated>
  <author>
    <name>Peter Todd 2023-12-20 21:11:28+00:00</name>
  </author>
  <author>
    <name>Greg Sanders 2023-12-20 20:16:25+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-12-20 19:48:59+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-12-20 17:14:56+00:00</name>
  </author>
  <link href="bitcoin-dev/Dec_2023/022214_V3-Transactions-are-still-vulnerable-to-significant-tx-pinning-griefing-attacks.xml" rel="alternate"/>
  <link href="bitcoin-dev/Dec_2023/022213_V3-Transactions-are-still-vulnerable-to-significant-tx-pinning-griefing-attacks.xml" rel="alternate"/>
  <link href="bitcoin-dev/Dec_2023/022212_V3-Transactions-are-still-vulnerable-to-significant-tx-pinning-griefing-attacks.xml" rel="alternate"/>
  <link href="bitcoin-dev/Dec_2023/022211_V3-Transactions-are-still-vulnerable-to-significant-tx-pinning-griefing-attacks.xml" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>2</id>
    <title>Combined summary - V3 Transactions are still vulnerable to significant tx pinning griefing attacks</title>
    <updated>2023-12-21T01:58:39.778276+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-December/022214.html" rel="alternate"/>
    <summary>The discussion begins with an examination of the Child Pays for Parent (CPFP) mechanism, where it is noted that usually a single or at most two unspent transaction outputs (UTXOs) are needed to pay for a fee. A misconception regarding V3 transactions was clarified: they cannot pay for multiple parent transactions in one go due to restrictions on unconfirmed inputs. The current standard involves using signed anchors, which Lightning channels utilize with anchor outputs that could be zero-valued but signed to prevent pinning issues. It's pointed out that existing Lightning anchor channels use two anchor outputs when one would suffice.

Greg then responds by highlighting the constraints of a "static" CPFP approach and the need to commit upfront to the size of the CPFP transaction. He suggests that 1 kilobyte virtual byte (kvB) allows for a moderately flexible number of inputs for this purpose, acknowledging that while more flexibility is desired, current discussions are preliminary, and substantial changes would require significant work. Greg also touches upon the concept of "pinning potential," suggesting that under poor utxo management or high-value commitment transactions, the risk of pinning is low. In contrast, if a user only has one utxo, the max pin could be effective.

Peter counters by describing a typical commitment transaction under taproot with ephemeral anchors, consisting of a single-sig input, two taproot outputs, and an ephemeral anchor output, totaling much less than 1000vB. He admits to forgetting the removal of a restriction that would have allowed for significant improvements in handling multiple force closes.

Finally, the issue with V3 transactions is discussed in the context of mitigating transaction pinning attacks. The rules state that a V3 transaction with an unconfirmed V3 ancestor cannot exceed 1000 virtual bytes, but this does not significantly reduce the risk of such attacks. An example scenario illustrates how Alice could be forced to pay higher fees due to Mallory's griefing tactics by broadcasting a large-sized replacement transaction with a lower fee rate. This scenario highlights the limitations of V3 transactions in preventing pinning attacks and emphasizes the need for further refinements to improve security and usability within the Lightning Network and similar Layer 2 protocols.</summary>
    <published>2023-12-20T21:11:28+00:00</published>
  </entry>
</feed>
