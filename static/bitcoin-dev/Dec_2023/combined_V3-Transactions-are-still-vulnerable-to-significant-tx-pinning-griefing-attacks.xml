<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - V3 Transactions are still vulnerable to significant tx pinning griefing attacks</title>
  <updated>2023-12-22T14:27:20.274560+00:00</updated>
  <author>
    <name>Peter Todd 2023-12-20 21:11:28+00:00</name>
  </author>
  <author>
    <name>Greg Sanders 2023-12-20 20:16:25+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-12-20 19:48:59+00:00</name>
  </author>
  <author>
    <name>Gloria Zhao 2023-12-20 19:13:22+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-12-20 17:14:56+00:00</name>
  </author>
  <link href="bitcoin-dev/Dec_2023/022214_V3-Transactions-are-still-vulnerable-to-significant-tx-pinning-griefing-attacks.xml" rel="alternate"/>
  <link href="bitcoin-dev/Dec_2023/022213_V3-Transactions-are-still-vulnerable-to-significant-tx-pinning-griefing-attacks.xml" rel="alternate"/>
  <link href="bitcoin-dev/Dec_2023/022212_V3-Transactions-are-still-vulnerable-to-significant-tx-pinning-griefing-attacks.xml" rel="alternate"/>
  <link href="bitcoin-dev/Dec_2023/022216_V3-Transactions-are-still-vulnerable-to-significant-tx-pinning-griefing-attacks.xml" rel="alternate"/>
  <link href="bitcoin-dev/Dec_2023/022211_V3-Transactions-are-still-vulnerable-to-significant-tx-pinning-griefing-attacks.xml" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>2</id>
    <title>Combined summary - V3 Transactions are still vulnerable to significant tx pinning griefing attacks</title>
    <updated>2023-12-22T14:27:20.274617+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-December/022214.html" rel="alternate"/>
    <summary>The Child Pays for Parent (CPFP) strategy in cryptocurrency is a method designed to speed up transaction confirmations by paying higher fees. This typically involves using unspent transaction outputs to cover the required fee. However, it has been clarified that version 3 (V3) transactions cannot consolidate multiple parent transactions into one due to restrictions on unconfirmed inputs, making the previously perceived limits on inputs for CPFP often unnecessary. In the context of Bitcoin's Lightning Network, signed anchors are used to establish channel states within anchor channels. While these anchors can be zero value, they maintain security as only the intended parties can spend them with their signatures. Despite this, current implementations of Lightning anchor channels are not optimized, having two anchor outputs where one would suffice; a point highlighted by Peter Todd, who suggests a single output is sufficient.

Greg elaborates on a "static" approach to implementing CPFP in Bitcoin, noting the limitation of predetermining the size of the CPFP layer at an arbitrary value of 1 kilovirtualbyte (kvB). This allows for approximately 14 taproot inputs, offering some flexibility to users. Nonetheless, there's recognition of the need for a more adaptable solution that would require deeper systemic changes. Greg also touches on the concept of "pinning potential," which considers factors like transaction size and management of unspent transaction outputs. In cases where users inefficiently manage their UTXOs or have high-value commitment transactions, the potential for pinning could be virtually nonexistent. Conversely, optimal pinning potential is possible when users consistently have only one UTXO. The worst-case scenario under current limitations is deemed significantly better than before, though not ideal, indicating moderate acceptance of the trade-offs involved.

Recent discussions have shown that the typical size of a commitment transaction leveraging taproot and ephemeral anchors is smaller than expected, around 162 virtual bytes without HTLCs and 206vB with them, contrasting with the assumed 1000vB. This has implications for the benefits of removing certain restrictions, especially in multiple force close scenarios. Any further inquiries or continuation of this discussion can be directed to Peter Todd via his modified email address [peter@petertodd.org](mailto:peter@petertodd.org).

In a detailed examination of Rule 3 transaction pinning and V3 transactions, the email sender uses specific examples to illustrate the cost implications for Alice, a user attempting to expedite her transaction through CPFP, and Mallory, an attacker looking to inflate Alice's costs. The analysis provided includes several scenarios with varying transaction sizes and outlines the different outcomes in both V3 and non-V3 worlds, highlighting the effectiveness of restrictions in reducing potential damage from such attacks.

While V3 transactions were created to enhance protocols like the Lightning Network and mitigate Rule 3 transaction pinning, they still face challenges in preventing pinning attacks effectively. By examining a case where Alice and Bob have a Lightning channel, and Bob becomes uncooperative, we see Alice's reliance on V3 transactions and her vulnerability to Mallory's exploitation. Mallory prepares a replacement transaction that is precisely 1000 virtual bytes and broadcasts it at a lower fee rate, taking advantage of his network connections to prioritize his transaction over Alice's. This example shows that despite new measures, attackers can still manipulate the system by broadcasting larger, low-fee transactions, causing financial strain on the victim and suggesting that further safeguards might be necessary to protect against such attacks.</summary>
    <published>2023-12-20T21:11:28+00:00</published>
  </entry>
</feed>
