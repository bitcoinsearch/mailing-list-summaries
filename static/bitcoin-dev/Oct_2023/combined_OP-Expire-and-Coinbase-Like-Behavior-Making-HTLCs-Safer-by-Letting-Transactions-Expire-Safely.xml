<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - OP_Expire and Coinbase-Like Behavior: Making HTLCs Safer by Letting Transactions Expire Safely</title>
  <updated>2023-11-09T08:31:02.715657+00:00</updated>
  <author>
    <name>Peter Todd 2023-11-08 02:06:23+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-11-08 00:51:31+00:00</name>
  </author>
  <author>
    <name>Antoine Riard 2023-11-07 15:44:21+00:00</name>
  </author>
  <author>
    <name>ZmnSCPxj 2023-11-07 11:11:59+00:00</name>
  </author>
  <author>
    <name>Antoine Riard 2023-11-06 18:45:21+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-11-04 07:26:24+00:00</name>
  </author>
  <author>
    <name>Antoine Riard 2023-11-03 05:27:54+00:00</name>
  </author>
  <author>
    <name>Antoine Riard 2023-11-03 05:25:24+00:00</name>
  </author>
  <author>
    <name>Matt Morehouse 2023-11-02 17:07:39+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-11-02 06:26:38+00:00</name>
  </author>
  <author>
    <name>Antoine Riard 2023-11-02 05:24:36+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-10-23 15:45:44+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-10-23 15:45:44+00:00</name>
  </author>
  <author>
    <name>ZmnSCPxj 2023-10-23 11:10:56+00:00</name>
  </author>
  <author>
    <name>ZmnSCPxj 2023-10-23 11:10:56+00:00</name>
  </author>
  <author>
    <name>vjudeu at gazeta.pl 2023-10-22 08:30:01+00:00</name>
  </author>
  <author>
    <name>vjudeu at gazeta.pl 2023-10-22 08:30:01+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-10-21 10:31:05+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-10-21 10:31:05+00:00</name>
  </author>
  <author>
    <name>David A. Harding 2023-10-21 08:58:32+00:00</name>
  </author>
  <author>
    <name>David A. Harding 2023-10-21 08:58:32+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-10-21 00:09:16+00:00</name>
  </author>
  <author>
    <name>Peter Todd 2023-10-21 00:09:16+00:00</name>
  </author>
  <link href="bitcoin-dev/Nov_2023/022157_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Nov_2023/022155_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Nov_2023/022136_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Nov_2023/022129_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Nov_2023/022130_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Nov_2023/022121_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Nov_2023/022115_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Nov_2023/022114_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Nov_2023/022113_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Nov_2023/022108_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Nov_2023/022110_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2023/022073_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2023/004174_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2023/022068_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2023/004173_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2023/004160_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2023/022061_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2023/004170_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2023/022051_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2023/004159_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2023/022050_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2023/022042_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2023/004163_OP-Expire-and-Coinbase-Like-Behavior-Making-HTLCs-Safer-by-Letting-Transactions-Expire-Safely.xml" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>2</id>
    <title>Combined summary - OP_Expire and Coinbase-Like Behavior: Making HTLCs Safer by Letting Transactions Expire Safely</title>
    <updated>2023-11-09T08:31:02.715930+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-November/022157.html" rel="alternate"/>
    <summary>The blog post addresses the challenges and potential solutions associated with handling transactions on the blockchain, focusing specifically on commitment transactions and hash timelocked contracts (HTLCs) within the Bitcoin network.

One proposed solution is OP_Expire, which would encourage the timely revelation of preimages on the blockchain by making them irrelevant after a certain expiration time. This aims to prevent the strategic withholding of preimages.

The concept of v3 package relay is also examined, highlighting its requirement for zero value outputs to be spent together, in contrast to current transactions that utilize multiple anchors. This change is designed to limit UTXO growth and distinguishes v3 from existing anchor outputs. Concerns are raised about the effectiveness of the Replace-by-Fee (RBF) protocol when commitment transactions remain unmined, suggesting that an RBF without anchor outputs could be more effective when combined with CheckSequenceVerify (CSV).

Dynamic fee-bumping in pre-signed transactions presents difficulties, with the text suggesting future improvements through SIGHASH_NOINPUT or covenants and noting RBF's efficiency over Child Pays for Parent (CPFP) in package relay scenarios. Proposals include modifying the replacement relay fee or using delta-encoding for transaction updates.

A soft fork incorporating both SIGHASH_NOINPUT and OP_Expire is recommended to enhance the Lightning Network. Meanwhile, Antoine points out a vulnerability where attackers can exploit single-input commitment transactions through replacement cycling. A testing scenario reflects a new mempool policy for version 3 transactions to address such vulnerabilities.

An HTLC case between Bob and Carol illustrates the use of timelocks to protect against attacks, ensuring Carol's rights within a specific period. The post critiques OP_Expire's ability to address advanced tactics like replacement cycling within the Lightning Network.

It also discusses the risks associated with pre-signed commitment transactions with RBF features, emphasizing the importance of understanding differences between anchor and non-anchor channels in relation to fee bumping mechanisms. A website link is provided for additional insights into these topics.

Antoine discusses reverse time-lock as a mechanism to mitigate risks within lightning network channels but notes that it shifts the security burden. He suggests removing counterparty malleability in setting package total fees and committing to fee-bumping reserves, despite the need for maintaining high reserves.

Time-based expiration is discouraged due to miner manipulation risks, with "nExpiryHeight" proposed as a safer alternative. There's also an alternative design for the taproot annex with an explicit `nExpiryTime` field to manage transaction lifetimes within a block, contrasting with Peter Todd's implicit field proposal and offering clarity for implementation.

The use of OP_CHECKSEQUENCEVERIFY is discussed to create relative locktimes without coinbase transactions. OP_Expire is proposed to apply expiration to specific transaction paths, and the Coinbase Bit via a soft fork would allow transactions to become spendable after an additional number of blocks, enhancing reorg safety.

Finally, the email acknowledges a significant issue with the replacement cycling attack, indicating that proposed solutions may not fully prevent it. It references Peter Todd's work and ongoing discussions in the space.

The email proposes a solution to optimize the execution of HTLCs in Bitcoin transactions, aiming to ensure that the preimage is mined before timeout. This involves opening the claim to the HTLC-preimage to anyone after a set time, creating urgency for involved parties. An illustrative scenario with Alice, Bob, and Carol demonstrates how this approach addresses issues within the Lightning Network and miner centralization.

The deployment would not require changes to full or mining nodes but necessitates updates to at least one Bitcoin relay node and LN nodes' HTLC scripts. Unlike OP_EXPIRE, this method does not call for consensus changes and relies on special software operated by at least one entity.

Furthermore, expiring the HTLC-preimage path through OP_Expire and a soft-fork involving the Coinbase Bit is elaborated upon, drawing parallels to how coinbase outputs are treated. Another alternative discussed is encoding expiration height relative to a block-height nLockTime. These methods aim to improve the security and reliability of HTLC executions by enforcing timely resolution of contracts.</summary>
    <published>2023-11-08T02:06:23+00:00</published>
  </entry>
</feed>
